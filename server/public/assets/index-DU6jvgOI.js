(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))s(_);new MutationObserver(_=>{for(const T of _)if(T.type==="childList")for(const w of T.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&s(w)}).observe(document,{childList:!0,subtree:!0});function l(_){const T={};return _.integrity&&(T.integrity=_.integrity),_.referrerPolicy&&(T.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?T.credentials="include":_.crossOrigin==="anonymous"?T.credentials="omit":T.credentials="same-origin",T}function s(_){if(_.ep)return;_.ep=!0;const T=l(_);fetch(_.href,T)}})();var q_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yu={exports:{}},_s={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oh;function I_(){if(Oh)return _s;Oh=1;var d=Symbol.for("react.transitional.element"),c=Symbol.for("react.fragment");function l(s,_,T){var w=null;if(T!==void 0&&(w=""+T),_.key!==void 0&&(w=""+_.key),"key"in _){T={};for(var R in _)R!=="key"&&(T[R]=_[R])}else T=_;return _=T.ref,{$$typeof:d,type:s,key:w,ref:_!==void 0?_:null,props:T}}return _s.Fragment=c,_s.jsx=l,_s.jsxs=l,_s}var Mh;function H_(){return Mh||(Mh=1,yu.exports=I_()),yu.exports}var he=H_(),bu={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xh;function G_(){if(xh)return be;xh=1;var d=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),w=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),D=Symbol.iterator;function O(B){return B===null||typeof B!="object"?null:(B=D&&B[D]||B["@@iterator"],typeof B=="function"?B:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,U={};function A(B,Z,ae){this.props=B,this.context=Z,this.refs=U,this.updater=ae||y}A.prototype.isReactComponent={},A.prototype.setState=function(B,Z){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Z,"setState")},A.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function g(){}g.prototype=A.prototype;function h(B,Z,ae){this.props=B,this.context=Z,this.refs=U,this.updater=ae||y}var a=h.prototype=new g;a.constructor=h,b(a,A.prototype),a.isPureReactComponent=!0;var r=Array.isArray,u={H:null,A:null,T:null,S:null},p=Object.prototype.hasOwnProperty;function S(B,Z,ae,le,re,ge){return ae=ge.ref,{$$typeof:d,type:B,key:Z,ref:ae!==void 0?ae:null,props:ge}}function P(B,Z){return S(B.type,Z,void 0,void 0,void 0,B.props)}function v(B){return typeof B=="object"&&B!==null&&B.$$typeof===d}function M(B){var Z={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ae){return Z[ae]})}var N=/\/+/g;function k(B,Z){return typeof B=="object"&&B!==null&&B.key!=null?M(""+B.key):Z.toString(36)}function z(){}function V(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(z,z):(B.status="pending",B.then(function(Z){B.status==="pending"&&(B.status="fulfilled",B.value=Z)},function(Z){B.status==="pending"&&(B.status="rejected",B.reason=Z)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function ee(B,Z,ae,le,re){var ge=typeof B;(ge==="undefined"||ge==="boolean")&&(B=null);var ve=!1;if(B===null)ve=!0;else switch(ge){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(B.$$typeof){case d:case c:ve=!0;break;case x:return ve=B._init,ee(ve(B._payload),Z,ae,le,re)}}if(ve)return re=re(B),ve=le===""?"."+k(B,0):le,r(re)?(ae="",ve!=null&&(ae=ve.replace(N,"$&/")+"/"),ee(re,Z,ae,"",function(Ue){return Ue})):re!=null&&(v(re)&&(re=P(re,ae+(re.key==null||B&&B.key===re.key?"":(""+re.key).replace(N,"$&/")+"/")+ve)),Z.push(re)),1;ve=0;var Ze=le===""?".":le+":";if(r(B))for(var Ee=0;Ee<B.length;Ee++)le=B[Ee],ge=Ze+k(le,Ee),ve+=ee(le,Z,ae,ge,re);else if(Ee=O(B),typeof Ee=="function")for(B=Ee.call(B),Ee=0;!(le=B.next()).done;)le=le.value,ge=Ze+k(le,Ee++),ve+=ee(le,Z,ae,ge,re);else if(ge==="object"){if(typeof B.then=="function")return ee(V(B),Z,ae,le,re);throw Z=String(B),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return ve}function L(B,Z,ae){if(B==null)return B;var le=[],re=0;return ee(B,le,"","",function(ge){return Z.call(ae,ge,re++)}),le}function I(B){if(B._status===-1){var Z=B._result;Z=Z(),Z.then(function(ae){(B._status===0||B._status===-1)&&(B._status=1,B._result=ae)},function(ae){(B._status===0||B._status===-1)&&(B._status=2,B._result=ae)}),B._status===-1&&(B._status=0,B._result=Z)}if(B._status===1)return B._result.default;throw B._result}var H=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function Y(){}return be.Children={map:L,forEach:function(B,Z,ae){L(B,function(){Z.apply(this,arguments)},ae)},count:function(B){var Z=0;return L(B,function(){Z++}),Z},toArray:function(B){return L(B,function(Z){return Z})||[]},only:function(B){if(!v(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},be.Component=A,be.Fragment=l,be.Profiler=_,be.PureComponent=h,be.StrictMode=s,be.Suspense=C,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=u,be.act=function(){throw Error("act(...) is not supported in production builds of React.")},be.cache=function(B){return function(){return B.apply(null,arguments)}},be.cloneElement=function(B,Z,ae){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var le=b({},B.props),re=B.key,ge=void 0;if(Z!=null)for(ve in Z.ref!==void 0&&(ge=void 0),Z.key!==void 0&&(re=""+Z.key),Z)!p.call(Z,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&Z.ref===void 0||(le[ve]=Z[ve]);var ve=arguments.length-2;if(ve===1)le.children=ae;else if(1<ve){for(var Ze=Array(ve),Ee=0;Ee<ve;Ee++)Ze[Ee]=arguments[Ee+2];le.children=Ze}return S(B.type,re,void 0,void 0,ge,le)},be.createContext=function(B){return B={$$typeof:w,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:T,_context:B},B},be.createElement=function(B,Z,ae){var le,re={},ge=null;if(Z!=null)for(le in Z.key!==void 0&&(ge=""+Z.key),Z)p.call(Z,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(re[le]=Z[le]);var ve=arguments.length-2;if(ve===1)re.children=ae;else if(1<ve){for(var Ze=Array(ve),Ee=0;Ee<ve;Ee++)Ze[Ee]=arguments[Ee+2];re.children=Ze}if(B&&B.defaultProps)for(le in ve=B.defaultProps,ve)re[le]===void 0&&(re[le]=ve[le]);return S(B,ge,void 0,void 0,null,re)},be.createRef=function(){return{current:null}},be.forwardRef=function(B){return{$$typeof:R,render:B}},be.isValidElement=v,be.lazy=function(B){return{$$typeof:x,_payload:{_status:-1,_result:B},_init:I}},be.memo=function(B,Z){return{$$typeof:m,type:B,compare:Z===void 0?null:Z}},be.startTransition=function(B){var Z=u.T,ae={};u.T=ae;try{var le=B(),re=u.S;re!==null&&re(ae,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(Y,H)}catch(ge){H(ge)}finally{u.T=Z}},be.unstable_useCacheRefresh=function(){return u.H.useCacheRefresh()},be.use=function(B){return u.H.use(B)},be.useActionState=function(B,Z,ae){return u.H.useActionState(B,Z,ae)},be.useCallback=function(B,Z){return u.H.useCallback(B,Z)},be.useContext=function(B){return u.H.useContext(B)},be.useDebugValue=function(){},be.useDeferredValue=function(B,Z){return u.H.useDeferredValue(B,Z)},be.useEffect=function(B,Z){return u.H.useEffect(B,Z)},be.useId=function(){return u.H.useId()},be.useImperativeHandle=function(B,Z,ae){return u.H.useImperativeHandle(B,Z,ae)},be.useInsertionEffect=function(B,Z){return u.H.useInsertionEffect(B,Z)},be.useLayoutEffect=function(B,Z){return u.H.useLayoutEffect(B,Z)},be.useMemo=function(B,Z){return u.H.useMemo(B,Z)},be.useOptimistic=function(B,Z){return u.H.useOptimistic(B,Z)},be.useReducer=function(B,Z,ae){return u.H.useReducer(B,Z,ae)},be.useRef=function(B){return u.H.useRef(B)},be.useState=function(B){return u.H.useState(B)},be.useSyncExternalStore=function(B,Z,ae){return u.H.useSyncExternalStore(B,Z,ae)},be.useTransition=function(){return u.H.useTransition()},be.version="19.0.0",be}var Lh;function Fu(){return Lh||(Lh=1,bu.exports=G_()),bu.exports}var $=Fu(),Su={exports:{}},ys={},wu={exports:{}},Ru={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ah;function Y_(){return Ah||(Ah=1,function(d){function c(L,I){var H=L.length;L.push(I);e:for(;0<H;){var Y=H-1>>>1,B=L[Y];if(0<_(B,I))L[Y]=I,L[H]=B,H=Y;else break e}}function l(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var I=L[0],H=L.pop();if(H!==I){L[0]=H;e:for(var Y=0,B=L.length,Z=B>>>1;Y<Z;){var ae=2*(Y+1)-1,le=L[ae],re=ae+1,ge=L[re];if(0>_(le,H))re<B&&0>_(ge,le)?(L[Y]=ge,L[re]=H,Y=re):(L[Y]=le,L[ae]=H,Y=ae);else if(re<B&&0>_(ge,H))L[Y]=ge,L[re]=H,Y=re;else break e}}return I}function _(L,I){var H=L.sortIndex-I.sortIndex;return H!==0?H:L.id-I.id}if(d.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var T=performance;d.unstable_now=function(){return T.now()}}else{var w=Date,R=w.now();d.unstable_now=function(){return w.now()-R}}var C=[],m=[],x=1,D=null,O=3,y=!1,b=!1,U=!1,A=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;function a(L){for(var I=l(m);I!==null;){if(I.callback===null)s(m);else if(I.startTime<=L)s(m),I.sortIndex=I.expirationTime,c(C,I);else break;I=l(m)}}function r(L){if(U=!1,a(L),!b)if(l(C)!==null)b=!0,V();else{var I=l(m);I!==null&&ee(r,I.startTime-L)}}var u=!1,p=-1,S=5,P=-1;function v(){return!(d.unstable_now()-P<S)}function M(){if(u){var L=d.unstable_now();P=L;var I=!0;try{e:{b=!1,U&&(U=!1,g(p),p=-1),y=!0;var H=O;try{t:{for(a(L),D=l(C);D!==null&&!(D.expirationTime>L&&v());){var Y=D.callback;if(typeof Y=="function"){D.callback=null,O=D.priorityLevel;var B=Y(D.expirationTime<=L);if(L=d.unstable_now(),typeof B=="function"){D.callback=B,a(L),I=!0;break t}D===l(C)&&s(C),a(L)}else s(C);D=l(C)}if(D!==null)I=!0;else{var Z=l(m);Z!==null&&ee(r,Z.startTime-L),I=!1}}break e}finally{D=null,O=H,y=!1}I=void 0}}finally{I?N():u=!1}}}var N;if(typeof h=="function")N=function(){h(M)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,z=k.port2;k.port1.onmessage=M,N=function(){z.postMessage(null)}}else N=function(){A(M,0)};function V(){u||(u=!0,N())}function ee(L,I){p=A(function(){L(d.unstable_now())},I)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(L){L.callback=null},d.unstable_continueExecution=function(){b||y||(b=!0,V())},d.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<L?Math.floor(1e3/L):5},d.unstable_getCurrentPriorityLevel=function(){return O},d.unstable_getFirstCallbackNode=function(){return l(C)},d.unstable_next=function(L){switch(O){case 1:case 2:case 3:var I=3;break;default:I=O}var H=O;O=I;try{return L()}finally{O=H}},d.unstable_pauseExecution=function(){},d.unstable_requestPaint=function(){},d.unstable_runWithPriority=function(L,I){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var H=O;O=L;try{return I()}finally{O=H}},d.unstable_scheduleCallback=function(L,I,H){var Y=d.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?Y+H:Y):H=Y,L){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=H+B,L={id:x++,callback:I,priorityLevel:L,startTime:H,expirationTime:B,sortIndex:-1},H>Y?(L.sortIndex=H,c(m,L),l(C)===null&&L===l(m)&&(U?(g(p),p=-1):U=!0,ee(r,H-Y))):(L.sortIndex=B,c(C,L),b||y||(b=!0,V())),L},d.unstable_shouldYield=v,d.unstable_wrapCallback=function(L){var I=O;return function(){var H=O;O=I;try{return L.apply(this,arguments)}finally{O=H}}}}(Ru)),Ru}var Ph;function V_(){return Ph||(Ph=1,wu.exports=Y_()),wu.exports}var Tu={exports:{}},St={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nh;function Q_(){if(Nh)return St;Nh=1;var d=Fu();function c(C){var m="https://react.dev/errors/"+C;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+C+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var s={d:{f:l,r:function(){throw Error(c(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},_=Symbol.for("react.portal");function T(C,m,x){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_,key:D==null?null:""+D,children:C,containerInfo:m,implementation:x}}var w=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function R(C,m){if(C==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return St.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,St.createPortal=function(C,m){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(c(299));return T(C,m,null,x)},St.flushSync=function(C){var m=w.T,x=s.p;try{if(w.T=null,s.p=2,C)return C()}finally{w.T=m,s.p=x,s.d.f()}},St.preconnect=function(C,m){typeof C=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(C,m))},St.prefetchDNS=function(C){typeof C=="string"&&s.d.D(C)},St.preinit=function(C,m){if(typeof C=="string"&&m&&typeof m.as=="string"){var x=m.as,D=R(x,m.crossOrigin),O=typeof m.integrity=="string"?m.integrity:void 0,y=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;x==="style"?s.d.S(C,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:D,integrity:O,fetchPriority:y}):x==="script"&&s.d.X(C,{crossOrigin:D,integrity:O,fetchPriority:y,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},St.preinitModule=function(C,m){if(typeof C=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var x=R(m.as,m.crossOrigin);s.d.M(C,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(C)},St.preload=function(C,m){if(typeof C=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var x=m.as,D=R(x,m.crossOrigin);s.d.L(C,x,{crossOrigin:D,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},St.preloadModule=function(C,m){if(typeof C=="string")if(m){var x=R(m.as,m.crossOrigin);s.d.m(C,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(C)},St.requestFormReset=function(C){s.d.r(C)},St.unstable_batchedUpdates=function(C,m){return C(m)},St.useFormState=function(C,m,x){return w.H.useFormState(C,m,x)},St.useFormStatus=function(){return w.H.useHostTransitionStatus()},St.version="19.0.0",St}var kh;function F_(){if(kh)return Tu.exports;kh=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(c){console.error(c)}}return d(),Tu.exports=Q_(),Tu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jh;function K_(){if(jh)return ys;jh=1;var d=V_(),c=Fu(),l=F_();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function _(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}var T=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),y=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),a=Symbol.for("react.offscreen"),r=Symbol.for("react.memo_cache_sentinel"),u=Symbol.iterator;function p(e){return e===null||typeof e!="object"?null:(e=u&&e[u]||e["@@iterator"],typeof e=="function"?e:null)}var S=Symbol.for("react.client.reference");function P(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===S?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case C:return"Fragment";case R:return"Portal";case x:return"Profiler";case m:return"StrictMode";case U:return"Suspense";case A:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case y:return(e.displayName||"Context")+".Provider";case O:return(e._context.displayName||"Context")+".Consumer";case b:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case g:return t=e.displayName||null,t!==null?t:P(e.type)||"Memo";case h:t=e._payload,e=e._init;try{return P(e(t))}catch{}}return null}var v=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=Object.assign,N,k;function z(e){if(N===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||"",k=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+N+e+k}var V=!1;function ee(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(J){var X=J}Reflect.construct(e,[],ie)}else{try{ie.call()}catch(J){X=J}e.call(ie.prototype)}}else{try{throw Error()}catch(J){X=J}(ie=e())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(J){if(J&&X&&typeof J.stack=="string")return[J.stack,X.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=i.DetermineComponentFrameRoot(),E=f[0],j=f[1];if(E&&j){var q=E.split(`
`),Q=j.split(`
`);for(o=i=0;i<q.length&&!q[i].includes("DetermineComponentFrameRoot");)i++;for(;o<Q.length&&!Q[o].includes("DetermineComponentFrameRoot");)o++;if(i===q.length||o===Q.length)for(i=q.length-1,o=Q.length-1;1<=i&&0<=o&&q[i]!==Q[o];)o--;for(;1<=i&&0<=o;i--,o--)if(q[i]!==Q[o]){if(i!==1||o!==1)do if(i--,o--,0>o||q[i]!==Q[o]){var W=`
`+q[i].replace(" at new "," at ");return e.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",e.displayName)),W}while(1<=i&&0<=o);break}}}finally{V=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?z(n):""}function L(e){switch(e.tag){case 26:case 27:case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 15:return e=ee(e.type,!1),e;case 11:return e=ee(e.type.render,!1),e;case 1:return e=ee(e.type,!0),e;default:return""}}function I(e){try{var t="";do t+=L(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function H(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Y(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function B(e){if(H(e)!==e)throw Error(s(188))}function Z(e){var t=e.alternate;if(!t){if(t=H(e),t===null)throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var o=n.return;if(o===null)break;var f=o.alternate;if(f===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===f.child){for(f=o.child;f;){if(f===n)return B(o),e;if(f===i)return B(o),t;f=f.sibling}throw Error(s(188))}if(n.return!==i.return)n=o,i=f;else{for(var E=!1,j=o.child;j;){if(j===n){E=!0,n=o,i=f;break}if(j===i){E=!0,i=o,n=f;break}j=j.sibling}if(!E){for(j=f.child;j;){if(j===n){E=!0,n=f,i=o;break}if(j===i){E=!0,i=f,n=o;break}j=j.sibling}if(!E)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(n.tag!==3)throw Error(s(188));return n.stateNode.current===n?e:t}function ae(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=ae(e),t!==null)return t;e=e.sibling}return null}var le=Array.isArray,re=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},ve=[],Ze=-1;function Ee(e){return{current:e}}function Ue(e){0>Ze||(e.current=ve[Ze],ve[Ze]=null,Ze--)}function Ne(e,t){Ze++,ve[Ze]=e.current,e.current=t}var ct=Ee(null),Xi=Ee(null),ln=Ee(null),ei=Ee(null);function un(e,t){switch(Ne(ln,t),Ne(Xi,e),Ne(ct,null),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?ih(t):0;break;default:if(e=e===8?t.parentNode:t,t=e.tagName,e=e.namespaceURI)e=ih(e),t=rh(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Ue(ct),Ne(ct,t)}function ti(){Ue(ct),Ue(Xi),Ue(ln)}function Or(e){e.memoizedState!==null&&Ne(ei,e);var t=ct.current,n=rh(t,e.type);t!==n&&(Ne(Xi,e),Ne(ct,n))}function Yt(e){Xi.current===e&&(Ue(ct),Ue(Xi)),ei.current===e&&(Ue(ei),ps._currentValue=ge)}var Mr=Object.prototype.hasOwnProperty,xr=d.unstable_scheduleCallback,Lr=d.unstable_cancelCallback,Ar=d.unstable_shouldYield,ba=d.unstable_requestPaint,Ot=d.unstable_now,Sa=d.unstable_getCurrentPriorityLevel,wa=d.unstable_ImmediatePriority,Pr=d.unstable_UserBlockingPriority,zn=d.unstable_NormalPriority,Us=d.unstable_LowPriority,bi=d.unstable_IdlePriority,Ra=d.log,Ta=d.unstable_setDisableYieldValue,Si=null,yt=null;function qn(e){if(yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(Si,e,void 0,(e.current.flags&128)===128)}catch{}}function In(e){if(typeof Ra=="function"&&Ta(e),yt&&typeof yt.setStrictMode=="function")try{yt.setStrictMode(Si,e)}catch{}}var at=Math.clz32?Math.clz32:qs,Zi=Math.log,zs=Math.LN2;function qs(e){return e>>>=0,e===0?32:31-(Zi(e)/zs|0)|0}var dn=128,Hn=4194304;function fn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function $i(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,o=e.suspendedLanes,f=e.pingedLanes,E=e.warmLanes;e=e.finishedLanes!==0;var j=n&134217727;return j!==0?(n=j&~o,n!==0?i=fn(n):(f&=j,f!==0?i=fn(f):e||(E=j&~E,E!==0&&(i=fn(E))))):(j=n&~o,j!==0?i=fn(j):f!==0?i=fn(f):e||(E=n&~E,E!==0&&(i=fn(E)))),i===0?0:t!==0&&t!==i&&!(t&o)&&(o=i&-i,E=t&-t,o>=E||o===32&&(E&4194176)!==0)?t:i}function We(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Gn(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Is(){var e=dn;return dn<<=1,!(dn&4194176)&&(dn=128),e}function Ji(){var e=Hn;return Hn<<=1,!(Hn&62914560)&&(Hn=4194304),e}function Wi(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Yn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function wi(e,t,n,i,o,f){var E=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var j=e.entanglements,q=e.expirationTimes,Q=e.hiddenUpdates;for(n=E&~n;0<n;){var W=31-at(n),ie=1<<W;j[W]=0,q[W]=-1;var X=Q[W];if(X!==null)for(Q[W]=null,W=0;W<X.length;W++){var J=X[W];J!==null&&(J.lane&=-536870913)}n&=~ie}i!==0&&Nr(e,i,0),f!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=f&~(E&~t))}function Nr(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-at(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194218}function Vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-at(n),o=1<<i;o&t|e[i]&t&&(e[i]|=t),n&=~o}}function kr(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function Qt(){var e=re.p;return e!==0?e:(e=window.event,e===void 0?32:wh(e.type))}function Ri(e,t){var n=re.p;try{return re.p=e,t()}finally{re.p=n}}var Mt=Math.random().toString(36).slice(2),Qe="__reactFiber$"+Mt,lt="__reactProps$"+Mt,wt="__reactContainer$"+Mt,jr="__reactEvents$"+Mt,Hs="__reactListeners$"+Mt,Gs="__reactHandles$"+Mt,er="__reactResources$"+Mt,tr="__reactMarker$"+Mt;function Br(e){delete e[Qe],delete e[lt],delete e[jr],delete e[Hs],delete e[Gs]}function Vn(e){var t=e[Qe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[wt]||n[Qe]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=oh(e);e!==null;){if(n=e[Qe])return n;e=oh(e)}return t}e=n,n=e.parentNode}return null}function ut(e){if(e=e[Qe]||e[wt]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Ft(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function pn(e){var t=e[er];return t||(t=e[er]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ne(e){e[tr]=!0}var se=new Set,oe={};function Se(e,t){fe(e,t),fe(e+"Capture",t)}function fe(e,t){for(oe[e]=t,e=0;e<t.length;e++)se.add(t[e])}var Te=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xe={},ye={};function He(e){return Mr.call(ye,e)?!0:Mr.call(xe,e)?!1:pe.test(e)?ye[e]=!0:(xe[e]=!0,!1)}function xt(e,t,n){if(He(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function kt(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Rt(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}function ht(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ca(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ea(e){var t=Ca(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,f=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(E){i=""+E,f.call(this,E)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(E){i=""+E},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ti(e){e._valueTracker||(e._valueTracker=Ea(e))}function Ys(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Ca(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Qn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var gc=/[\n"\\]/g;function Kt(e){return e.replace(gc,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function vc(e,t,n,i,o,f,E,j){e.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.type=E:e.removeAttribute("type"),t!=null?E==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ht(t)):e.value!==""+ht(t)&&(e.value=""+ht(t)):E!=="submit"&&E!=="reset"||e.removeAttribute("value"),t!=null?_c(e,E,ht(t)):n!=null?_c(e,E,ht(n)):i!=null&&e.removeAttribute("value"),o==null&&f!=null&&(e.defaultChecked=!!f),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?e.name=""+ht(j):e.removeAttribute("name")}function od(e,t,n,i,o,f,E,j){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||n!=null){if(!(f!=="submit"&&f!=="reset"||t!=null))return;n=n!=null?""+ht(n):"",t=t!=null?""+ht(t):n,j||t===e.value||(e.value=t),e.defaultValue=t}i=i??o,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=j?e.checked:!!i,e.defaultChecked=!!i,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(e.name=E)}function _c(e,t,n){t==="number"&&Qn(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Ur(e,t,n,i){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ht(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function cd(e,t,n){if(t!=null&&(t=""+ht(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+ht(n):""}function ld(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(s(92));if(le(i)){if(1<i.length)throw Error(s(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=ht(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function zr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Bg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ud(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||Bg.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function dd(e,t,n){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var o in t)i=t[o],t.hasOwnProperty(o)&&n[o]!==i&&ud(e,o,i)}else for(var f in t)t.hasOwnProperty(f)&&ud(e,f,t[f])}function yc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ug=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vs(e){return zg.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var bc=null;function Sc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var qr=null,Ir=null;function fd(e){var t=ut(e);if(t&&(e=t.stateNode)){var n=e[lt]||null;e:switch(e=t.stateNode,t.type){case"input":if(vc(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Kt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=i[lt]||null;if(!o)throw Error(s(90));vc(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&Ys(i)}break e;case"textarea":cd(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Ur(e,!!n.multiple,t,!1)}}}var wc=!1;function pd(e,t,n){if(wc)return e(t,n);wc=!0;try{var i=e(t);return i}finally{if(wc=!1,(qr!==null||Ir!==null)&&(Mo(),qr&&(t=qr,e=Ir,Ir=qr=null,fd(t),e)))for(t=0;t<e.length;t++)fd(e[t])}}function Da(e,t){var n=e.stateNode;if(n===null)return null;var i=n[lt]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(s(231,t,typeof n));return n}var Rc=!1;if(Te)try{var Oa={};Object.defineProperty(Oa,"passive",{get:function(){Rc=!0}}),window.addEventListener("test",Oa,Oa),window.removeEventListener("test",Oa,Oa)}catch{Rc=!1}var Ci=null,Tc=null,Qs=null;function hd(){if(Qs)return Qs;var e,t=Tc,n=t.length,i,o="value"in Ci?Ci.value:Ci.textContent,f=o.length;for(e=0;e<n&&t[e]===o[e];e++);var E=n-e;for(i=1;i<=E&&t[n-i]===o[f-i];i++);return Qs=o.slice(e,1<i?1-i:void 0)}function Fs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ks(){return!0}function md(){return!1}function Lt(e){function t(n,i,o,f,E){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=f,this.target=E,this.currentTarget=null;for(var j in e)e.hasOwnProperty(j)&&(n=e[j],this[j]=n?n(f):f[j]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ks:md,this.isPropagationStopped=md,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ks)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ks)},persist:function(){},isPersistent:Ks}),t}var nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xs=Lt(nr),Ma=M({},nr,{view:0,detail:0}),qg=Lt(Ma),Cc,Ec,xa,Zs=M({},Ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xa&&(xa&&e.type==="mousemove"?(Cc=e.screenX-xa.screenX,Ec=e.screenY-xa.screenY):Ec=Cc=0,xa=e),Cc)},movementY:function(e){return"movementY"in e?e.movementY:Ec}}),gd=Lt(Zs),Ig=M({},Zs,{dataTransfer:0}),Hg=Lt(Ig),Gg=M({},Ma,{relatedTarget:0}),Dc=Lt(Gg),Yg=M({},nr,{animationName:0,elapsedTime:0,pseudoElement:0}),Vg=Lt(Yg),Qg=M({},nr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fg=Lt(Qg),Kg=M({},nr,{data:0}),vd=Lt(Kg),Xg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$g={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$g[e])?!!t[e]:!1}function Oc(){return Jg}var Wg=M({},Ma,{key:function(e){if(e.key){var t=Xg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Fs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oc,charCode:function(e){return e.type==="keypress"?Fs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ev=Lt(Wg),tv=M({},Zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_d=Lt(tv),nv=M({},Ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oc}),iv=Lt(nv),rv=M({},nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),av=Lt(rv),sv=M({},Zs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ov=Lt(sv),cv=M({},nr,{newState:0,oldState:0}),lv=Lt(cv),uv=[9,13,27,32],Mc=Te&&"CompositionEvent"in window,La=null;Te&&"documentMode"in document&&(La=document.documentMode);var dv=Te&&"TextEvent"in window&&!La,yd=Te&&(!Mc||La&&8<La&&11>=La),bd=" ",Sd=!1;function wd(e,t){switch(e){case"keyup":return uv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hr=!1;function fv(e,t){switch(e){case"compositionend":return Rd(t);case"keypress":return t.which!==32?null:(Sd=!0,bd);case"textInput":return e=t.data,e===bd&&Sd?null:e;default:return null}}function pv(e,t){if(Hr)return e==="compositionend"||!Mc&&wd(e,t)?(e=hd(),Qs=Tc=Ci=null,Hr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yd&&t.locale!=="ko"?null:t.data;default:return null}}var hv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Td(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!hv[e.type]:t==="textarea"}function Cd(e,t,n,i){qr?Ir?Ir.push(i):Ir=[i]:qr=i,t=No(t,"onChange"),0<t.length&&(n=new Xs("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Aa=null,Pa=null;function mv(e){Jp(e,0)}function $s(e){var t=Ft(e);if(Ys(t))return e}function Ed(e,t){if(e==="change")return t}var Dd=!1;if(Te){var xc;if(Te){var Lc="oninput"in document;if(!Lc){var Od=document.createElement("div");Od.setAttribute("oninput","return;"),Lc=typeof Od.oninput=="function"}xc=Lc}else xc=!1;Dd=xc&&(!document.documentMode||9<document.documentMode)}function Md(){Aa&&(Aa.detachEvent("onpropertychange",xd),Pa=Aa=null)}function xd(e){if(e.propertyName==="value"&&$s(Pa)){var t=[];Cd(t,Pa,e,Sc(e)),pd(mv,t)}}function gv(e,t,n){e==="focusin"?(Md(),Aa=t,Pa=n,Aa.attachEvent("onpropertychange",xd)):e==="focusout"&&Md()}function vv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $s(Pa)}function _v(e,t){if(e==="click")return $s(t)}function yv(e,t){if(e==="input"||e==="change")return $s(t)}function bv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jt=typeof Object.is=="function"?Object.is:bv;function Na(e,t){if(jt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!Mr.call(t,o)||!jt(e[o],t[o]))return!1}return!0}function Ld(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ad(e,t){var n=Ld(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ld(n)}}function Pd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Pd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Nd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Qn(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Qn(e.document)}return t}function Ac(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Sv(e,t){var n=Nd(t);t=e.focusedElem;var i=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&Pd(t.ownerDocument.documentElement,t)){if(i!==null&&Ac(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var o=t.textContent.length,f=Math.min(i.start,o);i=i.end===void 0?f:Math.min(i.end,o),!n.extend&&f>i&&(o=i,i=f,f=o),o=Ad(t,f);var E=Ad(t,i);o&&E&&(n.rangeCount!==1||n.anchorNode!==o.node||n.anchorOffset!==o.offset||n.focusNode!==E.node||n.focusOffset!==E.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),n.removeAllRanges(),f>i?(n.addRange(e),n.extend(E.node,E.offset)):(e.setEnd(E.node,E.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var wv=Te&&"documentMode"in document&&11>=document.documentMode,Gr=null,Pc=null,ka=null,Nc=!1;function kd(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Nc||Gr==null||Gr!==Qn(i)||(i=Gr,"selectionStart"in i&&Ac(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ka&&Na(ka,i)||(ka=i,i=No(Pc,"onSelect"),0<i.length&&(t=new Xs("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Gr)))}function ir(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Yr={animationend:ir("Animation","AnimationEnd"),animationiteration:ir("Animation","AnimationIteration"),animationstart:ir("Animation","AnimationStart"),transitionrun:ir("Transition","TransitionRun"),transitionstart:ir("Transition","TransitionStart"),transitioncancel:ir("Transition","TransitionCancel"),transitionend:ir("Transition","TransitionEnd")},kc={},jd={};Te&&(jd=document.createElement("div").style,"AnimationEvent"in window||(delete Yr.animationend.animation,delete Yr.animationiteration.animation,delete Yr.animationstart.animation),"TransitionEvent"in window||delete Yr.transitionend.transition);function rr(e){if(kc[e])return kc[e];if(!Yr[e])return e;var t=Yr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in jd)return kc[e]=t[n];return e}var Bd=rr("animationend"),Ud=rr("animationiteration"),zd=rr("animationstart"),Rv=rr("transitionrun"),Tv=rr("transitionstart"),Cv=rr("transitioncancel"),qd=rr("transitionend"),Id=new Map,Hd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function hn(e,t){Id.set(e,t),Se(t,[e])}var Xt=[],Vr=0,jc=0;function Js(){for(var e=Vr,t=jc=Vr=0;t<e;){var n=Xt[t];Xt[t++]=null;var i=Xt[t];Xt[t++]=null;var o=Xt[t];Xt[t++]=null;var f=Xt[t];if(Xt[t++]=null,i!==null&&o!==null){var E=i.pending;E===null?o.next=o:(o.next=E.next,E.next=o),i.pending=o}f!==0&&Gd(n,o,f)}}function Ws(e,t,n,i){Xt[Vr++]=e,Xt[Vr++]=t,Xt[Vr++]=n,Xt[Vr++]=i,jc|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Bc(e,t,n,i){return Ws(e,t,n,i),eo(e)}function Ei(e,t){return Ws(e,null,null,t),eo(e)}function Gd(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var o=!1,f=e.return;f!==null;)f.childLanes|=n,i=f.alternate,i!==null&&(i.childLanes|=n),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(o=!0)),e=f,f=f.return;o&&t!==null&&e.tag===3&&(f=e.stateNode,o=31-at(n),f=f.hiddenUpdates,e=f[o],e===null?f[o]=[t]:e.push(t),t.lane=n|536870912)}function eo(e){if(50<ss)throw ss=0,Gl=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Qr={},Yd=new WeakMap;function Zt(e,t){if(typeof e=="object"&&e!==null){var n=Yd.get(e);return n!==void 0?n:(t={value:e,source:t,stack:I(t)},Yd.set(e,t),t)}return{value:e,source:t,stack:I(t)}}var Fr=[],Kr=0,to=null,no=0,$t=[],Jt=0,ar=null,ni=1,ii="";function sr(e,t){Fr[Kr++]=no,Fr[Kr++]=to,to=e,no=t}function Vd(e,t,n){$t[Jt++]=ni,$t[Jt++]=ii,$t[Jt++]=ar,ar=e;var i=ni;e=ii;var o=32-at(i)-1;i&=~(1<<o),n+=1;var f=32-at(t)+o;if(30<f){var E=o-o%5;f=(i&(1<<E)-1).toString(32),i>>=E,o-=E,ni=1<<32-at(t)+o|n<<o|i,ii=f+e}else ni=1<<f|n<<o|i,ii=e}function Uc(e){e.return!==null&&(sr(e,1),Vd(e,1,0))}function zc(e){for(;e===to;)to=Fr[--Kr],Fr[Kr]=null,no=Fr[--Kr],Fr[Kr]=null;for(;e===ar;)ar=$t[--Jt],$t[Jt]=null,ii=$t[--Jt],$t[Jt]=null,ni=$t[--Jt],$t[Jt]=null}var Tt=null,mt=null,Le=!1,mn=null,Fn=!1,qc=Error(s(519));function or(e){var t=Error(s(418,""));throw Ua(Zt(t,e)),qc}function Qd(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Qe]=e,t[lt]=i,n){case"dialog":De("cancel",t),De("close",t);break;case"iframe":case"object":case"embed":De("load",t);break;case"video":case"audio":for(n=0;n<cs.length;n++)De(cs[n],t);break;case"source":De("error",t);break;case"img":case"image":case"link":De("error",t),De("load",t);break;case"details":De("toggle",t);break;case"input":De("invalid",t),od(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Ti(t);break;case"select":De("invalid",t);break;case"textarea":De("invalid",t),ld(t,i.value,i.defaultValue,i.children),Ti(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||nh(t.textContent,n)?(i.popover!=null&&(De("beforetoggle",t),De("toggle",t)),i.onScroll!=null&&De("scroll",t),i.onScrollEnd!=null&&De("scrollend",t),i.onClick!=null&&(t.onclick=ko),t=!0):t=!1,t||or(e)}function Fd(e){for(Tt=e.return;Tt;)switch(Tt.tag){case 3:case 27:Fn=!0;return;case 5:case 13:Fn=!1;return;default:Tt=Tt.return}}function ja(e){if(e!==Tt)return!1;if(!Le)return Fd(e),Le=!0,!1;var t=!1,n;if((n=e.tag!==3&&e.tag!==27)&&((n=e.tag===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||su(e.type,e.memoizedProps)),n=!n),n&&(t=!0),t&&mt&&or(e),Fd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){mt=vn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}mt=null}}else mt=Tt?vn(e.stateNode.nextSibling):null;return!0}function Ba(){mt=Tt=null,Le=!1}function Ua(e){mn===null?mn=[e]:mn.push(e)}var za=Error(s(460)),Kd=Error(s(474)),Ic={then:function(){}};function Xd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function io(){}function Zd(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(io,io),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===za?Error(s(483)):e;default:if(typeof t.status=="string")t.then(io,io);else{if(e=ze,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=i}},function(i){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===za?Error(s(483)):e}throw qa=t,za}}var qa=null;function $d(){if(qa===null)throw Error(s(459));var e=qa;return qa=null,e}var Xr=null,Ia=0;function ro(e){var t=Ia;return Ia+=1,Xr===null&&(Xr=[]),Zd(Xr,e,t)}function Ha(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ao(e,t){throw t.$$typeof===T?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Jd(e){var t=e._init;return t(e._payload)}function Wd(e){function t(F,G){if(e){var K=F.deletions;K===null?(F.deletions=[G],F.flags|=16):K.push(G)}}function n(F,G){if(!e)return null;for(;G!==null;)t(F,G),G=G.sibling;return null}function i(F){for(var G=new Map;F!==null;)F.key!==null?G.set(F.key,F):G.set(F.index,F),F=F.sibling;return G}function o(F,G){return F=Ui(F,G),F.index=0,F.sibling=null,F}function f(F,G,K){return F.index=K,e?(K=F.alternate,K!==null?(K=K.index,K<G?(F.flags|=33554434,G):K):(F.flags|=33554434,G)):(F.flags|=1048576,G)}function E(F){return e&&F.alternate===null&&(F.flags|=33554434),F}function j(F,G,K,te){return G===null||G.tag!==6?(G=kl(K,F.mode,te),G.return=F,G):(G=o(G,K),G.return=F,G)}function q(F,G,K,te){var ce=K.type;return ce===C?W(F,G,K.props.children,te,K.key):G!==null&&(G.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===h&&Jd(ce)===G.type)?(G=o(G,K.props),Ha(G,K),G.return=F,G):(G=To(K.type,K.key,K.props,null,F.mode,te),Ha(G,K),G.return=F,G)}function Q(F,G,K,te){return G===null||G.tag!==4||G.stateNode.containerInfo!==K.containerInfo||G.stateNode.implementation!==K.implementation?(G=jl(K,F.mode,te),G.return=F,G):(G=o(G,K.children||[]),G.return=F,G)}function W(F,G,K,te,ce){return G===null||G.tag!==7?(G=vr(K,F.mode,te,ce),G.return=F,G):(G=o(G,K),G.return=F,G)}function ie(F,G,K){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=kl(""+G,F.mode,K),G.return=F,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case w:return K=To(G.type,G.key,G.props,null,F.mode,K),Ha(K,G),K.return=F,K;case R:return G=jl(G,F.mode,K),G.return=F,G;case h:var te=G._init;return G=te(G._payload),ie(F,G,K)}if(le(G)||p(G))return G=vr(G,F.mode,K,null),G.return=F,G;if(typeof G.then=="function")return ie(F,ro(G),K);if(G.$$typeof===y)return ie(F,So(F,G),K);ao(F,G)}return null}function X(F,G,K,te){var ce=G!==null?G.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return ce!==null?null:j(F,G,""+K,te);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case w:return K.key===ce?q(F,G,K,te):null;case R:return K.key===ce?Q(F,G,K,te):null;case h:return ce=K._init,K=ce(K._payload),X(F,G,K,te)}if(le(K)||p(K))return ce!==null?null:W(F,G,K,te,null);if(typeof K.then=="function")return X(F,G,ro(K),te);if(K.$$typeof===y)return X(F,G,So(F,K),te);ao(F,K)}return null}function J(F,G,K,te,ce){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return F=F.get(K)||null,j(G,F,""+te,ce);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case w:return F=F.get(te.key===null?K:te.key)||null,q(G,F,te,ce);case R:return F=F.get(te.key===null?K:te.key)||null,Q(G,F,te,ce);case h:var Re=te._init;return te=Re(te._payload),J(F,G,K,te,ce)}if(le(te)||p(te))return F=F.get(K)||null,W(G,F,te,ce,null);if(typeof te.then=="function")return J(F,G,K,ro(te),ce);if(te.$$typeof===y)return J(F,G,K,So(G,te),ce);ao(G,te)}return null}function ue(F,G,K,te){for(var ce=null,Re=null,de=G,me=G=0,pt=null;de!==null&&me<K.length;me++){de.index>me?(pt=de,de=null):pt=de.sibling;var Ae=X(F,de,K[me],te);if(Ae===null){de===null&&(de=pt);break}e&&de&&Ae.alternate===null&&t(F,de),G=f(Ae,G,me),Re===null?ce=Ae:Re.sibling=Ae,Re=Ae,de=pt}if(me===K.length)return n(F,de),Le&&sr(F,me),ce;if(de===null){for(;me<K.length;me++)de=ie(F,K[me],te),de!==null&&(G=f(de,G,me),Re===null?ce=de:Re.sibling=de,Re=de);return Le&&sr(F,me),ce}for(de=i(de);me<K.length;me++)pt=J(de,F,me,K[me],te),pt!==null&&(e&&pt.alternate!==null&&de.delete(pt.key===null?me:pt.key),G=f(pt,G,me),Re===null?ce=pt:Re.sibling=pt,Re=pt);return e&&de.forEach(function(Vi){return t(F,Vi)}),Le&&sr(F,me),ce}function _e(F,G,K,te){if(K==null)throw Error(s(151));for(var ce=null,Re=null,de=G,me=G=0,pt=null,Ae=K.next();de!==null&&!Ae.done;me++,Ae=K.next()){de.index>me?(pt=de,de=null):pt=de.sibling;var Vi=X(F,de,Ae.value,te);if(Vi===null){de===null&&(de=pt);break}e&&de&&Vi.alternate===null&&t(F,de),G=f(Vi,G,me),Re===null?ce=Vi:Re.sibling=Vi,Re=Vi,de=pt}if(Ae.done)return n(F,de),Le&&sr(F,me),ce;if(de===null){for(;!Ae.done;me++,Ae=K.next())Ae=ie(F,Ae.value,te),Ae!==null&&(G=f(Ae,G,me),Re===null?ce=Ae:Re.sibling=Ae,Re=Ae);return Le&&sr(F,me),ce}for(de=i(de);!Ae.done;me++,Ae=K.next())Ae=J(de,F,me,Ae.value,te),Ae!==null&&(e&&Ae.alternate!==null&&de.delete(Ae.key===null?me:Ae.key),G=f(Ae,G,me),Re===null?ce=Ae:Re.sibling=Ae,Re=Ae);return e&&de.forEach(function(z_){return t(F,z_)}),Le&&sr(F,me),ce}function Xe(F,G,K,te){if(typeof K=="object"&&K!==null&&K.type===C&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case w:e:{for(var ce=K.key;G!==null;){if(G.key===ce){if(ce=K.type,ce===C){if(G.tag===7){n(F,G.sibling),te=o(G,K.props.children),te.return=F,F=te;break e}}else if(G.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===h&&Jd(ce)===G.type){n(F,G.sibling),te=o(G,K.props),Ha(te,K),te.return=F,F=te;break e}n(F,G);break}else t(F,G);G=G.sibling}K.type===C?(te=vr(K.props.children,F.mode,te,K.key),te.return=F,F=te):(te=To(K.type,K.key,K.props,null,F.mode,te),Ha(te,K),te.return=F,F=te)}return E(F);case R:e:{for(ce=K.key;G!==null;){if(G.key===ce)if(G.tag===4&&G.stateNode.containerInfo===K.containerInfo&&G.stateNode.implementation===K.implementation){n(F,G.sibling),te=o(G,K.children||[]),te.return=F,F=te;break e}else{n(F,G);break}else t(F,G);G=G.sibling}te=jl(K,F.mode,te),te.return=F,F=te}return E(F);case h:return ce=K._init,K=ce(K._payload),Xe(F,G,K,te)}if(le(K))return ue(F,G,K,te);if(p(K)){if(ce=p(K),typeof ce!="function")throw Error(s(150));return K=ce.call(K),_e(F,G,K,te)}if(typeof K.then=="function")return Xe(F,G,ro(K),te);if(K.$$typeof===y)return Xe(F,G,So(F,K),te);ao(F,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,G!==null&&G.tag===6?(n(F,G.sibling),te=o(G,K),te.return=F,F=te):(n(F,G),te=kl(K,F.mode,te),te.return=F,F=te),E(F)):n(F,G)}return function(F,G,K,te){try{Ia=0;var ce=Xe(F,G,K,te);return Xr=null,ce}catch(de){if(de===za)throw de;var Re=nn(29,de,null,F.mode);return Re.lanes=te,Re.return=F,Re}finally{}}}var cr=Wd(!0),ef=Wd(!1),Zr=Ee(null),so=Ee(0);function tf(e,t){e=hi,Ne(so,e),Ne(Zr,t),hi=e|t.baseLanes}function Hc(){Ne(so,hi),Ne(Zr,Zr.current)}function Gc(){hi=so.current,Ue(Zr),Ue(so)}var Wt=Ee(null),Kn=null;function Di(e){var t=e.alternate;Ne(st,st.current&1),Ne(Wt,e),Kn===null&&(t===null||Zr.current!==null||t.memoizedState!==null)&&(Kn=e)}function nf(e){if(e.tag===22){if(Ne(st,st.current),Ne(Wt,e),Kn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Kn=e)}}else Oi()}function Oi(){Ne(st,st.current),Ne(Wt,Wt.current)}function ri(e){Ue(Wt),Kn===e&&(Kn=null),Ue(st)}var st=Ee(0);function oo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ev=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Dv=d.unstable_scheduleCallback,Ov=d.unstable_NormalPriority,ot={$$typeof:y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yc(){return{controller:new Ev,data:new Map,refCount:0}}function Ga(e){e.refCount--,e.refCount===0&&Dv(Ov,function(){e.controller.abort()})}var Ya=null,Vc=0,$r=0,Jr=null;function Mv(e,t){if(Ya===null){var n=Ya=[];Vc=0,$r=$l(),Jr={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Vc++,t.then(rf,rf),t}function rf(){if(--Vc===0&&Ya!==null){Jr!==null&&(Jr.status="fulfilled");var e=Ya;Ya=null,$r=0,Jr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function xv(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(i.status="rejected",i.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),i}var af=v.S;v.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Mv(e,t),af!==null&&af(e,t)};var lr=Ee(null);function Qc(){var e=lr.current;return e!==null?e:ze.pooledCache}function co(e,t){t===null?Ne(lr,lr.current):Ne(lr,t.pool)}function sf(){var e=Qc();return e===null?null:{parent:ot._currentValue,pool:e}}var Mi=0,we=null,ke=null,et=null,lo=!1,Wr=!1,ur=!1,uo=0,Va=0,ea=null,Lv=0;function $e(){throw Error(s(321))}function Fc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!jt(e[n],t[n]))return!1;return!0}function Kc(e,t,n,i,o,f){return Mi=f,we=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,v.H=e===null||e.memoizedState===null?dr:xi,ur=!1,f=n(i,o),ur=!1,Wr&&(f=cf(t,n,i,o)),of(e),f}function of(e){v.H=Xn;var t=ke!==null&&ke.next!==null;if(Mi=0,et=ke=we=null,lo=!1,Va=0,ea=null,t)throw Error(s(300));e===null||dt||(e=e.dependencies,e!==null&&bo(e)&&(dt=!0))}function cf(e,t,n,i){we=e;var o=0;do{if(Wr&&(ea=null),Va=0,Wr=!1,25<=o)throw Error(s(301));if(o+=1,et=ke=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}v.H=fr,f=t(n,i)}while(Wr);return f}function Av(){var e=v.H,t=e.useState()[0];return t=typeof t.then=="function"?Qa(t):t,e=e.useState()[0],(ke!==null?ke.memoizedState:null)!==e&&(we.flags|=1024),t}function Xc(){var e=uo!==0;return uo=0,e}function Zc(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function $c(e){if(lo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}lo=!1}Mi=0,et=ke=we=null,Wr=!1,Va=uo=0,ea=null}function At(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?we.memoizedState=et=e:et=et.next=e,et}function tt(){if(ke===null){var e=we.alternate;e=e!==null?e.memoizedState:null}else e=ke.next;var t=et===null?we.memoizedState:et.next;if(t!==null)et=t,ke=e;else{if(e===null)throw we.alternate===null?Error(s(467)):Error(s(310));ke=e,e={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},et===null?we.memoizedState=et=e:et=et.next=e}return et}var fo;fo=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Qa(e){var t=Va;return Va+=1,ea===null&&(ea=[]),e=Zd(ea,e,t),t=we,(et===null?t.memoizedState:et.next)===null&&(t=t.alternate,v.H=t===null||t.memoizedState===null?dr:xi),e}function po(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Qa(e);if(e.$$typeof===y)return bt(e)}throw Error(s(438,String(e)))}function Jc(e){var t=null,n=we.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=we.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=fo(),we.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=r;return t.index++,n}function ai(e,t){return typeof t=="function"?t(e):t}function ho(e){var t=tt();return Wc(t,ke,e)}function Wc(e,t,n){var i=e.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=n;var o=e.baseQueue,f=i.pending;if(f!==null){if(o!==null){var E=o.next;o.next=f.next,f.next=E}t.baseQueue=o=f,i.pending=null}if(f=e.baseState,o===null)e.memoizedState=f;else{t=o.next;var j=E=null,q=null,Q=t,W=!1;do{var ie=Q.lane&-536870913;if(ie!==Q.lane?(Me&ie)===ie:(Mi&ie)===ie){var X=Q.revertLane;if(X===0)q!==null&&(q=q.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ie===$r&&(W=!0);else if((Mi&X)===X){Q=Q.next,X===$r&&(W=!0);continue}else ie={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},q===null?(j=q=ie,E=f):q=q.next=ie,we.lanes|=X,zi|=X;ie=Q.action,ur&&n(f,ie),f=Q.hasEagerState?Q.eagerState:n(f,ie)}else X={lane:ie,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},q===null?(j=q=X,E=f):q=q.next=X,we.lanes|=ie,zi|=ie;Q=Q.next}while(Q!==null&&Q!==t);if(q===null?E=f:q.next=j,!jt(f,e.memoizedState)&&(dt=!0,W&&(n=Jr,n!==null)))throw n;e.memoizedState=f,e.baseState=E,e.baseQueue=q,i.lastRenderedState=f}return o===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function el(e){var t=tt(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,o=n.pending,f=t.memoizedState;if(o!==null){n.pending=null;var E=o=o.next;do f=e(f,E.action),E=E.next;while(E!==o);jt(f,t.memoizedState)||(dt=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),n.lastRenderedState=f}return[f,i]}function lf(e,t,n){var i=we,o=tt(),f=Le;if(f){if(n===void 0)throw Error(s(407));n=n()}else n=t();var E=!jt((ke||o).memoizedState,n);if(E&&(o.memoizedState=n,dt=!0),o=o.queue,il(ff.bind(null,i,o,e),[e]),o.getSnapshot!==t||E||et!==null&&et.memoizedState.tag&1){if(i.flags|=2048,ta(9,df.bind(null,i,o,n,t),{destroy:void 0},null),ze===null)throw Error(s(349));f||Mi&60||uf(i,t,n)}return n}function uf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=we.updateQueue,t===null?(t=fo(),we.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function df(e,t,n,i){t.value=n,t.getSnapshot=i,pf(t)&&hf(e)}function ff(e,t,n){return n(function(){pf(t)&&hf(e)})}function pf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!jt(e,n)}catch{return!0}}function hf(e){var t=Ei(e,2);t!==null&&Ct(t,e,2)}function tl(e){var t=At();if(typeof e=="function"){var n=e;if(e=n(),ur){In(!0);try{n()}finally{In(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:e},t}function mf(e,t,n,i){return e.baseState=n,Wc(e,ke,typeof i=="function"?i:ai)}function Pv(e,t,n,i,o){if(vo(e))throw Error(s(485));if(e=t.action,e!==null){var f={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){f.listeners.push(E)}};v.T!==null?n(!0):f.isTransition=!1,i(f),n=t.pending,n===null?(f.next=t.pending=f,gf(t,f)):(f.next=n.next,t.pending=n.next=f)}}function gf(e,t){var n=t.action,i=t.payload,o=e.state;if(t.isTransition){var f=v.T,E={};v.T=E;try{var j=n(o,i),q=v.S;q!==null&&q(E,j),vf(e,t,j)}catch(Q){nl(e,t,Q)}finally{v.T=f}}else try{f=n(o,i),vf(e,t,f)}catch(Q){nl(e,t,Q)}}function vf(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){_f(e,t,i)},function(i){return nl(e,t,i)}):_f(e,t,n)}function _f(e,t,n){t.status="fulfilled",t.value=n,yf(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,gf(e,n)))}function nl(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,yf(t),t=t.next;while(t!==i)}e.action=null}function yf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function bf(e,t){return t}function Sf(e,t){if(Le){var n=ze.formState;if(n!==null){e:{var i=we;if(Le){if(mt){t:{for(var o=mt,f=Fn;o.nodeType!==8;){if(!f){o=null;break t}if(o=vn(o.nextSibling),o===null){o=null;break t}}f=o.data,o=f==="F!"||f==="F"?o:null}if(o){mt=vn(o.nextSibling),i=o.data==="F!";break e}}or(i)}i=!1}i&&(t=n[0])}}return n=At(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bf,lastRenderedState:t},n.queue=i,n=zf.bind(null,we,i),i.dispatch=n,i=tl(!1),f=cl.bind(null,we,!1,i.queue),i=At(),o={state:t,dispatch:null,action:e,pending:null},i.queue=o,n=Pv.bind(null,we,o,f,n),o.dispatch=n,i.memoizedState=e,[t,n,!1]}function wf(e){var t=tt();return Rf(t,ke,e)}function Rf(e,t,n){t=Wc(e,t,bf)[0],e=ho(ai)[0],t=typeof t=="object"&&t!==null&&typeof t.then=="function"?Qa(t):t;var i=tt(),o=i.queue,f=o.dispatch;return n!==i.memoizedState&&(we.flags|=2048,ta(9,Nv.bind(null,o,n),{destroy:void 0},null)),[t,f,e]}function Nv(e,t){e.action=t}function Tf(e){var t=tt(),n=ke;if(n!==null)return Rf(t,n,e);tt(),t=t.memoizedState,n=tt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function ta(e,t,n,i){return e={tag:e,create:t,inst:n,deps:i,next:null},t=we.updateQueue,t===null&&(t=fo(),we.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Cf(){return tt().memoizedState}function mo(e,t,n,i){var o=At();we.flags|=e,o.memoizedState=ta(1|t,n,{destroy:void 0},i===void 0?null:i)}function go(e,t,n,i){var o=tt();i=i===void 0?null:i;var f=o.memoizedState.inst;ke!==null&&i!==null&&Fc(i,ke.memoizedState.deps)?o.memoizedState=ta(t,n,f,i):(we.flags|=e,o.memoizedState=ta(1|t,n,f,i))}function Ef(e,t){mo(8390656,8,e,t)}function il(e,t){go(2048,8,e,t)}function Df(e,t){return go(4,2,e,t)}function Of(e,t){return go(4,4,e,t)}function Mf(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function xf(e,t,n){n=n!=null?n.concat([e]):null,go(4,4,Mf.bind(null,t,e),n)}function rl(){}function Lf(e,t){var n=tt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&Fc(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Af(e,t){var n=tt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&Fc(t,i[1]))return i[0];if(i=e(),ur){In(!0);try{e()}finally{In(!1)}}return n.memoizedState=[i,t],i}function al(e,t,n){return n===void 0||Mi&1073741824?e.memoizedState=t:(e.memoizedState=n,e=Np(),we.lanes|=e,zi|=e,n)}function Pf(e,t,n,i){return jt(n,t)?n:Zr.current!==null?(e=al(e,n,i),jt(e,t)||(dt=!0),e):Mi&42?(e=Np(),we.lanes|=e,zi|=e,t):(dt=!0,e.memoizedState=n)}function Nf(e,t,n,i,o){var f=re.p;re.p=f!==0&&8>f?f:8;var E=v.T,j={};v.T=j,cl(e,!1,t,n);try{var q=o(),Q=v.S;if(Q!==null&&Q(j,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var W=xv(q,i);Fa(e,t,W,qt(e))}else Fa(e,t,i,qt(e))}catch(ie){Fa(e,t,{then:function(){},status:"rejected",reason:ie},qt())}finally{re.p=f,v.T=E}}function kv(){}function sl(e,t,n,i){if(e.tag!==5)throw Error(s(476));var o=kf(e).queue;Nf(e,o,t,ge,n===null?kv:function(){return jf(e),n(i)})}function kf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:ge},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function jf(e){var t=kf(e).next.queue;Fa(e,t,{},qt())}function ol(){return bt(ps)}function Bf(){return tt().memoizedState}function Uf(){return tt().memoizedState}function jv(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=qt();e=Pi(n);var i=Ni(t,e,n);i!==null&&(Ct(i,t,n),Za(i,t,n)),t={cache:Yc()},e.payload=t;return}t=t.return}}function Bv(e,t,n){var i=qt();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},vo(e)?qf(t,n):(n=Bc(e,t,n,i),n!==null&&(Ct(n,e,i),If(n,t,i)))}function zf(e,t,n){var i=qt();Fa(e,t,n,i)}function Fa(e,t,n,i){var o={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(vo(e))qf(t,o);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var E=t.lastRenderedState,j=f(E,n);if(o.hasEagerState=!0,o.eagerState=j,jt(j,E))return Ws(e,t,o,0),ze===null&&Js(),!1}catch{}finally{}if(n=Bc(e,t,o,i),n!==null)return Ct(n,e,i),If(n,t,i),!0}return!1}function cl(e,t,n,i){if(i={lane:2,revertLane:$l(),action:i,hasEagerState:!1,eagerState:null,next:null},vo(e)){if(t)throw Error(s(479))}else t=Bc(e,n,i,2),t!==null&&Ct(t,e,2)}function vo(e){var t=e.alternate;return e===we||t!==null&&t===we}function qf(e,t){Wr=lo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function If(e,t,n){if(n&4194176){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Vt(e,n)}}var Xn={readContext:bt,use:po,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useLayoutEffect:$e,useInsertionEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useSyncExternalStore:$e,useId:$e};Xn.useCacheRefresh=$e,Xn.useMemoCache=$e,Xn.useHostTransitionStatus=$e,Xn.useFormState=$e,Xn.useActionState=$e,Xn.useOptimistic=$e;var dr={readContext:bt,use:po,useCallback:function(e,t){return At().memoizedState=[e,t===void 0?null:t],e},useContext:bt,useEffect:Ef,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,mo(4194308,4,Mf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return mo(4194308,4,e,t)},useInsertionEffect:function(e,t){mo(4,2,e,t)},useMemo:function(e,t){var n=At();t=t===void 0?null:t;var i=e();if(ur){In(!0);try{e()}finally{In(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=At();if(n!==void 0){var o=n(t);if(ur){In(!0);try{n(t)}finally{In(!1)}}}else o=t;return i.memoizedState=i.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},i.queue=e,e=e.dispatch=Bv.bind(null,we,e),[i.memoizedState,e]},useRef:function(e){var t=At();return e={current:e},t.memoizedState=e},useState:function(e){e=tl(e);var t=e.queue,n=zf.bind(null,we,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:rl,useDeferredValue:function(e,t){var n=At();return al(n,e,t)},useTransition:function(){var e=tl(!1);return e=Nf.bind(null,we,e.queue,!0,!1),At().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=we,o=At();if(Le){if(n===void 0)throw Error(s(407));n=n()}else{if(n=t(),ze===null)throw Error(s(349));Me&60||uf(i,t,n)}o.memoizedState=n;var f={value:n,getSnapshot:t};return o.queue=f,Ef(ff.bind(null,i,f,e),[e]),i.flags|=2048,ta(9,df.bind(null,i,f,n,t),{destroy:void 0},null),n},useId:function(){var e=At(),t=ze.identifierPrefix;if(Le){var n=ii,i=ni;n=(i&~(1<<32-at(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=uo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Lv++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return At().memoizedState=jv.bind(null,we)}};dr.useMemoCache=Jc,dr.useHostTransitionStatus=ol,dr.useFormState=Sf,dr.useActionState=Sf,dr.useOptimistic=function(e){var t=At();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=cl.bind(null,we,!0,n),n.dispatch=t,[e,t]};var xi={readContext:bt,use:po,useCallback:Lf,useContext:bt,useEffect:il,useImperativeHandle:xf,useInsertionEffect:Df,useLayoutEffect:Of,useMemo:Af,useReducer:ho,useRef:Cf,useState:function(){return ho(ai)},useDebugValue:rl,useDeferredValue:function(e,t){var n=tt();return Pf(n,ke.memoizedState,e,t)},useTransition:function(){var e=ho(ai)[0],t=tt().memoizedState;return[typeof e=="boolean"?e:Qa(e),t]},useSyncExternalStore:lf,useId:Bf};xi.useCacheRefresh=Uf,xi.useMemoCache=Jc,xi.useHostTransitionStatus=ol,xi.useFormState=wf,xi.useActionState=wf,xi.useOptimistic=function(e,t){var n=tt();return mf(n,ke,e,t)};var fr={readContext:bt,use:po,useCallback:Lf,useContext:bt,useEffect:il,useImperativeHandle:xf,useInsertionEffect:Df,useLayoutEffect:Of,useMemo:Af,useReducer:el,useRef:Cf,useState:function(){return el(ai)},useDebugValue:rl,useDeferredValue:function(e,t){var n=tt();return ke===null?al(n,e,t):Pf(n,ke.memoizedState,e,t)},useTransition:function(){var e=el(ai)[0],t=tt().memoizedState;return[typeof e=="boolean"?e:Qa(e),t]},useSyncExternalStore:lf,useId:Bf};fr.useCacheRefresh=Uf,fr.useMemoCache=Jc,fr.useHostTransitionStatus=ol,fr.useFormState=Tf,fr.useActionState=Tf,fr.useOptimistic=function(e,t){var n=tt();return ke!==null?mf(n,ke,e,t):(n.baseState=e,[e,n.queue.dispatch])};function ll(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:M({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ul={isMounted:function(e){return(e=e._reactInternals)?H(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=qt(),o=Pi(i);o.payload=t,n!=null&&(o.callback=n),t=Ni(e,o,i),t!==null&&(Ct(t,e,i),Za(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=qt(),o=Pi(i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Ni(e,o,i),t!==null&&(Ct(t,e,i),Za(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=qt(),i=Pi(n);i.tag=2,t!=null&&(i.callback=t),t=Ni(e,i,n),t!==null&&(Ct(t,e,n),Za(t,e,n))}};function Hf(e,t,n,i,o,f,E){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,f,E):t.prototype&&t.prototype.isPureReactComponent?!Na(n,i)||!Na(o,f):!0}function Gf(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&ul.enqueueReplaceState(t,t.state,null)}function pr(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=M({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}var _o=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Yf(e){_o(e)}function Vf(e){console.error(e)}function Qf(e){_o(e)}function yo(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Ff(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function dl(e,t,n){return n=Pi(n),n.tag=3,n.payload={element:null},n.callback=function(){yo(e,t)},n}function Kf(e){return e=Pi(e),e.tag=3,e}function Xf(e,t,n,i){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var f=i.value;e.payload=function(){return o(f)},e.callback=function(){Ff(t,n,i)}}var E=n.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(e.callback=function(){Ff(t,n,i),typeof o!="function"&&(qi===null?qi=new Set([this]):qi.add(this));var j=i.stack;this.componentDidCatch(i.value,{componentStack:j!==null?j:""})})}function Uv(e,t,n,i,o){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Xa(t,n,o,!0),n=Wt.current,n!==null){switch(n.tag){case 13:return Kn===null?Ql():n.alternate===null&&Ke===0&&(Ke=3),n.flags&=-257,n.flags|=65536,n.lanes=o,i===Ic?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),Kl(e,i,o)),!1;case 22:return n.flags|=65536,i===Ic?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),Kl(e,i,o)),!1}throw Error(s(435,n.tag))}return Kl(e,i,o),Ql(),!1}if(Le)return t=Wt.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=o,i!==qc&&(e=Error(s(422),{cause:i}),Ua(Zt(e,n)))):(i!==qc&&(t=Error(s(423),{cause:i}),Ua(Zt(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,i=Zt(i,n),o=dl(e.stateNode,i,o),El(e,o),Ke!==4&&(Ke=2)),!1;var f=Error(s(520),{cause:i});if(f=Zt(f,n),rs===null?rs=[f]:rs.push(f),Ke!==4&&(Ke=2),t===null)return!0;i=Zt(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=dl(n.stateNode,i,e),El(n,e),!1;case 1:if(t=n.type,f=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(qi===null||!qi.has(f))))return n.flags|=65536,o&=-o,n.lanes|=o,o=Kf(o),Xf(o,e,n,i),El(n,o),!1}n=n.return}while(n!==null);return!1}var Zf=Error(s(461)),dt=!1;function gt(e,t,n,i){t.child=e===null?ef(t,null,n,i):cr(t,e.child,n,i)}function $f(e,t,n,i,o){n=n.render;var f=t.ref;if("ref"in i){var E={};for(var j in i)j!=="ref"&&(E[j]=i[j])}else E=i;return mr(t),i=Kc(e,t,n,E,f,o),j=Xc(),e!==null&&!dt?(Zc(e,t,o),si(e,t,o)):(Le&&j&&Uc(t),t.flags|=1,gt(e,t,i,o),t.child)}function Jf(e,t,n,i,o){if(e===null){var f=n.type;return typeof f=="function"&&!Nl(f)&&f.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=f,Wf(e,t,f,i,o)):(e=To(n.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!bl(e,o)){var E=f.memoizedProps;if(n=n.compare,n=n!==null?n:Na,n(E,i)&&e.ref===t.ref)return si(e,t,o)}return t.flags|=1,e=Ui(f,i),e.ref=t.ref,e.return=t,t.child=e}function Wf(e,t,n,i,o){if(e!==null){var f=e.memoizedProps;if(Na(f,i)&&e.ref===t.ref)if(dt=!1,t.pendingProps=i=f,bl(e,o))e.flags&131072&&(dt=!0);else return t.lanes=e.lanes,si(e,t,o)}return fl(e,t,n,i,o)}function ep(e,t,n){var i=t.pendingProps,o=i.children,f=(t.stateNode._pendingVisibility&2)!==0,E=e!==null?e.memoizedState:null;if(Ka(e,t),i.mode==="hidden"||f){if(t.flags&128){if(i=E!==null?E.baseLanes|n:n,e!==null){for(o=t.child=e.child,f=0;o!==null;)f=f|o.lanes|o.childLanes,o=o.sibling;t.childLanes=f&~i}else t.childLanes=0,t.child=null;return tp(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&co(t,E!==null?E.cachePool:null),E!==null?tf(t,E):Hc(),nf(t);else return t.lanes=t.childLanes=536870912,tp(e,t,E!==null?E.baseLanes|n:n,n)}else E!==null?(co(t,E.cachePool),tf(t,E),Oi(),t.memoizedState=null):(e!==null&&co(t,null),Hc(),Oi());return gt(e,t,o,n),t.child}function tp(e,t,n,i){var o=Qc();return o=o===null?null:{parent:ot._currentValue,pool:o},t.memoizedState={baseLanes:n,cachePool:o},e!==null&&co(t,null),Hc(),nf(t),e!==null&&Xa(e,t,i,!0),null}function Ka(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=2097664);else{if(typeof n!="function"&&typeof n!="object")throw Error(s(284));(e===null||e.ref!==n)&&(t.flags|=2097664)}}function fl(e,t,n,i,o){return mr(t),n=Kc(e,t,n,i,void 0,o),i=Xc(),e!==null&&!dt?(Zc(e,t,o),si(e,t,o)):(Le&&i&&Uc(t),t.flags|=1,gt(e,t,n,o),t.child)}function np(e,t,n,i,o,f){return mr(t),t.updateQueue=null,n=cf(t,i,n,o),of(e),i=Xc(),e!==null&&!dt?(Zc(e,t,f),si(e,t,f)):(Le&&i&&Uc(t),t.flags|=1,gt(e,t,n,f),t.child)}function ip(e,t,n,i,o){if(mr(t),t.stateNode===null){var f=Qr,E=n.contextType;typeof E=="object"&&E!==null&&(f=bt(E)),f=new n(i,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=ul,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=i,f.state=t.memoizedState,f.refs={},Tl(t),E=n.contextType,f.context=typeof E=="object"&&E!==null?bt(E):Qr,f.state=t.memoizedState,E=n.getDerivedStateFromProps,typeof E=="function"&&(ll(t,n,E,i),f.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(E=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),E!==f.state&&ul.enqueueReplaceState(f,f.state,null),Ja(t,i,f,o),$a(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){f=t.stateNode;var j=t.memoizedProps,q=pr(n,j);f.props=q;var Q=f.context,W=n.contextType;E=Qr,typeof W=="object"&&W!==null&&(E=bt(W));var ie=n.getDerivedStateFromProps;W=typeof ie=="function"||typeof f.getSnapshotBeforeUpdate=="function",j=t.pendingProps!==j,W||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(j||Q!==E)&&Gf(t,f,i,E),Ai=!1;var X=t.memoizedState;f.state=X,Ja(t,i,f,o),$a(),Q=t.memoizedState,j||X!==Q||Ai?(typeof ie=="function"&&(ll(t,n,ie,i),Q=t.memoizedState),(q=Ai||Hf(t,n,q,i,X,Q,E))?(W||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=Q),f.props=i,f.state=Q,f.context=E,i=q):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{f=t.stateNode,Cl(e,t),E=t.memoizedProps,W=pr(n,E),f.props=W,ie=t.pendingProps,X=f.context,Q=n.contextType,q=Qr,typeof Q=="object"&&Q!==null&&(q=bt(Q)),j=n.getDerivedStateFromProps,(Q=typeof j=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E!==ie||X!==q)&&Gf(t,f,i,q),Ai=!1,X=t.memoizedState,f.state=X,Ja(t,i,f,o),$a();var J=t.memoizedState;E!==ie||X!==J||Ai||e!==null&&e.dependencies!==null&&bo(e.dependencies)?(typeof j=="function"&&(ll(t,n,j,i),J=t.memoizedState),(W=Ai||Hf(t,n,W,i,X,J,q)||e!==null&&e.dependencies!==null&&bo(e.dependencies))?(Q||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,J,q),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,J,q)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||E===e.memoizedProps&&X===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&X===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=J),f.props=i,f.state=J,f.context=q,i=W):(typeof f.componentDidUpdate!="function"||E===e.memoizedProps&&X===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&X===e.memoizedState||(t.flags|=1024),i=!1)}return f=i,Ka(e,t),i=(t.flags&128)!==0,f||i?(f=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&i?(t.child=cr(t,e.child,null,o),t.child=cr(t,null,n,o)):gt(e,t,n,o),t.memoizedState=f.state,e=t.child):e=si(e,t,o),e}function rp(e,t,n,i){return Ba(),t.flags|=256,gt(e,t,n,i),t.child}var pl={dehydrated:null,treeContext:null,retryLane:0};function hl(e){return{baseLanes:e,cachePool:sf()}}function ml(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=rn),e}function ap(e,t,n){var i=t.pendingProps,o=!1,f=(t.flags&128)!==0,E;if((E=f)||(E=e!==null&&e.memoizedState===null?!1:(st.current&2)!==0),E&&(o=!0,t.flags&=-129),E=(t.flags&32)!==0,t.flags&=-33,e===null){if(Le){if(o?Di(t):Oi(),Le){var j=mt,q;if(q=j){e:{for(q=j,j=Fn;q.nodeType!==8;){if(!j){j=null;break e}if(q=vn(q.nextSibling),q===null){j=null;break e}}j=q}j!==null?(t.memoizedState={dehydrated:j,treeContext:ar!==null?{id:ni,overflow:ii}:null,retryLane:536870912},q=nn(18,null,null,0),q.stateNode=j,q.return=t,t.child=q,Tt=t,mt=null,q=!0):q=!1}q||or(t)}if(j=t.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return j.data==="$!"?t.lanes=16:t.lanes=536870912,null;ri(t)}return j=i.children,i=i.fallback,o?(Oi(),o=t.mode,j=vl({mode:"hidden",children:j},o),i=vr(i,o,n,null),j.return=t,i.return=t,j.sibling=i,t.child=j,o=t.child,o.memoizedState=hl(n),o.childLanes=ml(e,E,n),t.memoizedState=pl,i):(Di(t),gl(t,j))}if(q=e.memoizedState,q!==null&&(j=q.dehydrated,j!==null)){if(f)t.flags&256?(Di(t),t.flags&=-257,t=_l(e,t,n)):t.memoizedState!==null?(Oi(),t.child=e.child,t.flags|=128,t=null):(Oi(),o=i.fallback,j=t.mode,i=vl({mode:"visible",children:i.children},j),o=vr(o,j,n,null),o.flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,cr(t,e.child,null,n),i=t.child,i.memoizedState=hl(n),i.childLanes=ml(e,E,n),t.memoizedState=pl,t=o);else if(Di(t),j.data==="$!"){if(E=j.nextSibling&&j.nextSibling.dataset,E)var Q=E.dgst;E=Q,i=Error(s(419)),i.stack="",i.digest=E,Ua({value:i,source:null,stack:null}),t=_l(e,t,n)}else if(dt||Xa(e,t,n,!1),E=(n&e.childLanes)!==0,dt||E){if(E=ze,E!==null){if(i=n&-n,i&42)i=1;else switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=64;break;case 268435456:i=134217728;break;default:i=0}if(i=i&(E.suspendedLanes|n)?0:i,i!==0&&i!==q.retryLane)throw q.retryLane=i,Ei(e,i),Ct(E,e,i),Zf}j.data==="$?"||Ql(),t=_l(e,t,n)}else j.data==="$?"?(t.flags|=128,t.child=e.child,t=Wv.bind(null,e),j._reactRetry=t,t=null):(e=q.treeContext,mt=vn(j.nextSibling),Tt=t,Le=!0,mn=null,Fn=!1,e!==null&&($t[Jt++]=ni,$t[Jt++]=ii,$t[Jt++]=ar,ni=e.id,ii=e.overflow,ar=t),t=gl(t,i.children),t.flags|=4096);return t}return o?(Oi(),o=i.fallback,j=t.mode,q=e.child,Q=q.sibling,i=Ui(q,{mode:"hidden",children:i.children}),i.subtreeFlags=q.subtreeFlags&31457280,Q!==null?o=Ui(Q,o):(o=vr(o,j,n,null),o.flags|=2),o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,j=e.child.memoizedState,j===null?j=hl(n):(q=j.cachePool,q!==null?(Q=ot._currentValue,q=q.parent!==Q?{parent:Q,pool:Q}:q):q=sf(),j={baseLanes:j.baseLanes|n,cachePool:q}),o.memoizedState=j,o.childLanes=ml(e,E,n),t.memoizedState=pl,i):(Di(t),n=e.child,e=n.sibling,n=Ui(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(E=t.deletions,E===null?(t.deletions=[e],t.flags|=16):E.push(e)),t.child=n,t.memoizedState=null,n)}function gl(e,t){return t=vl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function vl(e,t){return Lp(e,t,0,null)}function _l(e,t,n){return cr(t,e.child,null,n),e=gl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function sp(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),wl(e.return,t,n)}function yl(e,t,n,i,o){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=i,f.tail=n,f.tailMode=o)}function op(e,t,n){var i=t.pendingProps,o=i.revealOrder,f=i.tail;if(gt(e,t,i.children,n),i=st.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sp(e,n,t);else if(e.tag===19)sp(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(Ne(st,i),o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&oo(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),yl(t,!1,o,n,f);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&oo(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}yl(t,!0,n,null,f);break;case"together":yl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function si(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),zi|=t.lanes,!(n&t.childLanes))if(e!==null){if(Xa(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,n=Ui(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ui(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function bl(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&bo(e)))}function zv(e,t,n){switch(t.tag){case 3:un(t,t.stateNode.containerInfo),Li(t,ot,e.memoizedState.cache),Ba();break;case 27:case 5:Or(t);break;case 4:un(t,t.stateNode.containerInfo);break;case 10:Li(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Di(t),t.flags|=128,null):n&t.child.childLanes?ap(e,t,n):(Di(t),e=si(e,t,n),e!==null?e.sibling:null);Di(t);break;case 19:var o=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Xa(e,t,n,!1),i=(n&t.childLanes)!==0),o){if(i)return op(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ne(st,st.current),i)break;return null;case 22:case 23:return t.lanes=0,ep(e,t,n);case 24:Li(t,ot,e.memoizedState.cache)}return si(e,t,n)}function cp(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)dt=!0;else{if(!bl(e,n)&&!(t.flags&128))return dt=!1,zv(e,t,n);dt=!!(e.flags&131072)}else dt=!1,Le&&t.flags&1048576&&Vd(t,no,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,o=i._init;if(i=o(i._payload),t.type=i,typeof i=="function")Nl(i)?(e=pr(i,e),t.tag=1,t=ip(null,t,i,e,n)):(t.tag=0,t=fl(null,t,i,e,n));else{if(i!=null){if(o=i.$$typeof,o===b){t.tag=11,t=$f(null,t,i,e,n);break e}else if(o===g){t.tag=14,t=Jf(null,t,i,e,n);break e}}throw t=P(i)||i,Error(s(306,t,""))}}return t;case 0:return fl(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,o=pr(i,t.pendingProps),ip(e,t,i,o,n);case 3:e:{if(un(t,t.stateNode.containerInfo),e===null)throw Error(s(387));var f=t.pendingProps;o=t.memoizedState,i=o.element,Cl(e,t),Ja(t,f,null,n);var E=t.memoizedState;if(f=E.cache,Li(t,ot,f),f!==o.cache&&Rl(t,[ot],n,!0),$a(),f=E.element,o.isDehydrated)if(o={element:f,isDehydrated:!1,cache:E.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=rp(e,t,f,n);break e}else if(f!==i){i=Zt(Error(s(424)),t),Ua(i),t=rp(e,t,f,n);break e}else for(mt=vn(t.stateNode.containerInfo.firstChild),Tt=t,Le=!0,mn=null,Fn=!0,n=ef(t,null,f,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ba(),f===i){t=si(e,t,n);break e}gt(e,t,f,n)}t=t.child}return t;case 26:return Ka(e,t),e===null?(n=dh(t.type,null,t.pendingProps,null))?t.memoizedState=n:Le||(n=t.type,e=t.pendingProps,i=jo(ln.current).createElement(n),i[Qe]=t,i[lt]=e,vt(i,n,e),ne(i),t.stateNode=i):t.memoizedState=dh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Or(t),e===null&&Le&&(i=t.stateNode=ch(t.type,t.pendingProps,ln.current),Tt=t,Fn=!0,mt=vn(i.firstChild)),i=t.pendingProps.children,e!==null||Le?gt(e,t,i,n):t.child=cr(t,null,i,n),Ka(e,t),t.child;case 5:return e===null&&Le&&((o=i=mt)&&(i=m_(i,t.type,t.pendingProps,Fn),i!==null?(t.stateNode=i,Tt=t,mt=vn(i.firstChild),Fn=!1,o=!0):o=!1),o||or(t)),Or(t),o=t.type,f=t.pendingProps,E=e!==null?e.memoizedProps:null,i=f.children,su(o,f)?i=null:E!==null&&su(o,E)&&(t.flags|=32),t.memoizedState!==null&&(o=Kc(e,t,Av,null,null,n),ps._currentValue=o),Ka(e,t),gt(e,t,i,n),t.child;case 6:return e===null&&Le&&((e=n=mt)&&(n=g_(n,t.pendingProps,Fn),n!==null?(t.stateNode=n,Tt=t,mt=null,e=!0):e=!1),e||or(t)),null;case 13:return ap(e,t,n);case 4:return un(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=cr(t,null,i,n):gt(e,t,i,n),t.child;case 11:return $f(e,t,t.type,t.pendingProps,n);case 7:return gt(e,t,t.pendingProps,n),t.child;case 8:return gt(e,t,t.pendingProps.children,n),t.child;case 12:return gt(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Li(t,t.type,i.value),gt(e,t,i.children,n),t.child;case 9:return o=t.type._context,i=t.pendingProps.children,mr(t),o=bt(o),i=i(o),t.flags|=1,gt(e,t,i,n),t.child;case 14:return Jf(e,t,t.type,t.pendingProps,n);case 15:return Wf(e,t,t.type,t.pendingProps,n);case 19:return op(e,t,n);case 22:return ep(e,t,n);case 24:return mr(t),i=bt(ot),e===null?(o=Qc(),o===null&&(o=ze,f=Yc(),o.pooledCache=f,f.refCount++,f!==null&&(o.pooledCacheLanes|=n),o=f),t.memoizedState={parent:i,cache:o},Tl(t),Li(t,ot,o)):(e.lanes&n&&(Cl(e,t),Ja(t,null,null,n),$a()),o=e.memoizedState,f=t.memoizedState,o.parent!==i?(o={parent:i,cache:i},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),Li(t,ot,i)):(i=f.cache,Li(t,ot,i),i!==o.cache&&Rl(t,[ot],n,!0))),gt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}var Sl=Ee(null),hr=null,oi=null;function Li(e,t,n){Ne(Sl,t._currentValue),t._currentValue=n}function ci(e){e._currentValue=Sl.current,Ue(Sl)}function wl(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Rl(e,t,n,i){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var f=o.dependencies;if(f!==null){var E=o.child;f=f.firstContext;e:for(;f!==null;){var j=f;f=o;for(var q=0;q<t.length;q++)if(j.context===t[q]){f.lanes|=n,j=f.alternate,j!==null&&(j.lanes|=n),wl(f.return,n,e),i||(E=null);break e}f=j.next}}else if(o.tag===18){if(E=o.return,E===null)throw Error(s(341));E.lanes|=n,f=E.alternate,f!==null&&(f.lanes|=n),wl(E,n,e),E=null}else E=o.child;if(E!==null)E.return=o;else for(E=o;E!==null;){if(E===e){E=null;break}if(o=E.sibling,o!==null){o.return=E.return,E=o;break}E=E.return}o=E}}function Xa(e,t,n,i){e=null;for(var o=t,f=!1;o!==null;){if(!f){if(o.flags&524288)f=!0;else if(o.flags&262144)break}if(o.tag===10){var E=o.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var j=o.type;jt(o.pendingProps.value,E.value)||(e!==null?e.push(j):e=[j])}}else if(o===ei.current){if(E=o.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(ps):e=[ps])}o=o.return}e!==null&&Rl(t,e,n,i),t.flags|=262144}function bo(e){for(e=e.firstContext;e!==null;){if(!jt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function mr(e){hr=e,oi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function bt(e){return lp(hr,e)}function So(e,t){return hr===null&&mr(e),lp(e,t)}function lp(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},oi===null){if(e===null)throw Error(s(308));oi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else oi=oi.next=t;return n}var Ai=!1;function Tl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Cl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Pi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ni(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Ye&2){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,t=eo(e),Gd(e,null,n),t}return Ws(e,i,t,n),eo(e)}function Za(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194176)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Vt(e,n)}}function El(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,f=null;if(n=n.firstBaseUpdate,n!==null){do{var E={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};f===null?o=f=E:f=f.next=E,n=n.next}while(n!==null);f===null?o=f=t:f=f.next=t}else o=f=t;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:f,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Dl=!1;function $a(){if(Dl){var e=Jr;if(e!==null)throw e}}function Ja(e,t,n,i){Dl=!1;var o=e.updateQueue;Ai=!1;var f=o.firstBaseUpdate,E=o.lastBaseUpdate,j=o.shared.pending;if(j!==null){o.shared.pending=null;var q=j,Q=q.next;q.next=null,E===null?f=Q:E.next=Q,E=q;var W=e.alternate;W!==null&&(W=W.updateQueue,j=W.lastBaseUpdate,j!==E&&(j===null?W.firstBaseUpdate=Q:j.next=Q,W.lastBaseUpdate=q))}if(f!==null){var ie=o.baseState;E=0,W=Q=q=null,j=f;do{var X=j.lane&-536870913,J=X!==j.lane;if(J?(Me&X)===X:(i&X)===X){X!==0&&X===$r&&(Dl=!0),W!==null&&(W=W.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var ue=e,_e=j;X=t;var Xe=n;switch(_e.tag){case 1:if(ue=_e.payload,typeof ue=="function"){ie=ue.call(Xe,ie,X);break e}ie=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=_e.payload,X=typeof ue=="function"?ue.call(Xe,ie,X):ue,X==null)break e;ie=M({},ie,X);break e;case 2:Ai=!0}}X=j.callback,X!==null&&(e.flags|=64,J&&(e.flags|=8192),J=o.callbacks,J===null?o.callbacks=[X]:J.push(X))}else J={lane:X,tag:j.tag,payload:j.payload,callback:j.callback,next:null},W===null?(Q=W=J,q=ie):W=W.next=J,E|=X;if(j=j.next,j===null){if(j=o.shared.pending,j===null)break;J=j,j=J.next,J.next=null,o.lastBaseUpdate=J,o.shared.pending=null}}while(!0);W===null&&(q=ie),o.baseState=q,o.firstBaseUpdate=Q,o.lastBaseUpdate=W,f===null&&(o.shared.lanes=0),zi|=E,e.lanes=E,e.memoizedState=ie}}function up(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function dp(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)up(n[e],t)}function Wa(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var o=i.next;n=o;do{if((n.tag&e)===e){i=void 0;var f=n.create,E=n.inst;i=f(),E.destroy=i}n=n.next}while(n!==o)}}catch(j){Be(t,t.return,j)}}function ki(e,t,n){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var f=o.next;i=f;do{if((i.tag&e)===e){var E=i.inst,j=E.destroy;if(j!==void 0){E.destroy=void 0,o=t;var q=n;try{j()}catch(Q){Be(o,q,Q)}}}i=i.next}while(i!==f)}}catch(Q){Be(t,t.return,Q)}}function fp(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{dp(t,n)}catch(i){Be(e,e.return,i)}}}function pp(e,t,n){n.props=pr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Be(e,t,i)}}function gr(e,t){try{var n=e.ref;if(n!==null){var i=e.stateNode;switch(e.tag){case 26:case 27:case 5:var o=i;break;default:o=i}typeof n=="function"?e.refCleanup=n(o):n.current=o}}catch(f){Be(e,t,f)}}function Bt(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(o){Be(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){Be(e,t,o)}else n.current=null}function hp(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(o){Be(e,e.return,o)}}function mp(e,t,n){try{var i=e.stateNode;u_(i,e.type,n,t),i[lt]=t}catch(o){Be(e,e.return,o)}}function gp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27||e.tag===4}function Ol(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==27&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ml(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ko));else if(i!==4&&i!==27&&(e=e.child,e!==null))for(Ml(e,t,n),e=e.sibling;e!==null;)Ml(e,t,n),e=e.sibling}function wo(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&i!==27&&(e=e.child,e!==null))for(wo(e,t,n),e=e.sibling;e!==null;)wo(e,t,n),e=e.sibling}var li=!1,Fe=!1,xl=!1,vp=typeof WeakSet=="function"?WeakSet:Set,ft=null,_p=!1;function qv(e,t){if(e=e.containerInfo,ru=Ho,e=Nd(e),Ac(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,f=i.focusNode;i=i.focusOffset;try{n.nodeType,f.nodeType}catch{n=null;break e}var E=0,j=-1,q=-1,Q=0,W=0,ie=e,X=null;t:for(;;){for(var J;ie!==n||o!==0&&ie.nodeType!==3||(j=E+o),ie!==f||i!==0&&ie.nodeType!==3||(q=E+i),ie.nodeType===3&&(E+=ie.nodeValue.length),(J=ie.firstChild)!==null;)X=ie,ie=J;for(;;){if(ie===e)break t;if(X===n&&++Q===o&&(j=E),X===f&&++W===i&&(q=E),(J=ie.nextSibling)!==null)break;ie=X,X=ie.parentNode}ie=J}n=j===-1||q===-1?null:{start:j,end:q}}else n=null}n=n||{start:0,end:0}}else n=null;for(au={focusedElem:e,selectionRange:n},Ho=!1,ft=t;ft!==null;)if(t=ft,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ft=e;else for(;ft!==null;){switch(t=ft,f=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&f!==null){e=void 0,n=t,o=f.memoizedProps,f=f.memoizedState,i=n.stateNode;try{var ue=pr(n.type,o,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(ue,f),i.__reactInternalSnapshotBeforeUpdate=e}catch(_e){Be(n,n.return,_e)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)lu(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":lu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,ft=e;break}ft=t.return}return ue=_p,_p=!1,ue}function yp(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:di(e,n),i&4&&Wa(5,n);break;case 1:if(di(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(j){Be(n,n.return,j)}else{var o=pr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(j){Be(n,n.return,j)}}i&64&&fp(n),i&512&&gr(n,n.return);break;case 3:if(di(e,n),i&64&&(i=n.updateQueue,i!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{dp(i,e)}catch(j){Be(n,n.return,j)}}break;case 26:di(e,n),i&512&&gr(n,n.return);break;case 27:case 5:di(e,n),t===null&&i&4&&hp(n),i&512&&gr(n,n.return);break;case 12:di(e,n);break;case 13:di(e,n),i&4&&wp(e,n);break;case 22:if(o=n.memoizedState!==null||li,!o){t=t!==null&&t.memoizedState!==null||Fe;var f=li,E=Fe;li=o,(Fe=t)&&!E?ji(e,n,(n.subtreeFlags&8772)!==0):di(e,n),li=f,Fe=E}i&512&&(n.memoizedProps.mode==="manual"?gr(n,n.return):Bt(n,n.return));break;default:di(e,n)}}function bp(e){var t=e.alternate;t!==null&&(e.alternate=null,bp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Br(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var nt=null,Ut=!1;function ui(e,t,n){for(n=n.child;n!==null;)Sp(e,t,n),n=n.sibling}function Sp(e,t,n){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(Si,n)}catch{}switch(n.tag){case 26:Fe||Bt(n,t),ui(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Fe||Bt(n,t);var i=nt,o=Ut;for(nt=n.stateNode,ui(e,t,n),n=n.stateNode,t=n.attributes;t.length;)n.removeAttributeNode(t[0]);Br(n),nt=i,Ut=o;break;case 5:Fe||Bt(n,t);case 6:o=nt;var f=Ut;if(nt=null,ui(e,t,n),nt=o,Ut=f,nt!==null)if(Ut)try{e=nt,i=n.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)}catch(E){Be(n,t,E)}else try{nt.removeChild(n.stateNode)}catch(E){Be(n,t,E)}break;case 18:nt!==null&&(Ut?(t=nt,n=n.stateNode,t.nodeType===8?cu(t.parentNode,n):t.nodeType===1&&cu(t,n),vs(t)):cu(nt,n.stateNode));break;case 4:i=nt,o=Ut,nt=n.stateNode.containerInfo,Ut=!0,ui(e,t,n),nt=i,Ut=o;break;case 0:case 11:case 14:case 15:Fe||ki(2,n,t),Fe||ki(4,n,t),ui(e,t,n);break;case 1:Fe||(Bt(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&pp(n,t,i)),ui(e,t,n);break;case 21:ui(e,t,n);break;case 22:Fe||Bt(n,t),Fe=(i=Fe)||n.memoizedState!==null,ui(e,t,n),Fe=i;break;default:ui(e,t,n)}}function wp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{vs(e)}catch(n){Be(t,t.return,n)}}function Iv(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new vp),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new vp),t;default:throw Error(s(435,e.tag))}}function Ll(e,t){var n=Iv(e);t.forEach(function(i){var o=e_.bind(null,e,i);n.has(i)||(n.add(i),i.then(o,o))})}function en(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i],f=e,E=t,j=E;e:for(;j!==null;){switch(j.tag){case 27:case 5:nt=j.stateNode,Ut=!1;break e;case 3:nt=j.stateNode.containerInfo,Ut=!0;break e;case 4:nt=j.stateNode.containerInfo,Ut=!0;break e}j=j.return}if(nt===null)throw Error(s(160));Sp(f,E,o),nt=null,Ut=!1,f=o.alternate,f!==null&&(f.return=null),o.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Rp(t,e),t=t.sibling}var gn=null;function Rp(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:en(t,e),tn(e),i&4&&(ki(3,e,e.return),Wa(3,e),ki(5,e,e.return));break;case 1:en(t,e),tn(e),i&512&&(Fe||n===null||Bt(n,n.return)),i&64&&li&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var o=gn;if(en(t,e),tn(e),i&512&&(Fe||n===null||Bt(n,n.return)),i&4){var f=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(i){case"title":f=o.getElementsByTagName("title")[0],(!f||f[tr]||f[Qe]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=o.createElement(i),o.head.insertBefore(f,o.querySelector("head > title"))),vt(f,i,n),f[Qe]=e,ne(f),i=f;break e;case"link":var E=hh("link","href",o).get(i+(n.href||""));if(E){for(var j=0;j<E.length;j++)if(f=E[j],f.getAttribute("href")===(n.href==null?null:n.href)&&f.getAttribute("rel")===(n.rel==null?null:n.rel)&&f.getAttribute("title")===(n.title==null?null:n.title)&&f.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){E.splice(j,1);break t}}f=o.createElement(i),vt(f,i,n),o.head.appendChild(f);break;case"meta":if(E=hh("meta","content",o).get(i+(n.content||""))){for(j=0;j<E.length;j++)if(f=E[j],f.getAttribute("content")===(n.content==null?null:""+n.content)&&f.getAttribute("name")===(n.name==null?null:n.name)&&f.getAttribute("property")===(n.property==null?null:n.property)&&f.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&f.getAttribute("charset")===(n.charSet==null?null:n.charSet)){E.splice(j,1);break t}}f=o.createElement(i),vt(f,i,n),o.head.appendChild(f);break;default:throw Error(s(468,i))}f[Qe]=e,ne(f),i=f}e.stateNode=i}else mh(o,e.type,e.stateNode);else e.stateNode=ph(o,i,e.memoizedProps);else f!==i?(f===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):f.count--,i===null?mh(o,e.type,e.stateNode):ph(o,i,e.memoizedProps)):i===null&&e.stateNode!==null&&mp(e,e.memoizedProps,n.memoizedProps)}break;case 27:if(i&4&&e.alternate===null){o=e.stateNode,f=e.memoizedProps;try{for(var q=o.firstChild;q;){var Q=q.nextSibling,W=q.nodeName;q[tr]||W==="HEAD"||W==="BODY"||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&q.rel.toLowerCase()==="stylesheet"||o.removeChild(q),q=Q}for(var ie=e.type,X=o.attributes;X.length;)o.removeAttributeNode(X[0]);vt(o,ie,f),o[Qe]=e,o[lt]=f}catch(ue){Be(e,e.return,ue)}}case 5:if(en(t,e),tn(e),i&512&&(Fe||n===null||Bt(n,n.return)),e.flags&32){o=e.stateNode;try{zr(o,"")}catch(ue){Be(e,e.return,ue)}}i&4&&e.stateNode!=null&&(o=e.memoizedProps,mp(e,o,n!==null?n.memoizedProps:o)),i&1024&&(xl=!0);break;case 6:if(en(t,e),tn(e),i&4){if(e.stateNode===null)throw Error(s(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(ue){Be(e,e.return,ue)}}break;case 3:if(zo=null,o=gn,gn=Bo(t.containerInfo),en(t,e),gn=o,tn(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{vs(t.containerInfo)}catch(ue){Be(e,e.return,ue)}xl&&(xl=!1,Tp(e));break;case 4:i=gn,gn=Bo(e.stateNode.containerInfo),en(t,e),tn(e),gn=i;break;case 12:en(t,e),tn(e);break;case 13:en(t,e),tn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(ql=Ot()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Ll(e,i)));break;case 22:if(i&512&&(Fe||n===null||Bt(n,n.return)),q=e.memoizedState!==null,Q=n!==null&&n.memoizedState!==null,W=li,ie=Fe,li=W||q,Fe=ie||Q,en(t,e),Fe=ie,li=W,tn(e),t=e.stateNode,t._current=e,t._visibility&=-3,t._visibility|=t._pendingVisibility&2,i&8192&&(t._visibility=q?t._visibility&-2:t._visibility|1,q&&(t=li||Fe,n===null||Q||t||na(e)),e.memoizedProps===null||e.memoizedProps.mode!=="manual"))e:for(n=null,t=e;;){if(t.tag===5||t.tag===26||t.tag===27){if(n===null){Q=n=t;try{if(o=Q.stateNode,q)f=o.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{E=Q.stateNode,j=Q.memoizedProps.style;var J=j!=null&&j.hasOwnProperty("display")?j.display:null;E.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(ue){Be(Q,Q.return,ue)}}}else if(t.tag===6){if(n===null){Q=t;try{Q.stateNode.nodeValue=q?"":Q.memoizedProps}catch(ue){Be(Q,Q.return,ue)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Ll(e,n))));break;case 19:en(t,e),tn(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Ll(e,i)));break;case 21:break;default:en(t,e),tn(e)}}function tn(e){var t=e.flags;if(t&2){try{if(e.tag!==27){e:{for(var n=e.return;n!==null;){if(gp(n)){var i=n;break e}n=n.return}throw Error(s(160))}switch(i.tag){case 27:var o=i.stateNode,f=Ol(e);wo(e,f,o);break;case 5:var E=i.stateNode;i.flags&32&&(zr(E,""),i.flags&=-33);var j=Ol(e);wo(e,j,E);break;case 3:case 4:var q=i.stateNode.containerInfo,Q=Ol(e);Ml(e,Q,q);break;default:throw Error(s(161))}}}catch(W){Be(e,e.return,W)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Tp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Tp(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function di(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)yp(e,t.alternate,t),t=t.sibling}function na(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ki(4,t,t.return),na(t);break;case 1:Bt(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&pp(t,t.return,n),na(t);break;case 26:case 27:case 5:Bt(t,t.return),na(t);break;case 22:Bt(t,t.return),t.memoizedState===null&&na(t);break;default:na(t)}e=e.sibling}}function ji(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,o=e,f=t,E=f.flags;switch(f.tag){case 0:case 11:case 15:ji(o,f,n),Wa(4,f);break;case 1:if(ji(o,f,n),i=f,o=i.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(Q){Be(i,i.return,Q)}if(i=f,o=i.updateQueue,o!==null){var j=i.stateNode;try{var q=o.shared.hiddenCallbacks;if(q!==null)for(o.shared.hiddenCallbacks=null,o=0;o<q.length;o++)up(q[o],j)}catch(Q){Be(i,i.return,Q)}}n&&E&64&&fp(f),gr(f,f.return);break;case 26:case 27:case 5:ji(o,f,n),n&&i===null&&E&4&&hp(f),gr(f,f.return);break;case 12:ji(o,f,n);break;case 13:ji(o,f,n),n&&E&4&&wp(o,f);break;case 22:f.memoizedState===null&&ji(o,f,n),gr(f,f.return);break;default:ji(o,f,n)}t=t.sibling}}function Al(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Ga(n))}function Pl(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ga(e))}function Bi(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Cp(e,t,n,i),t=t.sibling}function Cp(e,t,n,i){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Bi(e,t,n,i),o&2048&&Wa(9,t);break;case 3:Bi(e,t,n,i),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ga(e)));break;case 12:if(o&2048){Bi(e,t,n,i),e=t.stateNode;try{var f=t.memoizedProps,E=f.id,j=f.onPostCommit;typeof j=="function"&&j(E,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(q){Be(t,t.return,q)}}else Bi(e,t,n,i);break;case 23:break;case 22:f=t.stateNode,t.memoizedState!==null?f._visibility&4?Bi(e,t,n,i):es(e,t):f._visibility&4?Bi(e,t,n,i):(f._visibility|=4,ia(e,t,n,i,(t.subtreeFlags&10256)!==0)),o&2048&&Al(t.alternate,t);break;case 24:Bi(e,t,n,i),o&2048&&Pl(t.alternate,t);break;default:Bi(e,t,n,i)}}function ia(e,t,n,i,o){for(o=o&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var f=e,E=t,j=n,q=i,Q=E.flags;switch(E.tag){case 0:case 11:case 15:ia(f,E,j,q,o),Wa(8,E);break;case 23:break;case 22:var W=E.stateNode;E.memoizedState!==null?W._visibility&4?ia(f,E,j,q,o):es(f,E):(W._visibility|=4,ia(f,E,j,q,o)),o&&Q&2048&&Al(E.alternate,E);break;case 24:ia(f,E,j,q,o),o&&Q&2048&&Pl(E.alternate,E);break;default:ia(f,E,j,q,o)}t=t.sibling}}function es(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,o=i.flags;switch(i.tag){case 22:es(n,i),o&2048&&Al(i.alternate,i);break;case 24:es(n,i),o&2048&&Pl(i.alternate,i);break;default:es(n,i)}t=t.sibling}}var ts=8192;function ra(e){if(e.subtreeFlags&ts)for(e=e.child;e!==null;)Ep(e),e=e.sibling}function Ep(e){switch(e.tag){case 26:ra(e),e.flags&ts&&e.memoizedState!==null&&M_(gn,e.memoizedState,e.memoizedProps);break;case 5:ra(e);break;case 3:case 4:var t=gn;gn=Bo(e.stateNode.containerInfo),ra(e),gn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=ts,ts=16777216,ra(e),ts=t):ra(e));break;default:ra(e)}}function Dp(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ns(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ft=i,Mp(i,e)}Dp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Op(e),e=e.sibling}function Op(e){switch(e.tag){case 0:case 11:case 15:ns(e),e.flags&2048&&ki(9,e,e.return);break;case 3:ns(e);break;case 12:ns(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&4&&(e.return===null||e.return.tag!==13)?(t._visibility&=-5,Ro(e)):ns(e);break;default:ns(e)}}function Ro(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ft=i,Mp(i,e)}Dp(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ki(8,t,t.return),Ro(t);break;case 22:n=t.stateNode,n._visibility&4&&(n._visibility&=-5,Ro(t));break;default:Ro(t)}e=e.sibling}}function Mp(e,t){for(;ft!==null;){var n=ft;switch(n.tag){case 0:case 11:case 15:ki(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Ga(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,ft=i;else e:for(n=e;ft!==null;){i=ft;var o=i.sibling,f=i.return;if(bp(i),i===n){ft=null;break e}if(o!==null){o.return=f,ft=o;break e}ft=f}}}function Hv(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(e,t,n,i){return new Hv(e,t,n,i)}function Nl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ui(e,t){var n=e.alternate;return n===null?(n=nn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&31457280,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function xp(e,t){e.flags&=31457282;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function To(e,t,n,i,o,f){var E=0;if(i=e,typeof e=="function")Nl(e)&&(E=1);else if(typeof e=="string")E=D_(e,n,ct.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case C:return vr(n.children,o,f,t);case m:E=8,o|=24;break;case x:return e=nn(12,n,t,o|2),e.elementType=x,e.lanes=f,e;case U:return e=nn(13,n,t,o),e.elementType=U,e.lanes=f,e;case A:return e=nn(19,n,t,o),e.elementType=A,e.lanes=f,e;case a:return Lp(n,o,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case D:case y:E=10;break e;case O:E=9;break e;case b:E=11;break e;case g:E=14;break e;case h:E=16,i=null;break e}E=29,n=Error(s(130,e===null?"null":typeof e,"")),i=null}return t=nn(E,n,t,o),t.elementType=e,t.type=i,t.lanes=f,t}function vr(e,t,n,i){return e=nn(7,e,i,t),e.lanes=n,e}function Lp(e,t,n,i){e=nn(22,e,i,t),e.elementType=a,e.lanes=n;var o={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var f=o._current;if(f===null)throw Error(s(456));if(!(o._pendingVisibility&2)){var E=Ei(f,2);E!==null&&(o._pendingVisibility|=2,Ct(E,f,2))}},attach:function(){var f=o._current;if(f===null)throw Error(s(456));if(o._pendingVisibility&2){var E=Ei(f,2);E!==null&&(o._pendingVisibility&=-3,Ct(E,f,2))}}};return e.stateNode=o,e}function kl(e,t,n){return e=nn(6,e,null,t),e.lanes=n,e}function jl(e,t,n){return t=nn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function fi(e){e.flags|=4}function Ap(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!gh(t)){if(t=Wt.current,t!==null&&((Me&4194176)===Me?Kn!==null:(Me&62914560)!==Me&&!(Me&536870912)||t!==Kn))throw qa=Ic,Kd;e.flags|=8192}}function Co(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Ji():536870912,e.lanes|=t,sa|=t)}function is(e,t){if(!Le)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ge(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&31457280,i|=o.flags&31457280,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Gv(e,t,n){var i=t.pendingProps;switch(zc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(t),null;case 1:return Ge(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ci(ot),ti(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ja(t)?fi(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,mn!==null&&(Yl(mn),mn=null))),Ge(t),null;case 26:return n=t.memoizedState,e===null?(fi(t),n!==null?(Ge(t),Ap(t,n)):(Ge(t),t.flags&=-16777217)):n?n!==e.memoizedState?(fi(t),Ge(t),Ap(t,n)):(Ge(t),t.flags&=-16777217):(e.memoizedProps!==i&&fi(t),Ge(t),t.flags&=-16777217),null;case 27:Yt(t),n=ln.current;var o=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&fi(t);else{if(!i){if(t.stateNode===null)throw Error(s(166));return Ge(t),null}e=ct.current,ja(t)?Qd(t):(e=ch(o,i,n),t.stateNode=e,fi(t))}return Ge(t),null;case 5:if(Yt(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&fi(t);else{if(!i){if(t.stateNode===null)throw Error(s(166));return Ge(t),null}if(e=ct.current,ja(t))Qd(t);else{switch(o=jo(ln.current),e){case 1:e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?o.createElement("select",{is:i.is}):o.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?o.createElement(n,{is:i.is}):o.createElement(n)}}e[Qe]=t,e[lt]=i;e:for(o=t.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;o.sibling===null;){if(o.return===null||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=e;e:switch(vt(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&fi(t)}}return Ge(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&fi(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(s(166));if(e=ln.current,ja(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,o=Tt,o!==null)switch(o.tag){case 27:case 5:i=o.memoizedProps}e[Qe]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||nh(e.nodeValue,n)),e||or(t)}else e=jo(e).createTextNode(i),e[Qe]=t,t.stateNode=e}return Ge(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=ja(t),i!==null&&i.dehydrated!==null){if(e===null){if(!o)throw Error(s(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(317));o[Qe]=t}else Ba(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ge(t),o=!1}else mn!==null&&(Yl(mn),mn=null),o=!0;if(!o)return t.flags&256?(ri(t),t):(ri(t),null)}if(ri(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,o=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(o=i.alternate.memoizedState.cachePool.pool);var f=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),f!==o&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Co(t,t.updateQueue),Ge(t),null;case 4:return ti(),e===null&&tu(t.stateNode.containerInfo),Ge(t),null;case 10:return ci(t.type),Ge(t),null;case 19:if(Ue(st),o=t.memoizedState,o===null)return Ge(t),null;if(i=(t.flags&128)!==0,f=o.rendering,f===null)if(i)is(o,!1);else{if(Ke!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=oo(e),f!==null){for(t.flags|=128,is(o,!1),e=f.updateQueue,t.updateQueue=e,Co(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)xp(n,e),n=n.sibling;return Ne(st,st.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ot()>Eo&&(t.flags|=128,i=!0,is(o,!1),t.lanes=4194304)}else{if(!i)if(e=oo(f),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Co(t,e),is(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!Le)return Ge(t),null}else 2*Ot()-o.renderingStartTime>Eo&&n!==536870912&&(t.flags|=128,i=!0,is(o,!1),t.lanes=4194304);o.isBackwards?(f.sibling=t.child,t.child=f):(e=o.last,e!==null?e.sibling=f:t.child=f,o.last=f)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ot(),t.sibling=null,e=st.current,Ne(st,i?e&1|2:e&1),t):(Ge(t),null);case 22:case 23:return ri(t),Gc(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(Ge(t),t.subtreeFlags&6&&(t.flags|=8192)):Ge(t),n=t.updateQueue,n!==null&&Co(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&Ue(lr),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ci(ot),Ge(t),null;case 25:return null}throw Error(s(156,t.tag))}function Yv(e,t){switch(zc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ci(ot),ti(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Yt(t),null;case 13:if(ri(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Ba()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ue(st),null;case 4:return ti(),null;case 10:return ci(t.type),null;case 22:case 23:return ri(t),Gc(),e!==null&&Ue(lr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ci(ot),null;case 25:return null;default:return null}}function Pp(e,t){switch(zc(t),t.tag){case 3:ci(ot),ti();break;case 26:case 27:case 5:Yt(t);break;case 4:ti();break;case 13:ri(t);break;case 19:Ue(st);break;case 10:ci(t.type);break;case 22:case 23:ri(t),Gc(),e!==null&&Ue(lr);break;case 24:ci(ot)}}var Vv={getCacheForType:function(e){var t=bt(ot),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},Qv=typeof WeakMap=="function"?WeakMap:Map,Ye=0,ze=null,Ce=null,Me=0,qe=0,zt=null,pi=!1,aa=!1,Bl=!1,hi=0,Ke=0,zi=0,_r=0,Ul=0,rn=0,sa=0,rs=null,Zn=null,zl=!1,ql=0,Eo=1/0,Do=null,qi=null,Oo=!1,yr=null,as=0,Il=0,Hl=null,ss=0,Gl=null;function qt(){if(Ye&2&&Me!==0)return Me&-Me;if(v.T!==null){var e=$r;return e!==0?e:$l()}return Qt()}function Np(){rn===0&&(rn=!(Me&536870912)||Le?Is():536870912);var e=Wt.current;return e!==null&&(e.flags|=32),rn}function Ct(e,t,n){(e===ze&&qe===2||e.cancelPendingCommit!==null)&&(oa(e,0),mi(e,Me,rn,!1)),Yn(e,n),(!(Ye&2)||e!==ze)&&(e===ze&&(!(Ye&2)&&(_r|=n),Ke===4&&mi(e,Me,rn,!1)),$n(e))}function kp(e,t,n){if(Ye&6)throw Error(s(327));var i=!n&&(t&60)===0&&(t&e.expiredLanes)===0||We(e,t),o=i?Xv(e,t):Fl(e,t,!0),f=i;do{if(o===0){aa&&!i&&mi(e,t,0,!1);break}else if(o===6)mi(e,t,0,!pi);else{if(n=e.current.alternate,f&&!Fv(n)){o=Fl(e,t,!1),f=!1;continue}if(o===2){if(f=t,e.errorRecoveryDisabledLanes&f)var E=0;else E=e.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){t=E;e:{var j=e;o=rs;var q=j.current.memoizedState.isDehydrated;if(q&&(oa(j,E).flags|=256),E=Fl(j,E,!1),E!==2){if(Bl&&!q){j.errorRecoveryDisabledLanes|=f,_r|=f,o=4;break e}f=Zn,Zn=o,f!==null&&Yl(f)}o=E}if(f=!1,o!==2)continue}}if(o===1){oa(e,0),mi(e,t,0,!0);break}e:{switch(i=e,o){case 0:case 1:throw Error(s(345));case 4:if((t&4194176)===t){mi(i,t,rn,!pi);break e}break;case 2:Zn=null;break;case 3:case 5:break;default:throw Error(s(329))}if(i.finishedWork=n,i.finishedLanes=t,(t&62914560)===t&&(f=ql+300-Ot(),10<f)){if(mi(i,t,rn,!pi),$i(i,0)!==0)break e;i.timeoutHandle=ah(jp.bind(null,i,n,Zn,Do,zl,t,rn,_r,sa,pi,2,-0,0),f);break e}jp(i,n,Zn,Do,zl,t,rn,_r,sa,pi,0,-0,0)}}break}while(!0);$n(e)}function Yl(e){Zn===null?Zn=e:Zn.push.apply(Zn,e)}function jp(e,t,n,i,o,f,E,j,q,Q,W,ie,X){var J=t.subtreeFlags;if((J&8192||(J&16785408)===16785408)&&(fs={stylesheets:null,count:0,unsuspend:O_},Ep(t),t=x_(),t!==null)){e.cancelPendingCommit=t(Gp.bind(null,e,n,i,o,E,j,q,1,ie,X)),mi(e,f,E,!Q);return}Gp(e,n,i,o,E,j,q,W,ie,X)}function Fv(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var o=n[i],f=o.getSnapshot;o=o.value;try{if(!jt(f(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function mi(e,t,n,i){t&=~Ul,t&=~_r,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var o=t;0<o;){var f=31-at(o),E=1<<f;i[f]=-1,o&=~E}n!==0&&Nr(e,n,t)}function Mo(){return Ye&6?!0:(os(0),!1)}function Vl(){if(Ce!==null){if(qe===0)var e=Ce.return;else e=Ce,oi=hr=null,$c(e),Xr=null,Ia=0,e=Ce;for(;e!==null;)Pp(e.alternate,e),e=e.return;Ce=null}}function oa(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,f_(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Vl(),ze=e,Ce=n=Ui(e.current,null),Me=t,qe=0,zt=null,pi=!1,aa=We(e,t),Bl=!1,sa=rn=Ul=_r=zi=Ke=0,Zn=rs=null,zl=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var o=31-at(i),f=1<<o;t|=e[o],i&=~f}return hi=t,Js(),n}function Bp(e,t){we=null,v.H=Xn,t===za?(t=$d(),qe=3):t===Kd?(t=$d(),qe=4):qe=t===Zf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,zt=t,Ce===null&&(Ke=1,yo(e,Zt(t,e.current)))}function Up(){var e=v.H;return v.H=Xn,e===null?Xn:e}function zp(){var e=v.A;return v.A=Vv,e}function Ql(){Ke=4,pi||(Me&4194176)!==Me&&Wt.current!==null||(aa=!0),!(zi&134217727)&&!(_r&134217727)||ze===null||mi(ze,Me,rn,!1)}function Fl(e,t,n){var i=Ye;Ye|=2;var o=Up(),f=zp();(ze!==e||Me!==t)&&(Do=null,oa(e,t)),t=!1;var E=Ke;e:do try{if(qe!==0&&Ce!==null){var j=Ce,q=zt;switch(qe){case 8:Vl(),E=6;break e;case 3:case 2:case 6:Wt.current===null&&(t=!0);var Q=qe;if(qe=0,zt=null,ca(e,j,q,Q),n&&aa){E=0;break e}break;default:Q=qe,qe=0,zt=null,ca(e,j,q,Q)}}Kv(),E=Ke;break}catch(W){Bp(e,W)}while(!0);return t&&e.shellSuspendCounter++,oi=hr=null,Ye=i,v.H=o,v.A=f,Ce===null&&(ze=null,Me=0,Js()),E}function Kv(){for(;Ce!==null;)qp(Ce)}function Xv(e,t){var n=Ye;Ye|=2;var i=Up(),o=zp();ze!==e||Me!==t?(Do=null,Eo=Ot()+500,oa(e,t)):aa=We(e,t);e:do try{if(qe!==0&&Ce!==null){t=Ce;var f=zt;t:switch(qe){case 1:qe=0,zt=null,ca(e,t,f,1);break;case 2:if(Xd(f)){qe=0,zt=null,Ip(t);break}t=function(){qe===2&&ze===e&&(qe=7),$n(e)},f.then(t,t);break e;case 3:qe=7;break e;case 4:qe=5;break e;case 7:Xd(f)?(qe=0,zt=null,Ip(t)):(qe=0,zt=null,ca(e,t,f,7));break;case 5:var E=null;switch(Ce.tag){case 26:E=Ce.memoizedState;case 5:case 27:var j=Ce;if(!E||gh(E)){qe=0,zt=null;var q=j.sibling;if(q!==null)Ce=q;else{var Q=j.return;Q!==null?(Ce=Q,xo(Q)):Ce=null}break t}}qe=0,zt=null,ca(e,t,f,5);break;case 6:qe=0,zt=null,ca(e,t,f,6);break;case 8:Vl(),Ke=6;break e;default:throw Error(s(462))}}Zv();break}catch(W){Bp(e,W)}while(!0);return oi=hr=null,v.H=i,v.A=o,Ye=n,Ce!==null?0:(ze=null,Me=0,Js(),Ke)}function Zv(){for(;Ce!==null&&!Ar();)qp(Ce)}function qp(e){var t=cp(e.alternate,e,hi);e.memoizedProps=e.pendingProps,t===null?xo(e):Ce=t}function Ip(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=np(n,t,t.pendingProps,t.type,void 0,Me);break;case 11:t=np(n,t,t.pendingProps,t.type.render,t.ref,Me);break;case 5:$c(t);default:Pp(n,t),t=Ce=xp(t,hi),t=cp(n,t,hi)}e.memoizedProps=e.pendingProps,t===null?xo(e):Ce=t}function ca(e,t,n,i){oi=hr=null,$c(t),Xr=null,Ia=0;var o=t.return;try{if(Uv(e,o,t,n,Me)){Ke=1,yo(e,Zt(n,e.current)),Ce=null;return}}catch(f){if(o!==null)throw Ce=o,f;Ke=1,yo(e,Zt(n,e.current)),Ce=null;return}t.flags&32768?(Le||i===1?e=!0:aa||Me&536870912?e=!1:(pi=e=!0,(i===2||i===3||i===6)&&(i=Wt.current,i!==null&&i.tag===13&&(i.flags|=16384))),Hp(t,e)):xo(t)}function xo(e){var t=e;do{if(t.flags&32768){Hp(t,pi);return}e=t.return;var n=Gv(t.alternate,t,hi);if(n!==null){Ce=n;return}if(t=t.sibling,t!==null){Ce=t;return}Ce=t=e}while(t!==null);Ke===0&&(Ke=5)}function Hp(e,t){do{var n=Yv(e.alternate,e);if(n!==null){n.flags&=32767,Ce=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Ce=e;return}Ce=e=n}while(e!==null);Ke=6,Ce=null}function Gp(e,t,n,i,o,f,E,j,q,Q){var W=v.T,ie=re.p;try{re.p=2,v.T=null,$v(e,t,n,i,ie,o,f,E,j,q,Q)}finally{v.T=W,re.p=ie}}function $v(e,t,n,i,o,f,E,j){do la();while(yr!==null);if(Ye&6)throw Error(s(327));var q=e.finishedWork;if(i=e.finishedLanes,q===null)return null;if(e.finishedWork=null,e.finishedLanes=0,q===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var Q=q.lanes|q.childLanes;if(Q|=jc,wi(e,i,Q,f,E,j),e===ze&&(Ce=ze=null,Me=0),!(q.subtreeFlags&10256)&&!(q.flags&10256)||Oo||(Oo=!0,Il=Q,Hl=n,t_(zn,function(){return la(),null})),n=(q.flags&15990)!==0,q.subtreeFlags&15990||n?(n=v.T,v.T=null,f=re.p,re.p=2,E=Ye,Ye|=4,qv(e,q),Rp(q,e),Sv(au,e.containerInfo),Ho=!!ru,au=ru=null,e.current=q,yp(e,q.alternate,q),ba(),Ye=E,re.p=f,v.T=n):e.current=q,Oo?(Oo=!1,yr=e,as=i):Yp(e,Q),Q=e.pendingLanes,Q===0&&(qi=null),qn(q.stateNode),$n(e),t!==null)for(o=e.onRecoverableError,q=0;q<t.length;q++)Q=t[q],o(Q.value,{componentStack:Q.stack});return as&3&&la(),Q=e.pendingLanes,i&4194218&&Q&42?e===Gl?ss++:(ss=0,Gl=e):ss=0,os(0),null}function Yp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ga(t)))}function la(){if(yr!==null){var e=yr,t=Il;Il=0;var n=kr(as),i=v.T,o=re.p;try{if(re.p=32>n?32:n,v.T=null,yr===null)var f=!1;else{n=Hl,Hl=null;var E=yr,j=as;if(yr=null,as=0,Ye&6)throw Error(s(331));var q=Ye;if(Ye|=4,Op(E.current),Cp(E,E.current,j,n),Ye=q,os(0,!1),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(Si,E)}catch{}f=!0}return f}finally{re.p=o,v.T=i,Yp(e,t)}}return!1}function Vp(e,t,n){t=Zt(n,t),t=dl(e.stateNode,t,2),e=Ni(e,t,2),e!==null&&(Yn(e,2),$n(e))}function Be(e,t,n){if(e.tag===3)Vp(e,e,n);else for(;t!==null;){if(t.tag===3){Vp(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(qi===null||!qi.has(i))){e=Zt(n,e),n=Kf(2),i=Ni(t,n,2),i!==null&&(Xf(n,i,t,e),Yn(i,2),$n(i));break}}t=t.return}}function Kl(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Qv;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(n)||(Bl=!0,o.add(n),e=Jv.bind(null,e,t,n),t.then(e,e))}function Jv(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ze===e&&(Me&n)===n&&(Ke===4||Ke===3&&(Me&62914560)===Me&&300>Ot()-ql?!(Ye&2)&&oa(e,0):Ul|=n,sa===Me&&(sa=0)),$n(e)}function Qp(e,t){t===0&&(t=Ji()),e=Ei(e,t),e!==null&&(Yn(e,t),$n(e))}function Wv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Qp(e,n)}function e_(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(s(314))}i!==null&&i.delete(t),Qp(e,n)}function t_(e,t){return xr(e,t)}var Lo=null,ua=null,Xl=!1,Ao=!1,Zl=!1,br=0;function $n(e){e!==ua&&e.next===null&&(ua===null?Lo=ua=e:ua=ua.next=e),Ao=!0,Xl||(Xl=!0,i_(n_))}function os(e,t){if(!Zl&&Ao){Zl=!0;do for(var n=!1,i=Lo;i!==null;){if(e!==0){var o=i.pendingLanes;if(o===0)var f=0;else{var E=i.suspendedLanes,j=i.pingedLanes;f=(1<<31-at(42|e)+1)-1,f&=o&~(E&~j),f=f&201326677?f&201326677|1:f?f|2:0}f!==0&&(n=!0,Xp(i,f))}else f=Me,f=$i(i,i===ze?f:0),!(f&3)||We(i,f)||(n=!0,Xp(i,f));i=i.next}while(n);Zl=!1}}function n_(){Ao=Xl=!1;var e=0;br!==0&&(d_()&&(e=br),br=0);for(var t=Ot(),n=null,i=Lo;i!==null;){var o=i.next,f=Fp(i,t);f===0?(i.next=null,n===null?Lo=o:n.next=o,o===null&&(ua=n)):(n=i,(e!==0||f&3)&&(Ao=!0)),i=o}os(e)}function Fp(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var E=31-at(f),j=1<<E,q=o[E];q===-1?(!(j&n)||j&i)&&(o[E]=Gn(j,t)):q<=t&&(e.expiredLanes|=j),f&=~j}if(t=ze,n=Me,n=$i(e,e===t?n:0),i=e.callbackNode,n===0||e===t&&qe===2||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Lr(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||We(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Lr(i),kr(n)){case 2:case 8:n=Pr;break;case 32:n=zn;break;case 268435456:n=bi;break;default:n=zn}return i=Kp.bind(null,e),n=xr(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Lr(i),e.callbackPriority=2,e.callbackNode=null,2}function Kp(e,t){var n=e.callbackNode;if(la()&&e.callbackNode!==n)return null;var i=Me;return i=$i(e,e===ze?i:0),i===0?null:(kp(e,i,t),Fp(e,Ot()),e.callbackNode!=null&&e.callbackNode===n?Kp.bind(null,e):null)}function Xp(e,t){if(la())return null;kp(e,t,!0)}function i_(e){p_(function(){Ye&6?xr(wa,e):e()})}function $l(){return br===0&&(br=Is()),br}function Zp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Vs(""+e)}function $p(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function r_(e,t,n,i,o){if(t==="submit"&&n&&n.stateNode===o){var f=Zp((o[lt]||null).action),E=i.submitter;E&&(t=(t=E[lt]||null)?Zp(t.formAction):E.getAttribute("formAction"),t!==null&&(f=t,E=null));var j=new Xs("action","action",null,i,o);e.push({event:j,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(br!==0){var q=E?$p(o,E):new FormData(o);sl(n,{pending:!0,data:q,method:o.method,action:f},null,q)}}else typeof f=="function"&&(j.preventDefault(),q=E?$p(o,E):new FormData(o),sl(n,{pending:!0,data:q,method:o.method,action:f},f,q))},currentTarget:o}]})}}for(var Jl=0;Jl<Hd.length;Jl++){var Wl=Hd[Jl],a_=Wl.toLowerCase(),s_=Wl[0].toUpperCase()+Wl.slice(1);hn(a_,"on"+s_)}hn(Bd,"onAnimationEnd"),hn(Ud,"onAnimationIteration"),hn(zd,"onAnimationStart"),hn("dblclick","onDoubleClick"),hn("focusin","onFocus"),hn("focusout","onBlur"),hn(Rv,"onTransitionRun"),hn(Tv,"onTransitionStart"),hn(Cv,"onTransitionCancel"),hn(qd,"onTransitionEnd"),fe("onMouseEnter",["mouseout","mouseover"]),fe("onMouseLeave",["mouseout","mouseover"]),fe("onPointerEnter",["pointerout","pointerover"]),fe("onPointerLeave",["pointerout","pointerover"]),Se("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Se("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Se("onBeforeInput",["compositionend","keypress","textInput","paste"]),Se("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Se("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Se("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cs));function Jp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],o=i.event;i=i.listeners;e:{var f=void 0;if(t)for(var E=i.length-1;0<=E;E--){var j=i[E],q=j.instance,Q=j.currentTarget;if(j=j.listener,q!==f&&o.isPropagationStopped())break e;f=j,o.currentTarget=Q;try{f(o)}catch(W){_o(W)}o.currentTarget=null,f=q}else for(E=0;E<i.length;E++){if(j=i[E],q=j.instance,Q=j.currentTarget,j=j.listener,q!==f&&o.isPropagationStopped())break e;f=j,o.currentTarget=Q;try{f(o)}catch(W){_o(W)}o.currentTarget=null,f=q}}}}function De(e,t){var n=t[jr];n===void 0&&(n=t[jr]=new Set);var i=e+"__bubble";n.has(i)||(Wp(t,e,2,!1),n.add(i))}function eu(e,t,n){var i=0;t&&(i|=4),Wp(n,e,i,t)}var Po="_reactListening"+Math.random().toString(36).slice(2);function tu(e){if(!e[Po]){e[Po]=!0,se.forEach(function(n){n!=="selectionchange"&&(o_.has(n)||eu(n,!1,e),eu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Po]||(t[Po]=!0,eu("selectionchange",!1,t))}}function Wp(e,t,n,i){switch(wh(t)){case 2:var o=P_;break;case 8:o=N_;break;default:o=hu}n=o.bind(null,t,n,e),o=void 0,!Rc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function nu(e,t,n,i,o){var f=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var E=i.tag;if(E===3||E===4){var j=i.stateNode.containerInfo;if(j===o||j.nodeType===8&&j.parentNode===o)break;if(E===4)for(E=i.return;E!==null;){var q=E.tag;if((q===3||q===4)&&(q=E.stateNode.containerInfo,q===o||q.nodeType===8&&q.parentNode===o))return;E=E.return}for(;j!==null;){if(E=Vn(j),E===null)return;if(q=E.tag,q===5||q===6||q===26||q===27){i=f=E;continue e}j=j.parentNode}}i=i.return}pd(function(){var Q=f,W=Sc(n),ie=[];e:{var X=Id.get(e);if(X!==void 0){var J=Xs,ue=e;switch(e){case"keypress":if(Fs(n)===0)break e;case"keydown":case"keyup":J=ev;break;case"focusin":ue="focus",J=Dc;break;case"focusout":ue="blur",J=Dc;break;case"beforeblur":case"afterblur":J=Dc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=gd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Hg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=iv;break;case Bd:case Ud:case zd:J=Vg;break;case qd:J=av;break;case"scroll":case"scrollend":J=qg;break;case"wheel":J=ov;break;case"copy":case"cut":case"paste":J=Fg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=_d;break;case"toggle":case"beforetoggle":J=lv}var _e=(t&4)!==0,Xe=!_e&&(e==="scroll"||e==="scrollend"),F=_e?X!==null?X+"Capture":null:X;_e=[];for(var G=Q,K;G!==null;){var te=G;if(K=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||K===null||F===null||(te=Da(G,F),te!=null&&_e.push(ls(G,te,K))),Xe)break;G=G.return}0<_e.length&&(X=new J(X,ue,null,n,W),ie.push({event:X,listeners:_e}))}}if(!(t&7)){e:{if(X=e==="mouseover"||e==="pointerover",J=e==="mouseout"||e==="pointerout",X&&n!==bc&&(ue=n.relatedTarget||n.fromElement)&&(Vn(ue)||ue[wt]))break e;if((J||X)&&(X=W.window===W?W:(X=W.ownerDocument)?X.defaultView||X.parentWindow:window,J?(ue=n.relatedTarget||n.toElement,J=Q,ue=ue?Vn(ue):null,ue!==null&&(Xe=H(ue),_e=ue.tag,ue!==Xe||_e!==5&&_e!==27&&_e!==6)&&(ue=null)):(J=null,ue=Q),J!==ue)){if(_e=gd,te="onMouseLeave",F="onMouseEnter",G="mouse",(e==="pointerout"||e==="pointerover")&&(_e=_d,te="onPointerLeave",F="onPointerEnter",G="pointer"),Xe=J==null?X:Ft(J),K=ue==null?X:Ft(ue),X=new _e(te,G+"leave",J,n,W),X.target=Xe,X.relatedTarget=K,te=null,Vn(W)===Q&&(_e=new _e(F,G+"enter",ue,n,W),_e.target=K,_e.relatedTarget=Xe,te=_e),Xe=te,J&&ue)t:{for(_e=J,F=ue,G=0,K=_e;K;K=da(K))G++;for(K=0,te=F;te;te=da(te))K++;for(;0<G-K;)_e=da(_e),G--;for(;0<K-G;)F=da(F),K--;for(;G--;){if(_e===F||F!==null&&_e===F.alternate)break t;_e=da(_e),F=da(F)}_e=null}else _e=null;J!==null&&eh(ie,X,J,_e,!1),ue!==null&&Xe!==null&&eh(ie,Xe,ue,_e,!0)}}e:{if(X=Q?Ft(Q):window,J=X.nodeName&&X.nodeName.toLowerCase(),J==="select"||J==="input"&&X.type==="file")var ce=Ed;else if(Td(X))if(Dd)ce=yv;else{ce=vv;var Re=gv}else J=X.nodeName,!J||J.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Q&&yc(Q.elementType)&&(ce=Ed):ce=_v;if(ce&&(ce=ce(e,Q))){Cd(ie,ce,n,W);break e}Re&&Re(e,X,Q),e==="focusout"&&Q&&X.type==="number"&&Q.memoizedProps.value!=null&&_c(X,"number",X.value)}switch(Re=Q?Ft(Q):window,e){case"focusin":(Td(Re)||Re.contentEditable==="true")&&(Gr=Re,Pc=Q,ka=null);break;case"focusout":ka=Pc=Gr=null;break;case"mousedown":Nc=!0;break;case"contextmenu":case"mouseup":case"dragend":Nc=!1,kd(ie,n,W);break;case"selectionchange":if(wv)break;case"keydown":case"keyup":kd(ie,n,W)}var de;if(Mc)e:{switch(e){case"compositionstart":var me="onCompositionStart";break e;case"compositionend":me="onCompositionEnd";break e;case"compositionupdate":me="onCompositionUpdate";break e}me=void 0}else Hr?wd(e,n)&&(me="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(me="onCompositionStart");me&&(yd&&n.locale!=="ko"&&(Hr||me!=="onCompositionStart"?me==="onCompositionEnd"&&Hr&&(de=hd()):(Ci=W,Tc="value"in Ci?Ci.value:Ci.textContent,Hr=!0)),Re=No(Q,me),0<Re.length&&(me=new vd(me,e,null,n,W),ie.push({event:me,listeners:Re}),de?me.data=de:(de=Rd(n),de!==null&&(me.data=de)))),(de=dv?fv(e,n):pv(e,n))&&(me=No(Q,"onBeforeInput"),0<me.length&&(Re=new vd("onBeforeInput","beforeinput",null,n,W),ie.push({event:Re,listeners:me}),Re.data=de)),r_(ie,e,Q,n,W)}Jp(ie,t)})}function ls(e,t,n){return{instance:e,listener:t,currentTarget:n}}function No(e,t){for(var n=t+"Capture",i=[];e!==null;){var o=e,f=o.stateNode;o=o.tag,o!==5&&o!==26&&o!==27||f===null||(o=Da(e,n),o!=null&&i.unshift(ls(e,o,f)),o=Da(e,t),o!=null&&i.push(ls(e,o,f))),e=e.return}return i}function da(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function eh(e,t,n,i,o){for(var f=t._reactName,E=[];n!==null&&n!==i;){var j=n,q=j.alternate,Q=j.stateNode;if(j=j.tag,q!==null&&q===i)break;j!==5&&j!==26&&j!==27||Q===null||(q=Q,o?(Q=Da(n,f),Q!=null&&E.unshift(ls(n,Q,q))):o||(Q=Da(n,f),Q!=null&&E.push(ls(n,Q,q)))),n=n.return}E.length!==0&&e.push({event:t,listeners:E})}var c_=/\r\n?/g,l_=/\u0000|\uFFFD/g;function th(e){return(typeof e=="string"?e:""+e).replace(c_,`
`).replace(l_,"")}function nh(e,t){return t=th(t),th(e)===t}function ko(){}function je(e,t,n,i,o,f){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||zr(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&zr(e,""+i);break;case"className":kt(e,"class",i);break;case"tabIndex":kt(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":kt(e,n,i);break;case"style":dd(e,i,f);break;case"data":if(t!=="object"){kt(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Vs(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(n==="formAction"?(t!=="input"&&je(e,t,"name",o.name,o,null),je(e,t,"formEncType",o.formEncType,o,null),je(e,t,"formMethod",o.formMethod,o,null),je(e,t,"formTarget",o.formTarget,o,null)):(je(e,t,"encType",o.encType,o,null),je(e,t,"method",o.method,o,null),je(e,t,"target",o.target,o,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Vs(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=ko);break;case"onScroll":i!=null&&De("scroll",e);break;case"onScrollEnd":i!=null&&De("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(s(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Vs(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":De("beforetoggle",e),De("toggle",e),xt(e,"popover",i);break;case"xlinkActuate":Rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Rt(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Rt(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Rt(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Rt(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":xt(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Ug.get(n)||n,xt(e,n,i))}}function iu(e,t,n,i,o,f){switch(n){case"style":dd(e,i,f);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(s(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(s(60));e.innerHTML=n}}break;case"children":typeof i=="string"?zr(e,i):(typeof i=="number"||typeof i=="bigint")&&zr(e,""+i);break;case"onScroll":i!=null&&De("scroll",e);break;case"onScrollEnd":i!=null&&De("scrollend",e);break;case"onClick":i!=null&&(e.onclick=ko);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oe.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),f=e[lt]||null,f=f!=null?f[n]:null,typeof f=="function"&&e.removeEventListener(t,f,o),typeof i=="function")){typeof f!="function"&&f!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,o);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):xt(e,n,i)}}}function vt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",e),De("load",e);var i=!1,o=!1,f;for(f in n)if(n.hasOwnProperty(f)){var E=n[f];if(E!=null)switch(f){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:je(e,t,f,E,n,null)}}o&&je(e,t,"srcSet",n.srcSet,n,null),i&&je(e,t,"src",n.src,n,null);return;case"input":De("invalid",e);var j=f=E=o=null,q=null,Q=null;for(i in n)if(n.hasOwnProperty(i)){var W=n[i];if(W!=null)switch(i){case"name":o=W;break;case"type":E=W;break;case"checked":q=W;break;case"defaultChecked":Q=W;break;case"value":f=W;break;case"defaultValue":j=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,t));break;default:je(e,t,i,W,n,null)}}od(e,f,j,q,Q,E,o,!1),Ti(e);return;case"select":De("invalid",e),i=E=f=null;for(o in n)if(n.hasOwnProperty(o)&&(j=n[o],j!=null))switch(o){case"value":f=j;break;case"defaultValue":E=j;break;case"multiple":i=j;default:je(e,t,o,j,n,null)}t=f,n=E,e.multiple=!!i,t!=null?Ur(e,!!i,t,!1):n!=null&&Ur(e,!!i,n,!0);return;case"textarea":De("invalid",e),f=o=i=null;for(E in n)if(n.hasOwnProperty(E)&&(j=n[E],j!=null))switch(E){case"value":i=j;break;case"defaultValue":o=j;break;case"children":f=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(91));break;default:je(e,t,E,j,n,null)}ld(e,i,o,f),Ti(e);return;case"option":for(q in n)if(n.hasOwnProperty(q)&&(i=n[q],i!=null))switch(q){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:je(e,t,q,i,n,null)}return;case"dialog":De("cancel",e),De("close",e);break;case"iframe":case"object":De("load",e);break;case"video":case"audio":for(i=0;i<cs.length;i++)De(cs[i],e);break;case"image":De("error",e),De("load",e);break;case"details":De("toggle",e);break;case"embed":case"source":case"link":De("error",e),De("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in n)if(n.hasOwnProperty(Q)&&(i=n[Q],i!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:je(e,t,Q,i,n,null)}return;default:if(yc(t)){for(W in n)n.hasOwnProperty(W)&&(i=n[W],i!==void 0&&iu(e,t,W,i,n,void 0));return}}for(j in n)n.hasOwnProperty(j)&&(i=n[j],i!=null&&je(e,t,j,i,n,null))}function u_(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,f=null,E=null,j=null,q=null,Q=null,W=null;for(J in n){var ie=n[J];if(n.hasOwnProperty(J)&&ie!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":q=ie;default:i.hasOwnProperty(J)||je(e,t,J,null,i,ie)}}for(var X in i){var J=i[X];if(ie=n[X],i.hasOwnProperty(X)&&(J!=null||ie!=null))switch(X){case"type":f=J;break;case"name":o=J;break;case"checked":Q=J;break;case"defaultChecked":W=J;break;case"value":E=J;break;case"defaultValue":j=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,t));break;default:J!==ie&&je(e,t,X,J,i,ie)}}vc(e,E,j,q,Q,W,f,o);return;case"select":J=E=j=X=null;for(f in n)if(q=n[f],n.hasOwnProperty(f)&&q!=null)switch(f){case"value":break;case"multiple":J=q;default:i.hasOwnProperty(f)||je(e,t,f,null,i,q)}for(o in i)if(f=i[o],q=n[o],i.hasOwnProperty(o)&&(f!=null||q!=null))switch(o){case"value":X=f;break;case"defaultValue":j=f;break;case"multiple":E=f;default:f!==q&&je(e,t,o,f,i,q)}t=j,n=E,i=J,X!=null?Ur(e,!!n,X,!1):!!i!=!!n&&(t!=null?Ur(e,!!n,t,!0):Ur(e,!!n,n?[]:"",!1));return;case"textarea":J=X=null;for(j in n)if(o=n[j],n.hasOwnProperty(j)&&o!=null&&!i.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:je(e,t,j,null,i,o)}for(E in i)if(o=i[E],f=n[E],i.hasOwnProperty(E)&&(o!=null||f!=null))switch(E){case"value":X=o;break;case"defaultValue":J=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(s(91));break;default:o!==f&&je(e,t,E,o,i,f)}cd(e,X,J);return;case"option":for(var ue in n)if(X=n[ue],n.hasOwnProperty(ue)&&X!=null&&!i.hasOwnProperty(ue))switch(ue){case"selected":e.selected=!1;break;default:je(e,t,ue,null,i,X)}for(q in i)if(X=i[q],J=n[q],i.hasOwnProperty(q)&&X!==J&&(X!=null||J!=null))switch(q){case"selected":e.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:je(e,t,q,X,i,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in n)X=n[_e],n.hasOwnProperty(_e)&&X!=null&&!i.hasOwnProperty(_e)&&je(e,t,_e,null,i,X);for(Q in i)if(X=i[Q],J=n[Q],i.hasOwnProperty(Q)&&X!==J&&(X!=null||J!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,t));break;default:je(e,t,Q,X,i,J)}return;default:if(yc(t)){for(var Xe in n)X=n[Xe],n.hasOwnProperty(Xe)&&X!==void 0&&!i.hasOwnProperty(Xe)&&iu(e,t,Xe,void 0,i,X);for(W in i)X=i[W],J=n[W],!i.hasOwnProperty(W)||X===J||X===void 0&&J===void 0||iu(e,t,W,X,i,J);return}}for(var F in n)X=n[F],n.hasOwnProperty(F)&&X!=null&&!i.hasOwnProperty(F)&&je(e,t,F,null,i,X);for(ie in i)X=i[ie],J=n[ie],!i.hasOwnProperty(ie)||X===J||X==null&&J==null||je(e,t,ie,X,i,J)}var ru=null,au=null;function jo(e){return e.nodeType===9?e:e.ownerDocument}function ih(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function su(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ou=null;function d_(){var e=window.event;return e&&e.type==="popstate"?e===ou?!1:(ou=e,!0):(ou=null,!1)}var ah=typeof setTimeout=="function"?setTimeout:void 0,f_=typeof clearTimeout=="function"?clearTimeout:void 0,sh=typeof Promise=="function"?Promise:void 0,p_=typeof queueMicrotask=="function"?queueMicrotask:typeof sh<"u"?function(e){return sh.resolve(null).then(e).catch(h_)}:ah;function h_(e){setTimeout(function(){throw e})}function cu(e,t){var n=t,i=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(i===0){e.removeChild(o),vs(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=o}while(n);vs(t)}function lu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":lu(n),Br(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function m_(e,t,n,i){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[tr])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==o.rel||e.getAttribute("href")!==(o.href==null?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=vn(e.nextSibling),e===null)break}return null}function g_(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=vn(e.nextSibling),e===null))return null;return e}function vn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}function oh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function ch(e,t,n){switch(t=jo(n),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}var an=new Map,lh=new Set;function Bo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.ownerDocument}var gi=re.d;re.d={f:v_,r:__,D:y_,C:b_,L:S_,m:w_,X:T_,S:R_,M:C_};function v_(){var e=gi.f(),t=Mo();return e||t}function __(e){var t=ut(e);t!==null&&t.tag===5&&t.type==="form"?jf(t):gi.r(e)}var fa=typeof document>"u"?null:document;function uh(e,t,n){var i=fa;if(i&&typeof t=="string"&&t){var o=Kt(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),lh.has(o)||(lh.add(o),e={rel:e,crossOrigin:n,href:t},i.querySelector(o)===null&&(t=i.createElement("link"),vt(t,"link",e),ne(t),i.head.appendChild(t)))}}function y_(e){gi.D(e),uh("dns-prefetch",e,null)}function b_(e,t){gi.C(e,t),uh("preconnect",e,t)}function S_(e,t,n){gi.L(e,t,n);var i=fa;if(i&&e&&t){var o='link[rel="preload"][as="'+Kt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+Kt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+Kt(n.imageSizes)+'"]')):o+='[href="'+Kt(e)+'"]';var f=o;switch(t){case"style":f=pa(e);break;case"script":f=ha(e)}an.has(f)||(e=M({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),an.set(f,e),i.querySelector(o)!==null||t==="style"&&i.querySelector(us(f))||t==="script"&&i.querySelector(ds(f))||(t=i.createElement("link"),vt(t,"link",e),ne(t),i.head.appendChild(t)))}}function w_(e,t){gi.m(e,t);var n=fa;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+Kt(i)+'"][href="'+Kt(e)+'"]',f=o;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=ha(e)}if(!an.has(f)&&(e=M({rel:"modulepreload",href:e},t),an.set(f,e),n.querySelector(o)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ds(f)))return}i=n.createElement("link"),vt(i,"link",e),ne(i),n.head.appendChild(i)}}}function R_(e,t,n){gi.S(e,t,n);var i=fa;if(i&&e){var o=pn(i).hoistableStyles,f=pa(e);t=t||"default";var E=o.get(f);if(!E){var j={loading:0,preload:null};if(E=i.querySelector(us(f)))j.loading=5;else{e=M({rel:"stylesheet",href:e,"data-precedence":t},n),(n=an.get(f))&&uu(e,n);var q=E=i.createElement("link");ne(q),vt(q,"link",e),q._p=new Promise(function(Q,W){q.onload=Q,q.onerror=W}),q.addEventListener("load",function(){j.loading|=1}),q.addEventListener("error",function(){j.loading|=2}),j.loading|=4,Uo(E,t,i)}E={type:"stylesheet",instance:E,count:1,state:j},o.set(f,E)}}}function T_(e,t){gi.X(e,t);var n=fa;if(n&&e){var i=pn(n).hoistableScripts,o=ha(e),f=i.get(o);f||(f=n.querySelector(ds(o)),f||(e=M({src:e,async:!0},t),(t=an.get(o))&&du(e,t),f=n.createElement("script"),ne(f),vt(f,"link",e),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},i.set(o,f))}}function C_(e,t){gi.M(e,t);var n=fa;if(n&&e){var i=pn(n).hoistableScripts,o=ha(e),f=i.get(o);f||(f=n.querySelector(ds(o)),f||(e=M({src:e,async:!0,type:"module"},t),(t=an.get(o))&&du(e,t),f=n.createElement("script"),ne(f),vt(f,"link",e),n.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},i.set(o,f))}}function dh(e,t,n,i){var o=(o=ln.current)?Bo(o):null;if(!o)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=pa(n.href),n=pn(o).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=pa(n.href);var f=pn(o).hoistableStyles,E=f.get(e);if(E||(o=o.ownerDocument||o,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,E),(f=o.querySelector(us(e)))&&!f._p&&(E.instance=f,E.state.loading=5),an.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},an.set(e,n),f||E_(o,e,n,E.state))),t&&i===null)throw Error(s(528,""));return E}if(t&&i!==null)throw Error(s(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ha(n),n=pn(o).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function pa(e){return'href="'+Kt(e)+'"'}function us(e){return'link[rel="stylesheet"]['+e+"]"}function fh(e){return M({},e,{"data-precedence":e.precedence,precedence:null})}function E_(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),vt(t,"link",n),ne(t),e.head.appendChild(t))}function ha(e){return'[src="'+Kt(e)+'"]'}function ds(e){return"script[async]"+e}function ph(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Kt(n.href)+'"]');if(i)return t.instance=i,ne(i),i;var o=M({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),ne(i),vt(i,"style",o),Uo(i,n.precedence,e),t.instance=i;case"stylesheet":o=pa(n.href);var f=e.querySelector(us(o));if(f)return t.state.loading|=4,t.instance=f,ne(f),f;i=fh(n),(o=an.get(o))&&uu(i,o),f=(e.ownerDocument||e).createElement("link"),ne(f);var E=f;return E._p=new Promise(function(j,q){E.onload=j,E.onerror=q}),vt(f,"link",i),t.state.loading|=4,Uo(f,n.precedence,e),t.instance=f;case"script":return f=ha(n.src),(o=e.querySelector(ds(f)))?(t.instance=o,ne(o),o):(i=n,(o=an.get(f))&&(i=M({},n),du(i,o)),e=e.ownerDocument||e,o=e.createElement("script"),ne(o),vt(o,"link",i),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,Uo(i,n.precedence,e));return t.instance}function Uo(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=i.length?i[i.length-1]:null,f=o,E=0;E<i.length;E++){var j=i[E];if(j.dataset.precedence===t)f=j;else if(f!==o)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function uu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function du(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var zo=null;function hh(e,t,n){if(zo===null){var i=new Map,o=zo=new Map;o.set(n,i)}else o=zo,i=o.get(n),i||(i=new Map,o.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var f=n[o];if(!(f[tr]||f[Qe]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var E=f.getAttribute(t)||"";E=e+E;var j=i.get(E);j?j.push(f):i.set(E,[f])}}return i}function mh(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function D_(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function gh(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var fs=null;function O_(){}function M_(e,t,n){if(fs===null)throw Error(s(475));var i=fs;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var o=pa(n.href),f=e.querySelector(us(o));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=qo.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=f,ne(f);return}f=e.ownerDocument||e,n=fh(n),(o=an.get(o))&&uu(n,o),f=f.createElement("link"),ne(f);var E=f;E._p=new Promise(function(j,q){E.onload=j,E.onerror=q}),vt(f,"link",n),t.instance=f}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=qo.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function x_(){if(fs===null)throw Error(s(475));var e=fs;return e.stylesheets&&e.count===0&&fu(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&fu(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function qo(){if(this.count--,this.count===0){if(this.stylesheets)fu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Io=null;function fu(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Io=new Map,t.forEach(L_,e),Io=null,qo.call(e))}function L_(e,t){if(!(t.state.loading&4)){var n=Io.get(e);if(n)var i=n.get(null);else{n=new Map,Io.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<o.length;f++){var E=o[f];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(n.set(E.dataset.precedence,E),i=E)}i&&n.set(null,i)}o=t.instance,E=o.getAttribute("data-precedence"),f=n.get(E)||i,f===i&&n.set(null,o),n.set(E,o),this.count++,i=qo.bind(this),o.addEventListener("load",i),o.addEventListener("error",i),f?f.parentNode.insertBefore(o,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var ps={$$typeof:y,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function A_(e,t,n,i,o,f,E,j){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wi(0),this.hiddenUpdates=Wi(null),this.identifierPrefix=i,this.onUncaughtError=o,this.onCaughtError=f,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function vh(e,t,n,i,o,f,E,j,q,Q,W,ie){return e=new A_(e,t,n,E,j,q,Q,ie),t=1,f===!0&&(t|=24),f=nn(3,null,null,t),e.current=f,f.stateNode=e,t=Yc(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:i,isDehydrated:n,cache:t},Tl(f),e}function _h(e){return e?(e=Qr,e):Qr}function yh(e,t,n,i,o,f){o=_h(o),i.context===null?i.context=o:i.pendingContext=o,i=Pi(t),i.payload={element:n},f=f===void 0?null:f,f!==null&&(i.callback=f),n=Ni(e,i,t),n!==null&&(Ct(n,e,t),Za(n,e,t))}function bh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function pu(e,t){bh(e,t),(e=e.alternate)&&bh(e,t)}function Sh(e){if(e.tag===13){var t=Ei(e,67108864);t!==null&&Ct(t,e,67108864),pu(e,67108864)}}var Ho=!0;function P_(e,t,n,i){var o=v.T;v.T=null;var f=re.p;try{re.p=2,hu(e,t,n,i)}finally{re.p=f,v.T=o}}function N_(e,t,n,i){var o=v.T;v.T=null;var f=re.p;try{re.p=8,hu(e,t,n,i)}finally{re.p=f,v.T=o}}function hu(e,t,n,i){if(Ho){var o=mu(i);if(o===null)nu(e,t,i,Go,n),Rh(e,i);else if(j_(o,e,t,n,i))i.stopPropagation();else if(Rh(e,i),t&4&&-1<k_.indexOf(e)){for(;o!==null;){var f=ut(o);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var E=fn(f.pendingLanes);if(E!==0){var j=f;for(j.pendingLanes|=2,j.entangledLanes|=2;E;){var q=1<<31-at(E);j.entanglements[1]|=q,E&=~q}$n(f),!(Ye&6)&&(Eo=Ot()+500,os(0))}}break;case 13:j=Ei(f,2),j!==null&&Ct(j,f,2),Mo(),pu(f,2)}if(f=mu(i),f===null&&nu(e,t,i,Go,n),f===o)break;o=f}o!==null&&i.stopPropagation()}else nu(e,t,i,null,n)}}function mu(e){return e=Sc(e),gu(e)}var Go=null;function gu(e){if(Go=null,e=Vn(e),e!==null){var t=H(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=Y(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Go=e,null}function wh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Sa()){case wa:return 2;case Pr:return 8;case zn:case Us:return 32;case bi:return 268435456;default:return 32}default:return 32}}var vu=!1,Ii=null,Hi=null,Gi=null,hs=new Map,ms=new Map,Yi=[],k_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rh(e,t){switch(e){case"focusin":case"focusout":Ii=null;break;case"dragenter":case"dragleave":Hi=null;break;case"mouseover":case"mouseout":Gi=null;break;case"pointerover":case"pointerout":hs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ms.delete(t.pointerId)}}function gs(e,t,n,i,o,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:f,targetContainers:[o]},t!==null&&(t=ut(t),t!==null&&Sh(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function j_(e,t,n,i,o){switch(t){case"focusin":return Ii=gs(Ii,e,t,n,i,o),!0;case"dragenter":return Hi=gs(Hi,e,t,n,i,o),!0;case"mouseover":return Gi=gs(Gi,e,t,n,i,o),!0;case"pointerover":var f=o.pointerId;return hs.set(f,gs(hs.get(f)||null,e,t,n,i,o)),!0;case"gotpointercapture":return f=o.pointerId,ms.set(f,gs(ms.get(f)||null,e,t,n,i,o)),!0}return!1}function Th(e){var t=Vn(e.target);if(t!==null){var n=H(t);if(n!==null){if(t=n.tag,t===13){if(t=Y(n),t!==null){e.blockedOn=t,Ri(e.priority,function(){if(n.tag===13){var i=qt(),o=Ei(n,i);o!==null&&Ct(o,n,i),pu(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=mu(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);bc=i,n.target.dispatchEvent(i),bc=null}else return t=ut(n),t!==null&&Sh(t),e.blockedOn=n,!1;t.shift()}return!0}function Ch(e,t,n){Yo(e)&&n.delete(t)}function B_(){vu=!1,Ii!==null&&Yo(Ii)&&(Ii=null),Hi!==null&&Yo(Hi)&&(Hi=null),Gi!==null&&Yo(Gi)&&(Gi=null),hs.forEach(Ch),ms.forEach(Ch)}function Vo(e,t){e.blockedOn===t&&(e.blockedOn=null,vu||(vu=!0,d.unstable_scheduleCallback(d.unstable_NormalPriority,B_)))}var Qo=null;function Eh(e){Qo!==e&&(Qo=e,d.unstable_scheduleCallback(d.unstable_NormalPriority,function(){Qo===e&&(Qo=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],o=e[t+2];if(typeof i!="function"){if(gu(i||n)===null)continue;break}var f=ut(n);f!==null&&(e.splice(t,3),t-=3,sl(f,{pending:!0,data:o,method:n.method,action:i},i,o))}}))}function vs(e){function t(q){return Vo(q,e)}Ii!==null&&Vo(Ii,e),Hi!==null&&Vo(Hi,e),Gi!==null&&Vo(Gi,e),hs.forEach(t),ms.forEach(t);for(var n=0;n<Yi.length;n++){var i=Yi[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Yi.length&&(n=Yi[0],n.blockedOn===null);)Th(n),n.blockedOn===null&&Yi.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var o=n[i],f=n[i+1],E=o[lt]||null;if(typeof f=="function")E||Eh(n);else if(E){var j=null;if(f&&f.hasAttribute("formAction")){if(o=f,E=f[lt]||null)j=E.formAction;else if(gu(o)!==null)continue}else j=E.action;typeof j=="function"?n[i+1]=j:(n.splice(i,3),i-=3),Eh(n)}}}function _u(e){this._internalRoot=e}Fo.prototype.render=_u.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var n=t.current,i=qt();yh(n,i,e,t,null,null)},Fo.prototype.unmount=_u.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;e.tag===0&&la(),yh(e.current,2,null,e,null,null),Mo(),t[wt]=null}};function Fo(e){this._internalRoot=e}Fo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Qt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Yi.length&&t!==0&&t<Yi[n].priority;n++);Yi.splice(n,0,e),n===0&&Th(e)}};var Dh=c.version;if(Dh!=="19.0.0")throw Error(s(527,Dh,"19.0.0"));re.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=Z(t),e=e!==null?ae(e):null,e=e===null?null:e.stateNode,e};var U_={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:v,findFiberByHostInstance:Vn,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ko=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ko.isDisabled&&Ko.supportsFiber)try{Si=Ko.inject(U_),yt=Ko}catch{}}return ys.createRoot=function(e,t){if(!_(e))throw Error(s(299));var n=!1,i="",o=Yf,f=Vf,E=Qf,j=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(E=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(j=t.unstable_transitionCallbacks)),t=vh(e,1,!1,null,null,n,i,o,f,E,j,null),e[wt]=t.current,tu(e.nodeType===8?e.parentNode:e),new _u(t)},ys.hydrateRoot=function(e,t,n){if(!_(e))throw Error(s(299));var i=!1,o="",f=Yf,E=Vf,j=Qf,q=null,Q=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(E=n.onCaughtError),n.onRecoverableError!==void 0&&(j=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(q=n.unstable_transitionCallbacks),n.formState!==void 0&&(Q=n.formState)),t=vh(e,1,!0,t,n??null,i,o,f,E,j,q,Q),t.context=_h(null),n=t.current,i=qt(),o=Pi(i),o.callback=null,Ni(n,o,i),t.current.lanes=i,Yn(t,i),$n(t),e[wt]=t.current,tu(e),new Fo(t)},ys.version="19.0.0",ys}var Bh;function X_(){if(Bh)return Su.exports;Bh=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(c){console.error(c)}}return d(),Su.exports=K_(),Su.exports}var Z_=X_(),bs={},Uh;function $_(){if(Uh)return bs;Uh=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.parse=w,bs.serialize=m;const d=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,c=/^[\u0021-\u003A\u003C-\u007E]*$/,l=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,_=Object.prototype.toString,T=(()=>{const O=function(){};return O.prototype=Object.create(null),O})();function w(O,y){const b=new T,U=O.length;if(U<2)return b;const A=(y==null?void 0:y.decode)||x;let g=0;do{const h=O.indexOf("=",g);if(h===-1)break;const a=O.indexOf(";",g),r=a===-1?U:a;if(h>r){g=O.lastIndexOf(";",h-1)+1;continue}const u=R(O,g,h),p=C(O,h,u),S=O.slice(u,p);if(b[S]===void 0){let P=R(O,h+1,r),v=C(O,r,P);const M=A(O.slice(P,v));b[S]=M}g=r+1}while(g<U);return b}function R(O,y,b){do{const U=O.charCodeAt(y);if(U!==32&&U!==9)return y}while(++y<b);return b}function C(O,y,b){for(;y>b;){const U=O.charCodeAt(--y);if(U!==32&&U!==9)return y+1}return b}function m(O,y,b){const U=(b==null?void 0:b.encode)||encodeURIComponent;if(!d.test(O))throw new TypeError(`argument name is invalid: ${O}`);const A=U(y);if(!c.test(A))throw new TypeError(`argument val is invalid: ${y}`);let g=O+"="+A;if(!b)return g;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);g+="; Max-Age="+b.maxAge}if(b.domain){if(!l.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);g+="; Domain="+b.domain}if(b.path){if(!s.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);g+="; Path="+b.path}if(b.expires){if(!D(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);g+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(g+="; HttpOnly"),b.secure&&(g+="; Secure"),b.partitioned&&(g+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":g+="; Priority=Low";break;case"medium":g+="; Priority=Medium";break;case"high":g+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":g+="; SameSite=Strict";break;case"lax":g+="; SameSite=Lax";break;case"none":g+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return g}function x(O){if(O.indexOf("%")===-1)return O;try{return decodeURIComponent(O)}catch{return O}}function D(O){return _.call(O)==="[object Date]"}return bs}$_();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var zh="popstate";function J_(d={}){function c(s,_){let{pathname:T,search:w,hash:R}=s.location;return Uu("",{pathname:T,search:w,hash:R},_.state&&_.state.usr||null,_.state&&_.state.key||"default")}function l(s,_){return typeof _=="string"?_:ks(_)}return ey(c,l,null,d)}function Ie(d,c){if(d===!1||d===null||typeof d>"u")throw new Error(c)}function cn(d,c){if(!d){typeof console<"u"&&console.warn(c);try{throw new Error(c)}catch{}}}function W_(){return Math.random().toString(36).substring(2,10)}function qh(d,c){return{usr:d.state,key:d.key,idx:c}}function Uu(d,c,l=null,s){return{pathname:typeof d=="string"?d:d.pathname,search:"",hash:"",...typeof c=="string"?ga(c):c,state:l,key:c&&c.key||s||W_()}}function ks({pathname:d="/",search:c="",hash:l=""}){return c&&c!=="?"&&(d+=c.charAt(0)==="?"?c:"?"+c),l&&l!=="#"&&(d+=l.charAt(0)==="#"?l:"#"+l),d}function ga(d){let c={};if(d){let l=d.indexOf("#");l>=0&&(c.hash=d.substring(l),d=d.substring(0,l));let s=d.indexOf("?");s>=0&&(c.search=d.substring(s),d=d.substring(0,s)),d&&(c.pathname=d)}return c}function ey(d,c,l,s={}){let{window:_=document.defaultView,v5Compat:T=!1}=s,w=_.history,R="POP",C=null,m=x();m==null&&(m=0,w.replaceState({...w.state,idx:m},""));function x(){return(w.state||{idx:null}).idx}function D(){R="POP";let A=x(),g=A==null?null:A-m;m=A,C&&C({action:R,location:U.location,delta:g})}function O(A,g){R="PUSH";let h=Uu(U.location,A,g);m=x()+1;let a=qh(h,m),r=U.createHref(h);try{w.pushState(a,"",r)}catch(u){if(u instanceof DOMException&&u.name==="DataCloneError")throw u;_.location.assign(r)}T&&C&&C({action:R,location:U.location,delta:1})}function y(A,g){R="REPLACE";let h=Uu(U.location,A,g);m=x();let a=qh(h,m),r=U.createHref(h);w.replaceState(a,"",r),T&&C&&C({action:R,location:U.location,delta:0})}function b(A){let g=_.location.origin!=="null"?_.location.origin:_.location.href,h=typeof A=="string"?A:ks(A);return h=h.replace(/ $/,"%20"),Ie(g,`No window.location.(origin|href) available to create URL for href: ${h}`),new URL(h,g)}let U={get action(){return R},get location(){return d(_,w)},listen(A){if(C)throw new Error("A history only accepts one active listener");return _.addEventListener(zh,D),C=A,()=>{_.removeEventListener(zh,D),C=null}},createHref(A){return c(_,A)},createURL:b,encodeLocation(A){let g=b(A);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:O,replace:y,go(A){return w.go(A)}};return U}function Vm(d,c,l="/"){return ty(d,c,l,!1)}function ty(d,c,l,s){let _=typeof c=="string"?ga(c):c,T=Fi(_.pathname||"/",l);if(T==null)return null;let w=Qm(d);ny(w);let R=null;for(let C=0;R==null&&C<w.length;++C){let m=py(T);R=dy(w[C],m,s)}return R}function Qm(d,c=[],l=[],s=""){let _=(T,w,R)=>{let C={relativePath:R===void 0?T.path||"":R,caseSensitive:T.caseSensitive===!0,childrenIndex:w,route:T};C.relativePath.startsWith("/")&&(Ie(C.relativePath.startsWith(s),`Absolute route path "${C.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),C.relativePath=C.relativePath.slice(s.length));let m=_i([s,C.relativePath]),x=l.concat(C);T.children&&T.children.length>0&&(Ie(T.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),Qm(T.children,c,x,m)),!(T.path==null&&!T.index)&&c.push({path:m,score:ly(m,T.index),routesMeta:x})};return d.forEach((T,w)=>{var R;if(T.path===""||!((R=T.path)!=null&&R.includes("?")))_(T,w);else for(let C of Fm(T.path))_(T,w,C)}),c}function Fm(d){let c=d.split("/");if(c.length===0)return[];let[l,...s]=c,_=l.endsWith("?"),T=l.replace(/\?$/,"");if(s.length===0)return _?[T,""]:[T];let w=Fm(s.join("/")),R=[];return R.push(...w.map(C=>C===""?T:[T,C].join("/"))),_&&R.push(...w),R.map(C=>d.startsWith("/")&&C===""?"/":C)}function ny(d){d.sort((c,l)=>c.score!==l.score?l.score-c.score:uy(c.routesMeta.map(s=>s.childrenIndex),l.routesMeta.map(s=>s.childrenIndex)))}var iy=/^:[\w-]+$/,ry=3,ay=2,sy=1,oy=10,cy=-2,Ih=d=>d==="*";function ly(d,c){let l=d.split("/"),s=l.length;return l.some(Ih)&&(s+=cy),c&&(s+=ay),l.filter(_=>!Ih(_)).reduce((_,T)=>_+(iy.test(T)?ry:T===""?sy:oy),s)}function uy(d,c){return d.length===c.length&&d.slice(0,-1).every((s,_)=>s===c[_])?d[d.length-1]-c[c.length-1]:0}function dy(d,c,l=!1){let{routesMeta:s}=d,_={},T="/",w=[];for(let R=0;R<s.length;++R){let C=s[R],m=R===s.length-1,x=T==="/"?c:c.slice(T.length)||"/",D=cc({path:C.relativePath,caseSensitive:C.caseSensitive,end:m},x),O=C.route;if(!D&&m&&l&&!s[s.length-1].route.index&&(D=cc({path:C.relativePath,caseSensitive:C.caseSensitive,end:!1},x)),!D)return null;Object.assign(_,D.params),w.push({params:_,pathname:_i([T,D.pathname]),pathnameBase:vy(_i([T,D.pathnameBase])),route:O}),D.pathnameBase!=="/"&&(T=_i([T,D.pathnameBase]))}return w}function cc(d,c){typeof d=="string"&&(d={path:d,caseSensitive:!1,end:!0});let[l,s]=fy(d.path,d.caseSensitive,d.end),_=c.match(l);if(!_)return null;let T=_[0],w=T.replace(/(.)\/+$/,"$1"),R=_.slice(1);return{params:s.reduce((m,{paramName:x,isOptional:D},O)=>{if(x==="*"){let b=R[O]||"";w=T.slice(0,T.length-b.length).replace(/(.)\/+$/,"$1")}const y=R[O];return D&&!y?m[x]=void 0:m[x]=(y||"").replace(/%2F/g,"/"),m},{}),pathname:T,pathnameBase:w,pattern:d}}function fy(d,c=!1,l=!0){cn(d==="*"||!d.endsWith("*")||d.endsWith("/*"),`Route path "${d}" will be treated as if it were "${d.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${d.replace(/\*$/,"/*")}".`);let s=[],_="^"+d.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(w,R,C)=>(s.push({paramName:R,isOptional:C!=null}),C?"/?([^\\/]+)?":"/([^\\/]+)"));return d.endsWith("*")?(s.push({paramName:"*"}),_+=d==="*"||d==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):l?_+="\\/*$":d!==""&&d!=="/"&&(_+="(?:(?=\\/|$))"),[new RegExp(_,c?void 0:"i"),s]}function py(d){try{return d.split("/").map(c=>decodeURIComponent(c).replace(/\//g,"%2F")).join("/")}catch(c){return cn(!1,`The URL path "${d}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${c}).`),d}}function Fi(d,c){if(c==="/")return d;if(!d.toLowerCase().startsWith(c.toLowerCase()))return null;let l=c.endsWith("/")?c.length-1:c.length,s=d.charAt(l);return s&&s!=="/"?null:d.slice(l)||"/"}function hy(d,c="/"){let{pathname:l,search:s="",hash:_=""}=typeof d=="string"?ga(d):d;return{pathname:l?l.startsWith("/")?l:my(l,c):c,search:_y(s),hash:yy(_)}}function my(d,c){let l=c.replace(/\/+$/,"").split("/");return d.split("/").forEach(_=>{_===".."?l.length>1&&l.pop():_!=="."&&l.push(_)}),l.length>1?l.join("/"):"/"}function Cu(d,c,l,s){return`Cannot include a '${d}' character in a manually specified \`to.${c}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${l}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function gy(d){return d.filter((c,l)=>l===0||c.route.path&&c.route.path.length>0)}function Ku(d){let c=gy(d);return c.map((l,s)=>s===c.length-1?l.pathname:l.pathnameBase)}function Xu(d,c,l,s=!1){let _;typeof d=="string"?_=ga(d):(_={...d},Ie(!_.pathname||!_.pathname.includes("?"),Cu("?","pathname","search",_)),Ie(!_.pathname||!_.pathname.includes("#"),Cu("#","pathname","hash",_)),Ie(!_.search||!_.search.includes("#"),Cu("#","search","hash",_)));let T=d===""||_.pathname==="",w=T?"/":_.pathname,R;if(w==null)R=l;else{let D=c.length-1;if(!s&&w.startsWith("..")){let O=w.split("/");for(;O[0]==="..";)O.shift(),D-=1;_.pathname=O.join("/")}R=D>=0?c[D]:"/"}let C=hy(_,R),m=w&&w!=="/"&&w.endsWith("/"),x=(T||w===".")&&l.endsWith("/");return!C.pathname.endsWith("/")&&(m||x)&&(C.pathname+="/"),C}var _i=d=>d.join("/").replace(/\/\/+/g,"/"),vy=d=>d.replace(/\/+$/,"").replace(/^\/*/,"/"),_y=d=>!d||d==="?"?"":d.startsWith("?")?d:"?"+d,yy=d=>!d||d==="#"?"":d.startsWith("#")?d:"#"+d;function by(d){return d!=null&&typeof d.status=="number"&&typeof d.statusText=="string"&&typeof d.internal=="boolean"&&"data"in d}var Km=["POST","PUT","PATCH","DELETE"];new Set(Km);var Sy=["GET",...Km];new Set(Sy);var va=$.createContext(null);va.displayName="DataRouter";var lc=$.createContext(null);lc.displayName="DataRouterState";var Xm=$.createContext({isTransitioning:!1});Xm.displayName="ViewTransition";var wy=$.createContext(new Map);wy.displayName="Fetchers";var Ry=$.createContext(null);Ry.displayName="Await";var kn=$.createContext(null);kn.displayName="Navigation";var js=$.createContext(null);js.displayName="Location";var jn=$.createContext({outlet:null,matches:[],isDataRoute:!1});jn.displayName="Route";var Zu=$.createContext(null);Zu.displayName="RouteError";function Ty(d,{relative:c}={}){Ie(_a(),"useHref() may be used only in the context of a <Router> component.");let{basename:l,navigator:s}=$.useContext(kn),{hash:_,pathname:T,search:w}=Bs(d,{relative:c}),R=T;return l!=="/"&&(R=T==="/"?l:_i([l,T])),s.createHref({pathname:R,search:w,hash:_})}function _a(){return $.useContext(js)!=null}function yi(){return Ie(_a(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(js).location}var Zm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function $m(d){$.useContext(kn).static||$.useLayoutEffect(d)}function Cr(){let{isDataRoute:d}=$.useContext(jn);return d?By():Cy()}function Cy(){Ie(_a(),"useNavigate() may be used only in the context of a <Router> component.");let d=$.useContext(va),{basename:c,navigator:l}=$.useContext(kn),{matches:s}=$.useContext(jn),{pathname:_}=yi(),T=JSON.stringify(Ku(s)),w=$.useRef(!1);return $m(()=>{w.current=!0}),$.useCallback((C,m={})=>{if(cn(w.current,Zm),!w.current)return;if(typeof C=="number"){l.go(C);return}let x=Xu(C,JSON.parse(T),_,m.relative==="path");d==null&&c!=="/"&&(x.pathname=x.pathname==="/"?c:_i([c,x.pathname])),(m.replace?l.replace:l.push)(x,m.state,m)},[c,l,T,_,d])}$.createContext(null);function Jm(){let{matches:d}=$.useContext(jn),c=d[d.length-1];return c?c.params:{}}function Bs(d,{relative:c}={}){let{matches:l}=$.useContext(jn),{pathname:s}=yi(),_=JSON.stringify(Ku(l));return $.useMemo(()=>Xu(d,JSON.parse(_),s,c==="path"),[d,_,s,c])}function Ey(d,c){return Wm(d,c)}function Wm(d,c,l,s){var h;Ie(_a(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:_,static:T}=$.useContext(kn),{matches:w}=$.useContext(jn),R=w[w.length-1],C=R?R.params:{},m=R?R.pathname:"/",x=R?R.pathnameBase:"/",D=R&&R.route;{let a=D&&D.path||"";eg(m,!D||a.endsWith("*")||a.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${a}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${a}"> to <Route path="${a==="/"?"*":`${a}/*`}">.`)}let O=yi(),y;if(c){let a=typeof c=="string"?ga(c):c;Ie(x==="/"||((h=a.pathname)==null?void 0:h.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${a.pathname}" was given in the \`location\` prop.`),y=a}else y=O;let b=y.pathname||"/",U=b;if(x!=="/"){let a=x.replace(/^\//,"").split("/");U="/"+b.replace(/^\//,"").split("/").slice(a.length).join("/")}let A=!T&&l&&l.matches&&l.matches.length>0?l.matches:Vm(d,{pathname:U});cn(D||A!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),cn(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=Ly(A&&A.map(a=>Object.assign({},a,{params:Object.assign({},C,a.params),pathname:_i([x,_.encodeLocation?_.encodeLocation(a.pathname).pathname:a.pathname]),pathnameBase:a.pathnameBase==="/"?x:_i([x,_.encodeLocation?_.encodeLocation(a.pathnameBase).pathname:a.pathnameBase])})),w,l,s);return c&&g?$.createElement(js.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},g):g}function Dy(){let d=jy(),c=by(d)?`${d.status} ${d.statusText}`:d instanceof Error?d.message:JSON.stringify(d),l=d instanceof Error?d.stack:null,s="rgba(200,200,200, 0.5)",_={padding:"0.5rem",backgroundColor:s},T={padding:"2px 4px",backgroundColor:s},w=null;return console.error("Error handled by React Router default ErrorBoundary:",d),w=$.createElement($.Fragment,null,$.createElement("p",null," Hey developer "),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:T},"ErrorBoundary")," or"," ",$.createElement("code",{style:T},"errorElement")," prop on your route.")),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},c),l?$.createElement("pre",{style:_},l):null,w)}var Oy=$.createElement(Dy,null),My=class extends $.Component{constructor(d){super(d),this.state={location:d.location,revalidation:d.revalidation,error:d.error}}static getDerivedStateFromError(d){return{error:d}}static getDerivedStateFromProps(d,c){return c.location!==d.location||c.revalidation!=="idle"&&d.revalidation==="idle"?{error:d.error,location:d.location,revalidation:d.revalidation}:{error:d.error!==void 0?d.error:c.error,location:c.location,revalidation:d.revalidation||c.revalidation}}componentDidCatch(d,c){console.error("React Router caught the following error during render",d,c)}render(){return this.state.error!==void 0?$.createElement(jn.Provider,{value:this.props.routeContext},$.createElement(Zu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function xy({routeContext:d,match:c,children:l}){let s=$.useContext(va);return s&&s.static&&s.staticContext&&(c.route.errorElement||c.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=c.route.id),$.createElement(jn.Provider,{value:d},l)}function Ly(d,c=[],l=null,s=null){if(d==null){if(!l)return null;if(l.errors)d=l.matches;else if(c.length===0&&!l.initialized&&l.matches.length>0)d=l.matches;else return null}let _=d,T=l==null?void 0:l.errors;if(T!=null){let C=_.findIndex(m=>m.route.id&&(T==null?void 0:T[m.route.id])!==void 0);Ie(C>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(T).join(",")}`),_=_.slice(0,Math.min(_.length,C+1))}let w=!1,R=-1;if(l)for(let C=0;C<_.length;C++){let m=_[C];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(R=C),m.route.id){let{loaderData:x,errors:D}=l,O=m.route.loader&&!x.hasOwnProperty(m.route.id)&&(!D||D[m.route.id]===void 0);if(m.route.lazy||O){w=!0,R>=0?_=_.slice(0,R+1):_=[_[0]];break}}}return _.reduceRight((C,m,x)=>{let D,O=!1,y=null,b=null;l&&(D=T&&m.route.id?T[m.route.id]:void 0,y=m.route.errorElement||Oy,w&&(R<0&&x===0?(eg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),O=!0,b=null):R===x&&(O=!0,b=m.route.hydrateFallbackElement||null)));let U=c.concat(_.slice(0,x+1)),A=()=>{let g;return D?g=y:O?g=b:m.route.Component?g=$.createElement(m.route.Component,null):m.route.element?g=m.route.element:g=C,$.createElement(xy,{match:m,routeContext:{outlet:C,matches:U,isDataRoute:l!=null},children:g})};return l&&(m.route.ErrorBoundary||m.route.errorElement||x===0)?$.createElement(My,{location:l.location,revalidation:l.revalidation,component:y,error:D,children:A(),routeContext:{outlet:null,matches:U,isDataRoute:!0}}):A()},null)}function $u(d){return`${d} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ay(d){let c=$.useContext(va);return Ie(c,$u(d)),c}function Py(d){let c=$.useContext(lc);return Ie(c,$u(d)),c}function Ny(d){let c=$.useContext(jn);return Ie(c,$u(d)),c}function Ju(d){let c=Ny(d),l=c.matches[c.matches.length-1];return Ie(l.route.id,`${d} can only be used on routes that contain a unique "id"`),l.route.id}function ky(){return Ju("useRouteId")}function jy(){var s;let d=$.useContext(Zu),c=Py("useRouteError"),l=Ju("useRouteError");return d!==void 0?d:(s=c.errors)==null?void 0:s[l]}function By(){let{router:d}=Ay("useNavigate"),c=Ju("useNavigate"),l=$.useRef(!1);return $m(()=>{l.current=!0}),$.useCallback(async(_,T={})=>{cn(l.current,Zm),l.current&&(typeof _=="number"?d.navigate(_):await d.navigate(_,{fromRouteId:c,...T}))},[d,c])}var Hh={};function eg(d,c,l){!c&&!Hh[d]&&(Hh[d]=!0,cn(!1,l))}$.memo(Uy);function Uy({routes:d,future:c,state:l}){return Wm(d,void 0,l,c)}function zy({to:d,replace:c,state:l,relative:s}){Ie(_a(),"<Navigate> may be used only in the context of a <Router> component.");let{static:_}=$.useContext(kn);cn(!_,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:T}=$.useContext(jn),{pathname:w}=yi(),R=Cr(),C=Xu(d,Ku(T),w,s==="path"),m=JSON.stringify(C);return $.useEffect(()=>{R(JSON.parse(m),{replace:c,state:l,relative:s})},[R,m,s,c,l]),null}function As(d){Ie(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function qy({basename:d="/",children:c=null,location:l,navigationType:s="POP",navigator:_,static:T=!1}){Ie(!_a(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let w=d.replace(/^\/*/,"/"),R=$.useMemo(()=>({basename:w,navigator:_,static:T,future:{}}),[w,_,T]);typeof l=="string"&&(l=ga(l));let{pathname:C="/",search:m="",hash:x="",state:D=null,key:O="default"}=l,y=$.useMemo(()=>{let b=Fi(C,w);return b==null?null:{location:{pathname:b,search:m,hash:x,state:D,key:O},navigationType:s}},[w,C,m,x,D,O,s]);return cn(y!=null,`<Router basename="${w}"> is not able to match the URL "${C}${m}${x}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:$.createElement(kn.Provider,{value:R},$.createElement(js.Provider,{children:c,value:y}))}function Iy({children:d,location:c}){return Ey(zu(d),c)}function zu(d,c=[]){let l=[];return $.Children.forEach(d,(s,_)=>{if(!$.isValidElement(s))return;let T=[...c,_];if(s.type===$.Fragment){l.push.apply(l,zu(s.props.children,T));return}Ie(s.type===As,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ie(!s.props.index||!s.props.children,"An index route cannot have child routes.");let w={id:s.props.id||T.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(w.children=zu(s.props.children,T)),l.push(w)}),l}var nc="get",ic="application/x-www-form-urlencoded";function uc(d){return d!=null&&typeof d.tagName=="string"}function Hy(d){return uc(d)&&d.tagName.toLowerCase()==="button"}function Gy(d){return uc(d)&&d.tagName.toLowerCase()==="form"}function Yy(d){return uc(d)&&d.tagName.toLowerCase()==="input"}function Vy(d){return!!(d.metaKey||d.altKey||d.ctrlKey||d.shiftKey)}function Qy(d,c){return d.button===0&&(!c||c==="_self")&&!Vy(d)}function qu(d=""){return new URLSearchParams(typeof d=="string"||Array.isArray(d)||d instanceof URLSearchParams?d:Object.keys(d).reduce((c,l)=>{let s=d[l];return c.concat(Array.isArray(s)?s.map(_=>[l,_]):[[l,s]])},[]))}function Fy(d,c){let l=qu(d);return c&&c.forEach((s,_)=>{l.has(_)||c.getAll(_).forEach(T=>{l.append(_,T)})}),l}var Xo=null;function Ky(){if(Xo===null)try{new FormData(document.createElement("form"),0),Xo=!1}catch{Xo=!0}return Xo}var Xy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Eu(d){return d!=null&&!Xy.has(d)?(cn(!1,`"${d}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ic}"`),null):d}function Zy(d,c){let l,s,_,T,w;if(Gy(d)){let R=d.getAttribute("action");s=R?Fi(R,c):null,l=d.getAttribute("method")||nc,_=Eu(d.getAttribute("enctype"))||ic,T=new FormData(d)}else if(Hy(d)||Yy(d)&&(d.type==="submit"||d.type==="image")){let R=d.form;if(R==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let C=d.getAttribute("formaction")||R.getAttribute("action");if(s=C?Fi(C,c):null,l=d.getAttribute("formmethod")||R.getAttribute("method")||nc,_=Eu(d.getAttribute("formenctype"))||Eu(R.getAttribute("enctype"))||ic,T=new FormData(R,d),!Ky()){let{name:m,type:x,value:D}=d;if(x==="image"){let O=m?`${m}.`:"";T.append(`${O}x`,"0"),T.append(`${O}y`,"0")}else m&&T.append(m,D)}}else{if(uc(d))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');l=nc,s=null,_=ic,w=d}return T&&_==="text/plain"&&(w=T,T=void 0),{action:s,method:l.toLowerCase(),encType:_,formData:T,body:w}}function Wu(d,c){if(d===!1||d===null||typeof d>"u")throw new Error(c)}async function $y(d,c){if(d.id in c)return c[d.id];try{let l=await import(d.module);return c[d.id]=l,l}catch(l){return console.error(`Error loading route module \`${d.module}\`, reloading page...`),console.error(l),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Jy(d){return d==null?!1:d.href==null?d.rel==="preload"&&typeof d.imageSrcSet=="string"&&typeof d.imageSizes=="string":typeof d.rel=="string"&&typeof d.href=="string"}async function Wy(d,c,l){let s=await Promise.all(d.map(async _=>{let T=c.routes[_.route.id];if(T){let w=await $y(T,l);return w.links?w.links():[]}return[]}));return ib(s.flat(1).filter(Jy).filter(_=>_.rel==="stylesheet"||_.rel==="preload").map(_=>_.rel==="stylesheet"?{..._,rel:"prefetch",as:"style"}:{..._,rel:"prefetch"}))}function Gh(d,c,l,s,_,T){let w=(C,m)=>l[m]?C.route.id!==l[m].route.id:!0,R=(C,m)=>{var x;return l[m].pathname!==C.pathname||((x=l[m].route.path)==null?void 0:x.endsWith("*"))&&l[m].params["*"]!==C.params["*"]};return T==="assets"?c.filter((C,m)=>w(C,m)||R(C,m)):T==="data"?c.filter((C,m)=>{var D;let x=s.routes[C.route.id];if(!x||!x.hasLoader)return!1;if(w(C,m)||R(C,m))return!0;if(C.route.shouldRevalidate){let O=C.route.shouldRevalidate({currentUrl:new URL(_.pathname+_.search+_.hash,window.origin),currentParams:((D=l[0])==null?void 0:D.params)||{},nextUrl:new URL(d,window.origin),nextParams:C.params,defaultShouldRevalidate:!0});if(typeof O=="boolean")return O}return!0}):[]}function eb(d,c,{includeHydrateFallback:l}={}){return tb(d.map(s=>{let _=c.routes[s.route.id];if(!_)return[];let T=[_.module];return _.clientActionModule&&(T=T.concat(_.clientActionModule)),_.clientLoaderModule&&(T=T.concat(_.clientLoaderModule)),l&&_.hydrateFallbackModule&&(T=T.concat(_.hydrateFallbackModule)),_.imports&&(T=T.concat(_.imports)),T}).flat(1))}function tb(d){return[...new Set(d)]}function nb(d){let c={},l=Object.keys(d).sort();for(let s of l)c[s]=d[s];return c}function ib(d,c){let l=new Set;return new Set(c),d.reduce((s,_)=>{let T=JSON.stringify(nb(_));return l.has(T)||(l.add(T),s.push({key:T,link:_})),s},[])}function rb(d){let c=typeof d=="string"?new URL(d,typeof window>"u"?"server://singlefetch/":window.location.origin):d;return c.pathname==="/"?c.pathname="_root.data":c.pathname=`${c.pathname.replace(/\/$/,"")}.data`,c}function ab(){let d=$.useContext(va);return Wu(d,"You must render this element inside a <DataRouterContext.Provider> element"),d}function sb(){let d=$.useContext(lc);return Wu(d,"You must render this element inside a <DataRouterStateContext.Provider> element"),d}var ed=$.createContext(void 0);ed.displayName="FrameworkContext";function tg(){let d=$.useContext(ed);return Wu(d,"You must render this element inside a <HydratedRouter> element"),d}function ob(d,c){let l=$.useContext(ed),[s,_]=$.useState(!1),[T,w]=$.useState(!1),{onFocus:R,onBlur:C,onMouseEnter:m,onMouseLeave:x,onTouchStart:D}=c,O=$.useRef(null);$.useEffect(()=>{if(d==="render"&&w(!0),d==="viewport"){let U=g=>{g.forEach(h=>{w(h.isIntersecting)})},A=new IntersectionObserver(U,{threshold:.5});return O.current&&A.observe(O.current),()=>{A.disconnect()}}},[d]),$.useEffect(()=>{if(s){let U=setTimeout(()=>{w(!0)},100);return()=>{clearTimeout(U)}}},[s]);let y=()=>{_(!0)},b=()=>{_(!1),w(!1)};return l?d!=="intent"?[T,O,{}]:[T,O,{onFocus:Ss(R,y),onBlur:Ss(C,b),onMouseEnter:Ss(m,y),onMouseLeave:Ss(x,b),onTouchStart:Ss(D,y)}]:[!1,O,{}]}function Ss(d,c){return l=>{d&&d(l),l.defaultPrevented||c(l)}}function cb({page:d,...c}){let{router:l}=ab(),s=$.useMemo(()=>Vm(l.routes,d,l.basename),[l.routes,d,l.basename]);return s?$.createElement(ub,{page:d,matches:s,...c}):null}function lb(d){let{manifest:c,routeModules:l}=tg(),[s,_]=$.useState([]);return $.useEffect(()=>{let T=!1;return Wy(d,c,l).then(w=>{T||_(w)}),()=>{T=!0}},[d,c,l]),s}function ub({page:d,matches:c,...l}){let s=yi(),{manifest:_,routeModules:T}=tg(),{loaderData:w,matches:R}=sb(),C=$.useMemo(()=>Gh(d,c,R,_,s,"data"),[d,c,R,_,s]),m=$.useMemo(()=>Gh(d,c,R,_,s,"assets"),[d,c,R,_,s]),x=$.useMemo(()=>{if(d===s.pathname+s.search+s.hash)return[];let y=new Set,b=!1;if(c.forEach(A=>{var h;let g=_.routes[A.route.id];!g||!g.hasLoader||(!C.some(a=>a.route.id===A.route.id)&&A.route.id in w&&((h=T[A.route.id])!=null&&h.shouldRevalidate)||g.hasClientLoader?b=!0:y.add(A.route.id))}),y.size===0)return[];let U=rb(d);return b&&y.size>0&&U.searchParams.set("_routes",c.filter(A=>y.has(A.route.id)).map(A=>A.route.id).join(",")),[U.pathname+U.search]},[w,s,_,C,c,d,T]),D=$.useMemo(()=>eb(m,_),[m,_]),O=lb(m);return $.createElement($.Fragment,null,x.map(y=>$.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...l})),D.map(y=>$.createElement("link",{key:y,rel:"modulepreload",href:y,...l})),O.map(({key:y,link:b})=>$.createElement("link",{key:y,...b})))}function db(...d){return c=>{d.forEach(l=>{typeof l=="function"?l(c):l!=null&&(l.current=c)})}}var ng=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ng&&(window.__reactRouterVersion="7.2.0")}catch{}function fb({basename:d,children:c,window:l}){let s=$.useRef();s.current==null&&(s.current=J_({window:l,v5Compat:!0}));let _=s.current,[T,w]=$.useState({action:_.action,location:_.location}),R=$.useCallback(C=>{$.startTransition(()=>w(C))},[w]);return $.useLayoutEffect(()=>_.listen(R),[_,R]),$.createElement(qy,{basename:d,children:c,location:T.location,navigationType:T.action,navigator:_})}var ig=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rg=$.forwardRef(function({onClick:c,discover:l="render",prefetch:s="none",relative:_,reloadDocument:T,replace:w,state:R,target:C,to:m,preventScrollReset:x,viewTransition:D,...O},y){let{basename:b}=$.useContext(kn),U=typeof m=="string"&&ig.test(m),A,g=!1;if(typeof m=="string"&&U&&(A=m,ng))try{let v=new URL(window.location.href),M=m.startsWith("//")?new URL(v.protocol+m):new URL(m),N=Fi(M.pathname,b);M.origin===v.origin&&N!=null?m=N+M.search+M.hash:g=!0}catch{cn(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let h=Ty(m,{relative:_}),[a,r,u]=ob(s,O),p=gb(m,{replace:w,state:R,target:C,preventScrollReset:x,relative:_,viewTransition:D});function S(v){c&&c(v),v.defaultPrevented||p(v)}let P=$.createElement("a",{...O,...u,href:A||h,onClick:g||T?c:S,ref:db(y,r),target:C,"data-discover":!U&&l==="render"?"true":void 0});return a&&!U?$.createElement($.Fragment,null,P,$.createElement(cb,{page:h})):P});rg.displayName="Link";var pb=$.forwardRef(function({"aria-current":c="page",caseSensitive:l=!1,className:s="",end:_=!1,style:T,to:w,viewTransition:R,children:C,...m},x){let D=Bs(w,{relative:m.relative}),O=yi(),y=$.useContext(lc),{navigator:b,basename:U}=$.useContext(kn),A=y!=null&&wb(D)&&R===!0,g=b.encodeLocation?b.encodeLocation(D).pathname:D.pathname,h=O.pathname,a=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;l||(h=h.toLowerCase(),a=a?a.toLowerCase():null,g=g.toLowerCase()),a&&U&&(a=Fi(a,U)||a);const r=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let u=h===g||!_&&h.startsWith(g)&&h.charAt(r)==="/",p=a!=null&&(a===g||!_&&a.startsWith(g)&&a.charAt(g.length)==="/"),S={isActive:u,isPending:p,isTransitioning:A},P=u?c:void 0,v;typeof s=="function"?v=s(S):v=[s,u?"active":null,p?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let M=typeof T=="function"?T(S):T;return $.createElement(rg,{...m,"aria-current":P,className:v,ref:x,style:M,to:w,viewTransition:R},typeof C=="function"?C(S):C)});pb.displayName="NavLink";var hb=$.forwardRef(({discover:d="render",fetcherKey:c,navigate:l,reloadDocument:s,replace:_,state:T,method:w=nc,action:R,onSubmit:C,relative:m,preventScrollReset:x,viewTransition:D,...O},y)=>{let b=bb(),U=Sb(R,{relative:m}),A=w.toLowerCase()==="get"?"get":"post",g=typeof R=="string"&&ig.test(R),h=a=>{if(C&&C(a),a.defaultPrevented)return;a.preventDefault();let r=a.nativeEvent.submitter,u=(r==null?void 0:r.getAttribute("formmethod"))||w;b(r||a.currentTarget,{fetcherKey:c,method:u,navigate:l,replace:_,state:T,relative:m,preventScrollReset:x,viewTransition:D})};return $.createElement("form",{ref:y,method:A,action:U,onSubmit:s?C:h,...O,"data-discover":!g&&d==="render"?"true":void 0})});hb.displayName="Form";function mb(d){return`${d} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ag(d){let c=$.useContext(va);return Ie(c,mb(d)),c}function gb(d,{target:c,replace:l,state:s,preventScrollReset:_,relative:T,viewTransition:w}={}){let R=Cr(),C=yi(),m=Bs(d,{relative:T});return $.useCallback(x=>{if(Qy(x,c)){x.preventDefault();let D=l!==void 0?l:ks(C)===ks(m);R(d,{replace:D,state:s,preventScrollReset:_,relative:T,viewTransition:w})}},[C,R,m,l,s,c,d,_,T,w])}function vb(d){cn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let c=$.useRef(qu(d)),l=$.useRef(!1),s=yi(),_=$.useMemo(()=>Fy(s.search,l.current?null:c.current),[s.search]),T=Cr(),w=$.useCallback((R,C)=>{const m=qu(typeof R=="function"?R(_):R);l.current=!0,T("?"+m,C)},[T,_]);return[_,w]}var _b=0,yb=()=>`__${String(++_b)}__`;function bb(){let{router:d}=ag("useSubmit"),{basename:c}=$.useContext(kn),l=ky();return $.useCallback(async(s,_={})=>{let{action:T,method:w,encType:R,formData:C,body:m}=Zy(s,c);if(_.navigate===!1){let x=_.fetcherKey||yb();await d.fetch(x,l,_.action||T,{preventScrollReset:_.preventScrollReset,formData:C,body:m,formMethod:_.method||w,formEncType:_.encType||R,flushSync:_.flushSync})}else await d.navigate(_.action||T,{preventScrollReset:_.preventScrollReset,formData:C,body:m,formMethod:_.method||w,formEncType:_.encType||R,replace:_.replace,state:_.state,fromRouteId:l,flushSync:_.flushSync,viewTransition:_.viewTransition})},[d,c,l])}function Sb(d,{relative:c}={}){let{basename:l}=$.useContext(kn),s=$.useContext(jn);Ie(s,"useFormAction must be used inside a RouteContext");let[_]=s.matches.slice(-1),T={...Bs(d||".",{relative:c})},w=yi();if(d==null){T.search=w.search;let R=new URLSearchParams(T.search),C=R.getAll("index");if(C.some(x=>x==="")){R.delete("index"),C.filter(D=>D).forEach(D=>R.append("index",D));let x=R.toString();T.search=x?`?${x}`:""}}return(!d||d===".")&&_.route.index&&(T.search=T.search?T.search.replace(/^\?/,"?index&"):"?index"),l!=="/"&&(T.pathname=T.pathname==="/"?l:_i([l,T.pathname])),ks(T)}function wb(d,c={}){let l=$.useContext(Xm);Ie(l!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=ag("useViewTransitionState"),_=Bs(d,{relative:c.relative});if(!l.isTransitioning)return!1;let T=Fi(l.currentLocation.pathname,s)||l.currentLocation.pathname,w=Fi(l.nextLocation.pathname,s)||l.nextLocation.pathname;return cc(_.pathname,w)!=null||cc(_.pathname,T)!=null}new TextEncoder;const Wn=Object.create(null);Wn.open="0";Wn.close="1";Wn.ping="2";Wn.pong="3";Wn.message="4";Wn.upgrade="5";Wn.noop="6";const rc=Object.create(null);Object.keys(Wn).forEach(d=>{rc[Wn[d]]=d});const Iu={type:"error",data:"parser error"},sg=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",og=typeof ArrayBuffer=="function",cg=d=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(d):d&&d.buffer instanceof ArrayBuffer,td=({type:d,data:c},l,s)=>sg&&c instanceof Blob?l?s(c):Yh(c,s):og&&(c instanceof ArrayBuffer||cg(c))?l?s(c):Yh(new Blob([c]),s):s(Wn[d]+(c||"")),Yh=(d,c)=>{const l=new FileReader;return l.onload=function(){const s=l.result.split(",")[1];c("b"+(s||""))},l.readAsDataURL(d)};function Vh(d){return d instanceof Uint8Array?d:d instanceof ArrayBuffer?new Uint8Array(d):new Uint8Array(d.buffer,d.byteOffset,d.byteLength)}let Du;function Rb(d,c){if(sg&&d.data instanceof Blob)return d.data.arrayBuffer().then(Vh).then(c);if(og&&(d.data instanceof ArrayBuffer||cg(d.data)))return c(Vh(d.data));td(d,!1,l=>{Du||(Du=new TextEncoder),c(Du.encode(l))})}const Qh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ps=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let d=0;d<Qh.length;d++)Ps[Qh.charCodeAt(d)]=d;const Tb=d=>{let c=d.length*.75,l=d.length,s,_=0,T,w,R,C;d[d.length-1]==="="&&(c--,d[d.length-2]==="="&&c--);const m=new ArrayBuffer(c),x=new Uint8Array(m);for(s=0;s<l;s+=4)T=Ps[d.charCodeAt(s)],w=Ps[d.charCodeAt(s+1)],R=Ps[d.charCodeAt(s+2)],C=Ps[d.charCodeAt(s+3)],x[_++]=T<<2|w>>4,x[_++]=(w&15)<<4|R>>2,x[_++]=(R&3)<<6|C&63;return m},Cb=typeof ArrayBuffer=="function",nd=(d,c)=>{if(typeof d!="string")return{type:"message",data:lg(d,c)};const l=d.charAt(0);return l==="b"?{type:"message",data:Eb(d.substring(1),c)}:rc[l]?d.length>1?{type:rc[l],data:d.substring(1)}:{type:rc[l]}:Iu},Eb=(d,c)=>{if(Cb){const l=Tb(d);return lg(l,c)}else return{base64:!0,data:d}},lg=(d,c)=>{switch(c){case"blob":return d instanceof Blob?d:new Blob([d]);case"arraybuffer":default:return d instanceof ArrayBuffer?d:d.buffer}},ug="",Db=(d,c)=>{const l=d.length,s=new Array(l);let _=0;d.forEach((T,w)=>{td(T,!1,R=>{s[w]=R,++_===l&&c(s.join(ug))})})},Ob=(d,c)=>{const l=d.split(ug),s=[];for(let _=0;_<l.length;_++){const T=nd(l[_],c);if(s.push(T),T.type==="error")break}return s};function Mb(){return new TransformStream({transform(d,c){Rb(d,l=>{const s=l.length;let _;if(s<126)_=new Uint8Array(1),new DataView(_.buffer).setUint8(0,s);else if(s<65536){_=new Uint8Array(3);const T=new DataView(_.buffer);T.setUint8(0,126),T.setUint16(1,s)}else{_=new Uint8Array(9);const T=new DataView(_.buffer);T.setUint8(0,127),T.setBigUint64(1,BigInt(s))}d.data&&typeof d.data!="string"&&(_[0]|=128),c.enqueue(_),c.enqueue(l)})}})}let Ou;function Zo(d){return d.reduce((c,l)=>c+l.length,0)}function $o(d,c){if(d[0].length===c)return d.shift();const l=new Uint8Array(c);let s=0;for(let _=0;_<c;_++)l[_]=d[0][s++],s===d[0].length&&(d.shift(),s=0);return d.length&&s<d[0].length&&(d[0]=d[0].slice(s)),l}function xb(d,c){Ou||(Ou=new TextDecoder);const l=[];let s=0,_=-1,T=!1;return new TransformStream({transform(w,R){for(l.push(w);;){if(s===0){if(Zo(l)<1)break;const C=$o(l,1);T=(C[0]&128)===128,_=C[0]&127,_<126?s=3:_===126?s=1:s=2}else if(s===1){if(Zo(l)<2)break;const C=$o(l,2);_=new DataView(C.buffer,C.byteOffset,C.length).getUint16(0),s=3}else if(s===2){if(Zo(l)<8)break;const C=$o(l,8),m=new DataView(C.buffer,C.byteOffset,C.length),x=m.getUint32(0);if(x>Math.pow(2,21)-1){R.enqueue(Iu);break}_=x*Math.pow(2,32)+m.getUint32(4),s=3}else{if(Zo(l)<_)break;const C=$o(l,_);R.enqueue(nd(T?C:Ou.decode(C),c)),s=0}if(_===0||_>d){R.enqueue(Iu);break}}}})}const dg=4;function it(d){if(d)return Lb(d)}function Lb(d){for(var c in it.prototype)d[c]=it.prototype[c];return d}it.prototype.on=it.prototype.addEventListener=function(d,c){return this._callbacks=this._callbacks||{},(this._callbacks["$"+d]=this._callbacks["$"+d]||[]).push(c),this};it.prototype.once=function(d,c){function l(){this.off(d,l),c.apply(this,arguments)}return l.fn=c,this.on(d,l),this};it.prototype.off=it.prototype.removeListener=it.prototype.removeAllListeners=it.prototype.removeEventListener=function(d,c){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var l=this._callbacks["$"+d];if(!l)return this;if(arguments.length==1)return delete this._callbacks["$"+d],this;for(var s,_=0;_<l.length;_++)if(s=l[_],s===c||s.fn===c){l.splice(_,1);break}return l.length===0&&delete this._callbacks["$"+d],this};it.prototype.emit=function(d){this._callbacks=this._callbacks||{};for(var c=new Array(arguments.length-1),l=this._callbacks["$"+d],s=1;s<arguments.length;s++)c[s-1]=arguments[s];if(l){l=l.slice(0);for(var s=0,_=l.length;s<_;++s)l[s].apply(this,c)}return this};it.prototype.emitReserved=it.prototype.emit;it.prototype.listeners=function(d){return this._callbacks=this._callbacks||{},this._callbacks["$"+d]||[]};it.prototype.hasListeners=function(d){return!!this.listeners(d).length};const dc=typeof Promise=="function"&&typeof Promise.resolve=="function"?c=>Promise.resolve().then(c):(c,l)=>l(c,0),on=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Ab="arraybuffer";function fg(d,...c){return c.reduce((l,s)=>(d.hasOwnProperty(s)&&(l[s]=d[s]),l),{})}const Pb=on.setTimeout,Nb=on.clearTimeout;function fc(d,c){c.useNativeTimers?(d.setTimeoutFn=Pb.bind(on),d.clearTimeoutFn=Nb.bind(on)):(d.setTimeoutFn=on.setTimeout.bind(on),d.clearTimeoutFn=on.clearTimeout.bind(on))}const kb=1.33;function jb(d){return typeof d=="string"?Bb(d):Math.ceil((d.byteLength||d.size)*kb)}function Bb(d){let c=0,l=0;for(let s=0,_=d.length;s<_;s++)c=d.charCodeAt(s),c<128?l+=1:c<2048?l+=2:c<55296||c>=57344?l+=3:(s++,l+=4);return l}function pg(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Ub(d){let c="";for(let l in d)d.hasOwnProperty(l)&&(c.length&&(c+="&"),c+=encodeURIComponent(l)+"="+encodeURIComponent(d[l]));return c}function zb(d){let c={},l=d.split("&");for(let s=0,_=l.length;s<_;s++){let T=l[s].split("=");c[decodeURIComponent(T[0])]=decodeURIComponent(T[1])}return c}class qb extends Error{constructor(c,l,s){super(c),this.description=l,this.context=s,this.type="TransportError"}}let id=class extends it{constructor(c){super(),this.writable=!1,fc(this,c),this.opts=c,this.query=c.query,this.socket=c.socket,this.supportsBinary=!c.forceBase64}onError(c,l,s){return super.emitReserved("error",new qb(c,l,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(c){this.readyState==="open"&&this.write(c)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(c){const l=nd(c,this.socket.binaryType);this.onPacket(l)}onPacket(c){super.emitReserved("packet",c)}onClose(c){this.readyState="closed",super.emitReserved("close",c)}pause(c){}createUri(c,l={}){return c+"://"+this._hostname()+this._port()+this.opts.path+this._query(l)}_hostname(){const c=this.opts.hostname;return c.indexOf(":")===-1?c:"["+c+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(c){const l=Ub(c);return l.length?"?"+l:""}};class Ib extends id{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(c){this.readyState="pausing";const l=()=>{this.readyState="paused",c()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||l()})),this.writable||(s++,this.once("drain",function(){--s||l()}))}else l()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(c){const l=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};Ob(c,this.socket.binaryType).forEach(l),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const c=()=>{this.write([{type:"close"}])};this.readyState==="open"?c():this.once("open",c)}write(c){this.writable=!1,Db(c,l=>{this.doWrite(l,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const c=this.opts.secure?"https":"http",l=this.query||{};return this.opts.timestampRequests!==!1&&(l[this.opts.timestampParam]=pg()),!this.supportsBinary&&!l.sid&&(l.b64=1),this.createUri(c,l)}}let hg=!1;try{hg=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Hb=hg;function Gb(){}class Yb extends Ib{constructor(c){if(super(c),typeof location<"u"){const l=location.protocol==="https:";let s=location.port;s||(s=l?"443":"80"),this.xd=typeof location<"u"&&c.hostname!==location.hostname||s!==c.port}}doWrite(c,l){const s=this.request({method:"POST",data:c});s.on("success",l),s.on("error",(_,T)=>{this.onError("xhr post error",_,T)})}doPoll(){const c=this.request();c.on("data",this.onData.bind(this)),c.on("error",(l,s)=>{this.onError("xhr poll error",l,s)}),this.pollXhr=c}}class Jn extends it{constructor(c,l,s){super(),this.createRequest=c,fc(this,s),this._opts=s,this._method=s.method||"GET",this._uri=l,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var c;const l=fg(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");l.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(l);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let _ in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(_)&&s.setRequestHeader(_,this._opts.extraHeaders[_])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(c=this._opts.cookieJar)===null||c===void 0||c.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var _;s.readyState===3&&((_=this._opts.cookieJar)===null||_===void 0||_.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(_){this.setTimeoutFn(()=>{this._onError(_)},0);return}typeof document<"u"&&(this._index=Jn.requestsCount++,Jn.requests[this._index]=this)}_onError(c){this.emitReserved("error",c,this._xhr),this._cleanup(!0)}_cleanup(c){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Gb,c)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Jn.requests[this._index],this._xhr=null}}_onLoad(){const c=this._xhr.responseText;c!==null&&(this.emitReserved("data",c),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Jn.requestsCount=0;Jn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Fh);else if(typeof addEventListener=="function"){const d="onpagehide"in on?"pagehide":"unload";addEventListener(d,Fh,!1)}}function Fh(){for(let d in Jn.requests)Jn.requests.hasOwnProperty(d)&&Jn.requests[d].abort()}const Vb=function(){const d=mg({xdomain:!1});return d&&d.responseType!==null}();class Qb extends Yb{constructor(c){super(c);const l=c&&c.forceBase64;this.supportsBinary=Vb&&!l}request(c={}){return Object.assign(c,{xd:this.xd},this.opts),new Jn(mg,this.uri(),c)}}function mg(d){const c=d.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!c||Hb))return new XMLHttpRequest}catch{}if(!c)try{return new on[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const gg=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Fb extends id{get name(){return"websocket"}doOpen(){const c=this.uri(),l=this.opts.protocols,s=gg?{}:fg(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(c,l,s)}catch(_){return this.emitReserved("error",_)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=c=>this.onClose({description:"websocket connection closed",context:c}),this.ws.onmessage=c=>this.onData(c.data),this.ws.onerror=c=>this.onError("websocket error",c)}write(c){this.writable=!1;for(let l=0;l<c.length;l++){const s=c[l],_=l===c.length-1;td(s,this.supportsBinary,T=>{try{this.doWrite(s,T)}catch{}_&&dc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const c=this.opts.secure?"wss":"ws",l=this.query||{};return this.opts.timestampRequests&&(l[this.opts.timestampParam]=pg()),this.supportsBinary||(l.b64=1),this.createUri(c,l)}}const Mu=on.WebSocket||on.MozWebSocket;class Kb extends Fb{createSocket(c,l,s){return gg?new Mu(c,l,s):l?new Mu(c,l):new Mu(c)}doWrite(c,l){this.ws.send(l)}}class Xb extends id{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(c){return this.emitReserved("error",c)}this._transport.closed.then(()=>{this.onClose()}).catch(c=>{this.onError("webtransport error",c)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(c=>{const l=xb(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=c.readable.pipeThrough(l).getReader(),_=Mb();_.readable.pipeTo(c.writable),this._writer=_.writable.getWriter();const T=()=>{s.read().then(({done:R,value:C})=>{R||(this.onPacket(C),T())}).catch(R=>{})};T();const w={type:"open"};this.query.sid&&(w.data=`{"sid":"${this.query.sid}"}`),this._writer.write(w).then(()=>this.onOpen())})})}write(c){this.writable=!1;for(let l=0;l<c.length;l++){const s=c[l],_=l===c.length-1;this._writer.write(s).then(()=>{_&&dc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var c;(c=this._transport)===null||c===void 0||c.close()}}const Zb={websocket:Kb,webtransport:Xb,polling:Qb},$b=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Jb=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Hu(d){if(d.length>8e3)throw"URI too long";const c=d,l=d.indexOf("["),s=d.indexOf("]");l!=-1&&s!=-1&&(d=d.substring(0,l)+d.substring(l,s).replace(/:/g,";")+d.substring(s,d.length));let _=$b.exec(d||""),T={},w=14;for(;w--;)T[Jb[w]]=_[w]||"";return l!=-1&&s!=-1&&(T.source=c,T.host=T.host.substring(1,T.host.length-1).replace(/;/g,":"),T.authority=T.authority.replace("[","").replace("]","").replace(/;/g,":"),T.ipv6uri=!0),T.pathNames=Wb(T,T.path),T.queryKey=eS(T,T.query),T}function Wb(d,c){const l=/\/{2,9}/g,s=c.replace(l,"/").split("/");return(c.slice(0,1)=="/"||c.length===0)&&s.splice(0,1),c.slice(-1)=="/"&&s.splice(s.length-1,1),s}function eS(d,c){const l={};return c.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,_,T){_&&(l[_]=T)}),l}const Gu=typeof addEventListener=="function"&&typeof removeEventListener=="function",ac=[];Gu&&addEventListener("offline",()=>{ac.forEach(d=>d())},!1);class Qi extends it{constructor(c,l){if(super(),this.binaryType=Ab,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,c&&typeof c=="object"&&(l=c,c=null),c){const s=Hu(c);l.hostname=s.host,l.secure=s.protocol==="https"||s.protocol==="wss",l.port=s.port,s.query&&(l.query=s.query)}else l.host&&(l.hostname=Hu(l.host).host);fc(this,l),this.secure=l.secure!=null?l.secure:typeof location<"u"&&location.protocol==="https:",l.hostname&&!l.port&&(l.port=this.secure?"443":"80"),this.hostname=l.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=l.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},l.transports.forEach(s=>{const _=s.prototype.name;this.transports.push(_),this._transportsByName[_]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},l),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=zb(this.opts.query)),Gu&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ac.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(c){const l=Object.assign({},this.opts.query);l.EIO=dg,l.transport=c,this.id&&(l.sid=this.id);const s=Object.assign({},this.opts,{query:l,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[c]);return new this._transportsByName[c](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const c=this.opts.rememberUpgrade&&Qi.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const l=this.createTransport(c);l.open(),this.setTransport(l)}setTransport(c){this.transport&&this.transport.removeAllListeners(),this.transport=c,c.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",l=>this._onClose("transport close",l))}onOpen(){this.readyState="open",Qi.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(c){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",c),this.emitReserved("heartbeat"),c.type){case"open":this.onHandshake(JSON.parse(c.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const l=new Error("server error");l.code=c.data,this._onError(l);break;case"message":this.emitReserved("data",c.data),this.emitReserved("message",c.data);break}}onHandshake(c){this.emitReserved("handshake",c),this.id=c.sid,this.transport.query.sid=c.sid,this._pingInterval=c.pingInterval,this._pingTimeout=c.pingTimeout,this._maxPayload=c.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const c=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+c,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},c),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const c=this._getWritablePackets();this.transport.send(c),this._prevBufferLen=c.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let l=1;for(let s=0;s<this.writeBuffer.length;s++){const _=this.writeBuffer[s].data;if(_&&(l+=jb(_)),s>0&&l>this._maxPayload)return this.writeBuffer.slice(0,s);l+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const c=Date.now()>this._pingTimeoutTime;return c&&(this._pingTimeoutTime=0,dc(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),c}write(c,l,s){return this._sendPacket("message",c,l,s),this}send(c,l,s){return this._sendPacket("message",c,l,s),this}_sendPacket(c,l,s,_){if(typeof l=="function"&&(_=l,l=void 0),typeof s=="function"&&(_=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const T={type:c,data:l,options:s};this.emitReserved("packetCreate",T),this.writeBuffer.push(T),_&&this.once("flush",_),this.flush()}close(){const c=()=>{this._onClose("forced close"),this.transport.close()},l=()=>{this.off("upgrade",l),this.off("upgradeError",l),c()},s=()=>{this.once("upgrade",l),this.once("upgradeError",l)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():c()}):this.upgrading?s():c()),this}_onError(c){if(Qi.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",c),this._onClose("transport error",c)}_onClose(c,l){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Gu&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=ac.indexOf(this._offlineEventListener);s!==-1&&ac.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",c,l),this.writeBuffer=[],this._prevBufferLen=0}}}Qi.protocol=dg;class tS extends Qi{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let c=0;c<this._upgrades.length;c++)this._probe(this._upgrades[c])}_probe(c){let l=this.createTransport(c),s=!1;Qi.priorWebsocketSuccess=!1;const _=()=>{s||(l.send([{type:"ping",data:"probe"}]),l.once("packet",D=>{if(!s)if(D.type==="pong"&&D.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",l),!l)return;Qi.priorWebsocketSuccess=l.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(x(),this.setTransport(l),l.send([{type:"upgrade"}]),this.emitReserved("upgrade",l),l=null,this.upgrading=!1,this.flush())})}else{const O=new Error("probe error");O.transport=l.name,this.emitReserved("upgradeError",O)}}))};function T(){s||(s=!0,x(),l.close(),l=null)}const w=D=>{const O=new Error("probe error: "+D);O.transport=l.name,T(),this.emitReserved("upgradeError",O)};function R(){w("transport closed")}function C(){w("socket closed")}function m(D){l&&D.name!==l.name&&T()}const x=()=>{l.removeListener("open",_),l.removeListener("error",w),l.removeListener("close",R),this.off("close",C),this.off("upgrading",m)};l.once("open",_),l.once("error",w),l.once("close",R),this.once("close",C),this.once("upgrading",m),this._upgrades.indexOf("webtransport")!==-1&&c!=="webtransport"?this.setTimeoutFn(()=>{s||l.open()},200):l.open()}onHandshake(c){this._upgrades=this._filterUpgrades(c.upgrades),super.onHandshake(c)}_filterUpgrades(c){const l=[];for(let s=0;s<c.length;s++)~this.transports.indexOf(c[s])&&l.push(c[s]);return l}}let nS=class extends tS{constructor(c,l={}){const s=typeof c=="object"?c:l;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(_=>Zb[_]).filter(_=>!!_)),super(c,s)}};function iS(d,c="",l){let s=d;l=l||typeof location<"u"&&location,d==null&&(d=l.protocol+"//"+l.host),typeof d=="string"&&(d.charAt(0)==="/"&&(d.charAt(1)==="/"?d=l.protocol+d:d=l.host+d),/^(https?|wss?):\/\//.test(d)||(typeof l<"u"?d=l.protocol+"//"+d:d="https://"+d),s=Hu(d)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const T=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+T+":"+s.port+c,s.href=s.protocol+"://"+T+(l&&l.port===s.port?"":":"+s.port),s}const rS=typeof ArrayBuffer=="function",aS=d=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(d):d.buffer instanceof ArrayBuffer,vg=Object.prototype.toString,sS=typeof Blob=="function"||typeof Blob<"u"&&vg.call(Blob)==="[object BlobConstructor]",oS=typeof File=="function"||typeof File<"u"&&vg.call(File)==="[object FileConstructor]";function rd(d){return rS&&(d instanceof ArrayBuffer||aS(d))||sS&&d instanceof Blob||oS&&d instanceof File}function sc(d,c){if(!d||typeof d!="object")return!1;if(Array.isArray(d)){for(let l=0,s=d.length;l<s;l++)if(sc(d[l]))return!0;return!1}if(rd(d))return!0;if(d.toJSON&&typeof d.toJSON=="function"&&arguments.length===1)return sc(d.toJSON(),!0);for(const l in d)if(Object.prototype.hasOwnProperty.call(d,l)&&sc(d[l]))return!0;return!1}function cS(d){const c=[],l=d.data,s=d;return s.data=Yu(l,c),s.attachments=c.length,{packet:s,buffers:c}}function Yu(d,c){if(!d)return d;if(rd(d)){const l={_placeholder:!0,num:c.length};return c.push(d),l}else if(Array.isArray(d)){const l=new Array(d.length);for(let s=0;s<d.length;s++)l[s]=Yu(d[s],c);return l}else if(typeof d=="object"&&!(d instanceof Date)){const l={};for(const s in d)Object.prototype.hasOwnProperty.call(d,s)&&(l[s]=Yu(d[s],c));return l}return d}function lS(d,c){return d.data=Vu(d.data,c),delete d.attachments,d}function Vu(d,c){if(!d)return d;if(d&&d._placeholder===!0){if(typeof d.num=="number"&&d.num>=0&&d.num<c.length)return c[d.num];throw new Error("illegal attachments")}else if(Array.isArray(d))for(let l=0;l<d.length;l++)d[l]=Vu(d[l],c);else if(typeof d=="object")for(const l in d)Object.prototype.hasOwnProperty.call(d,l)&&(d[l]=Vu(d[l],c));return d}const uS=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],dS=5;var Oe;(function(d){d[d.CONNECT=0]="CONNECT",d[d.DISCONNECT=1]="DISCONNECT",d[d.EVENT=2]="EVENT",d[d.ACK=3]="ACK",d[d.CONNECT_ERROR=4]="CONNECT_ERROR",d[d.BINARY_EVENT=5]="BINARY_EVENT",d[d.BINARY_ACK=6]="BINARY_ACK"})(Oe||(Oe={}));class fS{constructor(c){this.replacer=c}encode(c){return(c.type===Oe.EVENT||c.type===Oe.ACK)&&sc(c)?this.encodeAsBinary({type:c.type===Oe.EVENT?Oe.BINARY_EVENT:Oe.BINARY_ACK,nsp:c.nsp,data:c.data,id:c.id}):[this.encodeAsString(c)]}encodeAsString(c){let l=""+c.type;return(c.type===Oe.BINARY_EVENT||c.type===Oe.BINARY_ACK)&&(l+=c.attachments+"-"),c.nsp&&c.nsp!=="/"&&(l+=c.nsp+","),c.id!=null&&(l+=c.id),c.data!=null&&(l+=JSON.stringify(c.data,this.replacer)),l}encodeAsBinary(c){const l=cS(c),s=this.encodeAsString(l.packet),_=l.buffers;return _.unshift(s),_}}function Kh(d){return Object.prototype.toString.call(d)==="[object Object]"}class ad extends it{constructor(c){super(),this.reviver=c}add(c){let l;if(typeof c=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");l=this.decodeString(c);const s=l.type===Oe.BINARY_EVENT;s||l.type===Oe.BINARY_ACK?(l.type=s?Oe.EVENT:Oe.ACK,this.reconstructor=new pS(l),l.attachments===0&&super.emitReserved("decoded",l)):super.emitReserved("decoded",l)}else if(rd(c)||c.base64)if(this.reconstructor)l=this.reconstructor.takeBinaryData(c),l&&(this.reconstructor=null,super.emitReserved("decoded",l));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+c)}decodeString(c){let l=0;const s={type:Number(c.charAt(0))};if(Oe[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===Oe.BINARY_EVENT||s.type===Oe.BINARY_ACK){const T=l+1;for(;c.charAt(++l)!=="-"&&l!=c.length;);const w=c.substring(T,l);if(w!=Number(w)||c.charAt(l)!=="-")throw new Error("Illegal attachments");s.attachments=Number(w)}if(c.charAt(l+1)==="/"){const T=l+1;for(;++l&&!(c.charAt(l)===","||l===c.length););s.nsp=c.substring(T,l)}else s.nsp="/";const _=c.charAt(l+1);if(_!==""&&Number(_)==_){const T=l+1;for(;++l;){const w=c.charAt(l);if(w==null||Number(w)!=w){--l;break}if(l===c.length)break}s.id=Number(c.substring(T,l+1))}if(c.charAt(++l)){const T=this.tryParse(c.substr(l));if(ad.isPayloadValid(s.type,T))s.data=T;else throw new Error("invalid payload")}return s}tryParse(c){try{return JSON.parse(c,this.reviver)}catch{return!1}}static isPayloadValid(c,l){switch(c){case Oe.CONNECT:return Kh(l);case Oe.DISCONNECT:return l===void 0;case Oe.CONNECT_ERROR:return typeof l=="string"||Kh(l);case Oe.EVENT:case Oe.BINARY_EVENT:return Array.isArray(l)&&(typeof l[0]=="number"||typeof l[0]=="string"&&uS.indexOf(l[0])===-1);case Oe.ACK:case Oe.BINARY_ACK:return Array.isArray(l)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class pS{constructor(c){this.packet=c,this.buffers=[],this.reconPack=c}takeBinaryData(c){if(this.buffers.push(c),this.buffers.length===this.reconPack.attachments){const l=lS(this.reconPack,this.buffers);return this.finishedReconstruction(),l}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const hS=Object.freeze(Object.defineProperty({__proto__:null,Decoder:ad,Encoder:fS,get PacketType(){return Oe},protocol:dS},Symbol.toStringTag,{value:"Module"}));function Nn(d,c,l){return d.on(c,l),function(){d.off(c,l)}}const mS=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class _g extends it{constructor(c,l,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=c,this.nsp=l,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const c=this.io;this.subs=[Nn(c,"open",this.onopen.bind(this)),Nn(c,"packet",this.onpacket.bind(this)),Nn(c,"error",this.onerror.bind(this)),Nn(c,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...c){return c.unshift("message"),this.emit.apply(this,c),this}emit(c,...l){var s,_,T;if(mS.hasOwnProperty(c))throw new Error('"'+c.toString()+'" is a reserved event name');if(l.unshift(c),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(l),this;const w={type:Oe.EVENT,data:l};if(w.options={},w.options.compress=this.flags.compress!==!1,typeof l[l.length-1]=="function"){const x=this.ids++,D=l.pop();this._registerAckCallback(x,D),w.id=x}const R=(_=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||_===void 0?void 0:_.writable,C=this.connected&&!(!((T=this.io.engine)===null||T===void 0)&&T._hasPingExpired());return this.flags.volatile&&!R||(C?(this.notifyOutgoingListeners(w),this.packet(w)):this.sendBuffer.push(w)),this.flags={},this}_registerAckCallback(c,l){var s;const _=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(_===void 0){this.acks[c]=l;return}const T=this.io.setTimeoutFn(()=>{delete this.acks[c];for(let R=0;R<this.sendBuffer.length;R++)this.sendBuffer[R].id===c&&this.sendBuffer.splice(R,1);l.call(this,new Error("operation has timed out"))},_),w=(...R)=>{this.io.clearTimeoutFn(T),l.apply(this,R)};w.withError=!0,this.acks[c]=w}emitWithAck(c,...l){return new Promise((s,_)=>{const T=(w,R)=>w?_(w):s(R);T.withError=!0,l.push(T),this.emit(c,...l)})}_addToQueue(c){let l;typeof c[c.length-1]=="function"&&(l=c.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:c,flags:Object.assign({fromQueue:!0},this.flags)};c.push((_,...T)=>s!==this._queue[0]?void 0:(_!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),l&&l(_)):(this._queue.shift(),l&&l(null,...T)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(c=!1){if(!this.connected||this._queue.length===0)return;const l=this._queue[0];l.pending&&!c||(l.pending=!0,l.tryCount++,this.flags=l.flags,this.emit.apply(this,l.args))}packet(c){c.nsp=this.nsp,this.io._packet(c)}onopen(){typeof this.auth=="function"?this.auth(c=>{this._sendConnectPacket(c)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(c){this.packet({type:Oe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},c):c})}onerror(c){this.connected||this.emitReserved("connect_error",c)}onclose(c,l){this.connected=!1,delete this.id,this.emitReserved("disconnect",c,l),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(c=>{if(!this.sendBuffer.some(s=>String(s.id)===c)){const s=this.acks[c];delete this.acks[c],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(c){if(c.nsp===this.nsp)switch(c.type){case Oe.CONNECT:c.data&&c.data.sid?this.onconnect(c.data.sid,c.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Oe.EVENT:case Oe.BINARY_EVENT:this.onevent(c);break;case Oe.ACK:case Oe.BINARY_ACK:this.onack(c);break;case Oe.DISCONNECT:this.ondisconnect();break;case Oe.CONNECT_ERROR:this.destroy();const s=new Error(c.data.message);s.data=c.data.data,this.emitReserved("connect_error",s);break}}onevent(c){const l=c.data||[];c.id!=null&&l.push(this.ack(c.id)),this.connected?this.emitEvent(l):this.receiveBuffer.push(Object.freeze(l))}emitEvent(c){if(this._anyListeners&&this._anyListeners.length){const l=this._anyListeners.slice();for(const s of l)s.apply(this,c)}super.emit.apply(this,c),this._pid&&c.length&&typeof c[c.length-1]=="string"&&(this._lastOffset=c[c.length-1])}ack(c){const l=this;let s=!1;return function(..._){s||(s=!0,l.packet({type:Oe.ACK,id:c,data:_}))}}onack(c){const l=this.acks[c.id];typeof l=="function"&&(delete this.acks[c.id],l.withError&&c.data.unshift(null),l.apply(this,c.data))}onconnect(c,l){this.id=c,this.recovered=l&&this._pid===l,this._pid=l,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(c=>this.emitEvent(c)),this.receiveBuffer=[],this.sendBuffer.forEach(c=>{this.notifyOutgoingListeners(c),this.packet(c)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(c=>c()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Oe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(c){return this.flags.compress=c,this}get volatile(){return this.flags.volatile=!0,this}timeout(c){return this.flags.timeout=c,this}onAny(c){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(c),this}prependAny(c){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(c),this}offAny(c){if(!this._anyListeners)return this;if(c){const l=this._anyListeners;for(let s=0;s<l.length;s++)if(c===l[s])return l.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(c){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(c),this}prependAnyOutgoing(c){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(c),this}offAnyOutgoing(c){if(!this._anyOutgoingListeners)return this;if(c){const l=this._anyOutgoingListeners;for(let s=0;s<l.length;s++)if(c===l[s])return l.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(c){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const l=this._anyOutgoingListeners.slice();for(const s of l)s.apply(this,c.data)}}}function ya(d){d=d||{},this.ms=d.min||100,this.max=d.max||1e4,this.factor=d.factor||2,this.jitter=d.jitter>0&&d.jitter<=1?d.jitter:0,this.attempts=0}ya.prototype.duration=function(){var d=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var c=Math.random(),l=Math.floor(c*this.jitter*d);d=Math.floor(c*10)&1?d+l:d-l}return Math.min(d,this.max)|0};ya.prototype.reset=function(){this.attempts=0};ya.prototype.setMin=function(d){this.ms=d};ya.prototype.setMax=function(d){this.max=d};ya.prototype.setJitter=function(d){this.jitter=d};class Qu extends it{constructor(c,l){var s;super(),this.nsps={},this.subs=[],c&&typeof c=="object"&&(l=c,c=void 0),l=l||{},l.path=l.path||"/socket.io",this.opts=l,fc(this,l),this.reconnection(l.reconnection!==!1),this.reconnectionAttempts(l.reconnectionAttempts||1/0),this.reconnectionDelay(l.reconnectionDelay||1e3),this.reconnectionDelayMax(l.reconnectionDelayMax||5e3),this.randomizationFactor((s=l.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new ya({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(l.timeout==null?2e4:l.timeout),this._readyState="closed",this.uri=c;const _=l.parser||hS;this.encoder=new _.Encoder,this.decoder=new _.Decoder,this._autoConnect=l.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(c){return arguments.length?(this._reconnection=!!c,c||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(c){return c===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=c,this)}reconnectionDelay(c){var l;return c===void 0?this._reconnectionDelay:(this._reconnectionDelay=c,(l=this.backoff)===null||l===void 0||l.setMin(c),this)}randomizationFactor(c){var l;return c===void 0?this._randomizationFactor:(this._randomizationFactor=c,(l=this.backoff)===null||l===void 0||l.setJitter(c),this)}reconnectionDelayMax(c){var l;return c===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=c,(l=this.backoff)===null||l===void 0||l.setMax(c),this)}timeout(c){return arguments.length?(this._timeout=c,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(c){if(~this._readyState.indexOf("open"))return this;this.engine=new nS(this.uri,this.opts);const l=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const _=Nn(l,"open",function(){s.onopen(),c&&c()}),T=R=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",R),c?c(R):this.maybeReconnectOnOpen()},w=Nn(l,"error",T);if(this._timeout!==!1){const R=this._timeout,C=this.setTimeoutFn(()=>{_(),T(new Error("timeout")),l.close()},R);this.opts.autoUnref&&C.unref(),this.subs.push(()=>{this.clearTimeoutFn(C)})}return this.subs.push(_),this.subs.push(w),this}connect(c){return this.open(c)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const c=this.engine;this.subs.push(Nn(c,"ping",this.onping.bind(this)),Nn(c,"data",this.ondata.bind(this)),Nn(c,"error",this.onerror.bind(this)),Nn(c,"close",this.onclose.bind(this)),Nn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(c){try{this.decoder.add(c)}catch(l){this.onclose("parse error",l)}}ondecoded(c){dc(()=>{this.emitReserved("packet",c)},this.setTimeoutFn)}onerror(c){this.emitReserved("error",c)}socket(c,l){let s=this.nsps[c];return s?this._autoConnect&&!s.active&&s.connect():(s=new _g(this,c,l),this.nsps[c]=s),s}_destroy(c){const l=Object.keys(this.nsps);for(const s of l)if(this.nsps[s].active)return;this._close()}_packet(c){const l=this.encoder.encode(c);for(let s=0;s<l.length;s++)this.engine.write(l[s],c.options)}cleanup(){this.subs.forEach(c=>c()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(c,l){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",c,l),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const c=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const l=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{c.skipReconnect||(this.emitReserved("reconnect_attempt",c.backoff.attempts),!c.skipReconnect&&c.open(_=>{_?(c._reconnecting=!1,c.reconnect(),this.emitReserved("reconnect_error",_)):c.onreconnect()}))},l);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const c=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",c)}}const ws={};function oc(d,c){typeof d=="object"&&(c=d,d=void 0),c=c||{};const l=iS(d,c.path||"/socket.io"),s=l.source,_=l.id,T=l.path,w=ws[_]&&T in ws[_].nsps,R=c.forceNew||c["force new connection"]||c.multiplex===!1||w;let C;return R?C=new Qu(s,c):(ws[_]||(ws[_]=new Qu(s,c)),C=ws[_]),l.query&&!c.query&&(c.query=l.queryKey),C.socket(l.path,c)}Object.assign(oc,{Manager:Qu,Socket:_g,io:oc,connect:oc});const Pe=oc(),gS=()=>{const d=Cr();$.useEffect(()=>{Pe.connected||Pe.connect()},[]);const c=()=>{Pe.emit("createRoom"),Pe.on("roomCreated",({roomId:s})=>{d(`/name?roomId=${s}`)})},l=()=>{d("/join")};return he.jsx("div",{className:"menu-container",children:he.jsxs("div",{className:"menu-card",children:[he.jsx("h2",{children:"Welcome to Voice Chat"}),he.jsxs("div",{className:"menu-buttons",children:[he.jsx("button",{className:"menu-button",onClick:c,children:"Create Room"}),he.jsx("button",{className:"menu-button",onClick:l,children:"Join Room"})]})]})})},vS=()=>{const[d,c]=$.useState(""),[l,s]=$.useState(""),_=Cr(),T=()=>{d.trim()&&l.trim()&&Pe.emit("updateName",{userName:l},w=>{w.success&&(localStorage.setItem("userName",l),Pe.emit("joinRoom",{roomId:d,userName:l},R=>{R.error?alert("Room does not exist."):_(`/room/${d}`)}))})};return he.jsx("div",{className:"join-room-container",children:he.jsxs("div",{className:"join-room-card",children:[he.jsx("h2",{children:"Join a Room"}),he.jsx("input",{type:"text",placeholder:"Room ID",value:d,onChange:w=>c(w.target.value),className:"join-room-input"}),he.jsx("input",{type:"text",placeholder:"Your Name",value:l,onChange:w=>s(w.target.value),className:"join-room-input"}),he.jsx("button",{className:"join-room-button",onClick:T,children:"Join Room"})]})})},_S=({onNameSubmit:d})=>{const[c,l]=$.useState(""),s=Cr(),[_]=vb(),T=_.get("roomId"),w=()=>{c.trim()!==""&&Pe.emit("updateName",{userName:c},R=>{R.success&&(d(c),localStorage.setItem("userName",c),T?Pe.emit("joinRoom",{roomId:T,userName:c},C=>{C.error?alert("Room does not exist."):s(`/room/${T}`)}):s("/"))})};return he.jsx("div",{className:"name-menu-container",children:he.jsxs("div",{className:"name-menu-card",children:[he.jsx("h2",{children:"Join Room"}),he.jsx("input",{type:"text",value:c,onChange:R=>l(R.target.value),placeholder:"Enter your name",className:"name-menu-input"}),he.jsx("button",{className:"name-menu-button",onClick:w,children:"Enter"})]})})},yS=({toggleMute:d,micEnabled:c,exitSession:l,terminateRoom:s,isAdmin:_})=>he.jsxs("div",{className:"bottom-panel",children:[he.jsx("button",{className:"mute-button",onClick:d,children:he.jsx("i",{className:"material-icons",children:c?"mic":"mic_off"})}),he.jsx("button",{className:"exit-button",onClick:l,children:he.jsx("i",{className:"material-icons",children:"exit_to_app"})}),_&&he.jsxs(he.Fragment,{children:[he.jsx("button",{className:"terminate-button",onClick:s,children:"Terminate Room"}),he.jsx("button",{className:"bottom-button",children:he.jsx("i",{className:"material-icons",children:"add"})})]})]}),bS=d=>{let c=0;for(let s=0;s<d.length;s++)c=d.charCodeAt(s)+((c<<5)-c);return`hsl(${Math.abs(c)%360}, 70%, 50%)`},SS=({participant:d,micEnabled:c,currentUserId:l,onRemove:s})=>{const _=bS(d.userId),[T,w]=$.useState(!1),R=d.userName?d.userName.charAt(0).toUpperCase():"?";d.userId;const C=d.micStatus,m=()=>{w(!0),setTimeout(()=>{s&&s(d.userId)},300)};return $.useEffect(()=>{const x=setTimeout(()=>{d||m()},5e3);return()=>clearTimeout(x)},[d]),he.jsxs("div",{className:`participant-card ${T?"exit":""}`,children:[he.jsxs("div",{className:"avatar",style:{backgroundColor:_},children:[R,d.isTalking&&he.jsx("div",{className:"talking-indicator"})]}),he.jsx("div",{className:"participant-name",children:d.userName||d.userId}),he.jsx("div",{className:"mic-status",children:he.jsx("i",{className:"material-icons",children:C?"mic":"mic_off"})})]})};var _n={},Jo={exports:{}},xu,Xh;function wS(){if(Xh)return xu;Xh=1;var d=1e3,c=d*60,l=c*60,s=l*24,_=s*7,T=s*365.25;xu=function(x,D){D=D||{};var O=typeof x;if(O==="string"&&x.length>0)return w(x);if(O==="number"&&isFinite(x))return D.long?C(x):R(x);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(x))};function w(x){if(x=String(x),!(x.length>100)){var D=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(x);if(D){var O=parseFloat(D[1]),y=(D[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return O*T;case"weeks":case"week":case"w":return O*_;case"days":case"day":case"d":return O*s;case"hours":case"hour":case"hrs":case"hr":case"h":return O*l;case"minutes":case"minute":case"mins":case"min":case"m":return O*c;case"seconds":case"second":case"secs":case"sec":case"s":return O*d;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return O;default:return}}}}function R(x){var D=Math.abs(x);return D>=s?Math.round(x/s)+"d":D>=l?Math.round(x/l)+"h":D>=c?Math.round(x/c)+"m":D>=d?Math.round(x/d)+"s":x+"ms"}function C(x){var D=Math.abs(x);return D>=s?m(x,D,s,"day"):D>=l?m(x,D,l,"hour"):D>=c?m(x,D,c,"minute"):D>=d?m(x,D,d,"second"):x+" ms"}function m(x,D,O,y){var b=D>=O*1.5;return Math.round(x/O)+" "+y+(b?"s":"")}return xu}var Lu,Zh;function RS(){if(Zh)return Lu;Zh=1;function d(c){s.debug=s,s.default=s,s.coerce=m,s.disable=R,s.enable=T,s.enabled=C,s.humanize=wS(),s.destroy=x,Object.keys(c).forEach(D=>{s[D]=c[D]}),s.names=[],s.skips=[],s.formatters={};function l(D){let O=0;for(let y=0;y<D.length;y++)O=(O<<5)-O+D.charCodeAt(y),O|=0;return s.colors[Math.abs(O)%s.colors.length]}s.selectColor=l;function s(D){let O,y=null,b,U;function A(...g){if(!A.enabled)return;const h=A,a=Number(new Date),r=a-(O||a);h.diff=r,h.prev=O,h.curr=a,O=a,g[0]=s.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let u=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(S,P)=>{if(S==="%%")return"%";u++;const v=s.formatters[P];if(typeof v=="function"){const M=g[u];S=v.call(h,M),g.splice(u,1),u--}return S}),s.formatArgs.call(h,g),(h.log||s.log).apply(h,g)}return A.namespace=D,A.useColors=s.useColors(),A.color=s.selectColor(D),A.extend=_,A.destroy=s.destroy,Object.defineProperty(A,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(b!==s.namespaces&&(b=s.namespaces,U=s.enabled(D)),U),set:g=>{y=g}}),typeof s.init=="function"&&s.init(A),A}function _(D,O){const y=s(this.namespace+(typeof O>"u"?":":O)+D);return y.log=this.log,y}function T(D){s.save(D),s.namespaces=D,s.names=[],s.skips=[];const O=(typeof D=="string"?D:"").trim().replace(" ",",").split(",").filter(Boolean);for(const y of O)y[0]==="-"?s.skips.push(y.slice(1)):s.names.push(y)}function w(D,O){let y=0,b=0,U=-1,A=0;for(;y<D.length;)if(b<O.length&&(O[b]===D[y]||O[b]==="*"))O[b]==="*"?(U=b,A=y,b++):(y++,b++);else if(U!==-1)b=U+1,A++,y=A;else return!1;for(;b<O.length&&O[b]==="*";)b++;return b===O.length}function R(){const D=[...s.names,...s.skips.map(O=>"-"+O)].join(",");return s.enable(""),D}function C(D){for(const O of s.skips)if(w(D,O))return!1;for(const O of s.names)if(w(D,O))return!0;return!1}function m(D){return D instanceof Error?D.stack||D.message:D}function x(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}return Lu=d,Lu}var $h;function pc(){return $h||($h=1,function(d,c){var l={};c.formatArgs=_,c.save=T,c.load=w,c.useColors=s,c.storage=R(),c.destroy=(()=>{let m=!1;return()=>{m||(m=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),c.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function s(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let m;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(m=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(m[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function _(m){if(m[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+m[0]+(this.useColors?"%c ":" ")+"+"+d.exports.humanize(this.diff),!this.useColors)return;const x="color: "+this.color;m.splice(1,0,x,"color: inherit");let D=0,O=0;m[0].replace(/%[a-zA-Z%]/g,y=>{y!=="%%"&&(D++,y==="%c"&&(O=D))}),m.splice(O,0,x)}c.log=console.debug||console.log||(()=>{});function T(m){try{m?c.storage.setItem("debug",m):c.storage.removeItem("debug")}catch{}}function w(){let m;try{m=c.storage.getItem("debug")}catch{}return!m&&typeof process<"u"&&"env"in process&&(m=l.DEBUG),m}function R(){try{return localStorage}catch{}}d.exports=RS()(c);const{formatters:C}=d.exports;C.j=function(m){try{return JSON.stringify(m)}catch(x){return"[UnexpectedJSONParseError]: "+x.message}}}(Jo,Jo.exports)),Jo.exports}var sn={},Ns={exports:{}},TS=Ns.exports,Jh;function CS(){return Jh||(Jh=1,function(d,c){(function(l,s){var _="2.0.2",T=500,w="user-agent",R="",C="?",m="function",x="undefined",D="object",O="string",y="browser",b="cpu",U="device",A="engine",g="os",h="result",a="name",r="type",u="vendor",p="version",S="architecture",P="major",v="model",M="console",N="mobile",k="tablet",z="smarttv",V="wearable",ee="xr",L="embedded",I="inapp",H="brands",Y="formFactors",B="fullVersionList",Z="platform",ae="platformVersion",le="bitness",re="sec-ch-ua",ge=re+"-full-version-list",ve=re+"-arch",Ze=re+"-"+le,Ee=re+"-form-factors",Ue=re+"-"+N,Ne=re+"-"+v,ct=re+"-"+Z,Xi=ct+"-version",ln=[H,B,N,v,Z,ae,S,Y,le],ei="Amazon",un="Apple",ti="ASUS",Or="BlackBerry",Yt="Google",Mr="Huawei",xr="Lenovo",Lr="Honor",Ar="LG",ba="Microsoft",Ot="Motorola",Sa="Nvidia",wa="OnePlus",Pr="OPPO",zn="Samsung",Us="Sharp",bi="Sony",Ra="Xiaomi",Ta="Zebra",Si="Chrome",yt="Chromium",qn="Chromecast",In="Edge",at="Firefox",Zi="Opera",zs="Facebook",qs="Sogou",dn="Mobile ",Hn=" Browser",fn="Windows",$i=typeof l!==x,We=$i&&l.navigator?l.navigator:s,Gn=We&&We.userAgentData?We.userAgentData:s,Is=function(ne,se){var oe={},Se=se;if(!Yn(se)){Se={};for(var fe in se)for(var Te in se[fe])Se[Te]=se[fe][Te].concat(Se[Te]?Se[Te]:[])}for(var pe in ne)oe[pe]=Se[pe]&&Se[pe].length%2===0?Se[pe].concat(ne[pe]):ne[pe];return oe},Ji=function(ne){for(var se={},oe=0;oe<ne.length;oe++)se[ne[oe].toUpperCase()]=ne[oe];return se},Wi=function(ne,se){if(typeof ne===D&&ne.length>0){for(var oe in ne)if(Vt(ne[oe])==Vt(se))return!0;return!1}return wi(ne)?Vt(se).indexOf(Vt(ne))!==-1:!1},Yn=function(ne,se){for(var oe in ne)return/^(browser|cpu|device|engine|os)$/.test(oe)||(se?Yn(ne[oe]):!1)},wi=function(ne){return typeof ne===O},Nr=function(ne){if(!ne)return s;for(var se=[],oe=Ri(/\\?\"/g,ne).split(","),Se=0;Se<oe.length;Se++)if(oe[Se].indexOf(";")>-1){var fe=Qe(oe[Se]).split(";v=");se[Se]={brand:fe[0],version:fe[1]}}else se[Se]=Qe(oe[Se]);return se},Vt=function(ne){return wi(ne)?ne.toLowerCase():ne},kr=function(ne){return wi(ne)?Ri(/[^\d\.]/g,ne).split(".")[0]:s},Qt=function(ne){for(var se in ne){var oe=ne[se];typeof oe==D&&oe.length==2?this[oe[0]]=oe[1]:this[oe]=s}return this},Ri=function(ne,se){return wi(se)?se.replace(ne,R):se},Mt=function(ne){return Ri(/\\?\"/g,ne)},Qe=function(ne,se){if(wi(ne))return ne=Ri(/^\s\s*/,ne),typeof se===x?ne:ne.substring(0,T)},lt=function(ne,se){if(!(!ne||!se))for(var oe=0,Se,fe,Te,pe,xe,ye;oe<se.length&&!xe;){var He=se[oe],xt=se[oe+1];for(Se=fe=0;Se<He.length&&!xe&&He[Se];)if(xe=He[Se++].exec(ne),xe)for(Te=0;Te<xt.length;Te++)ye=xe[++fe],pe=xt[Te],typeof pe===D&&pe.length>0?pe.length===2?typeof pe[1]==m?this[pe[0]]=pe[1].call(this,ye):this[pe[0]]=pe[1]:pe.length===3?typeof pe[1]===m&&!(pe[1].exec&&pe[1].test)?this[pe[0]]=ye?pe[1].call(this,ye,pe[2]):s:this[pe[0]]=ye?ye.replace(pe[1],pe[2]):s:pe.length===4&&(this[pe[0]]=ye?pe[3].call(this,ye.replace(pe[1],pe[2])):s):this[pe]=ye||s;oe+=2}},wt=function(ne,se){for(var oe in se)if(typeof se[oe]===D&&se[oe].length>0){for(var Se=0;Se<se[oe].length;Se++)if(Wi(se[oe][Se],ne))return oe===C?s:oe}else if(Wi(se[oe],ne))return oe===C?s:oe;return se.hasOwnProperty("*")?se["*"]:ne},jr={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Hs={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:"Watch",xr:["VR","XR"],"?":["Desktop","Unknown"],"*":s},Gs={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[a,dn+"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[a,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[a,p],[/opios[\/ ]+([\w\.]+)/i],[p,[a,Zi+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[p,[a,Zi+" GX"]],[/\bopr\/([\w\.]+)/i],[p,[a,Zi]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[p,[a,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[p,[a,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[a,p],[/quark(?:pc)?\/([-\w\.]+)/i],[p,[a,"Quark"]],[/\bddg\/([\w\.]+)/i],[p,[a,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[a,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[p,[a,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[a,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[a,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[p,[a,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[p,[a,"Smart "+xr+Hn]],[/(avast|avg)\/([\w\.]+)/i],[[a,/(.+)/,"$1 Secure"+Hn],p],[/\bfocus\/([\w\.]+)/i],[p,[a,at+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[a,Zi+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[a,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[a,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[a,Zi+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[a,"MIUI"+Hn]],[/fxios\/([\w\.-]+)/i],[p,[a,dn+at]],[/\bqihoobrowser\/?([\w\.]*)/i],[p,[a,"360"]],[/\b(qq)\/([\w\.]+)/i],[[a,/(.+)/,"$1Browser"],p],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[a,/(.+)/,"$1"+Hn],p],[/samsungbrowser\/([\w\.]+)/i],[p,[a,zn+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[p,[a,qs+" Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[a,qs+" Mobile"],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[a,p],[/(lbbrowser|rekonq)/i],[a],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[p,a],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[a,zs],p,[r,I]],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(instagram|snapchat)[\/ ]([-\w\.]+)/i],[a,p,[r,I]],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[a,"GSA"],[r,I]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[p,[a,"TikTok"],[r,I]],[/\[(linkedin)app\]/i],[a,[r,I]],[/(chromium)[\/ ]([-\w\.]+)/i],[a,p],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[a,Si+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[a,Si+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[a,"Android"+Hn]],[/chrome\/([\w\.]+) mobile/i],[p,[a,dn+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[a,p],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[p,[a,dn+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[a,dn+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[p,a],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[a,[p,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[a,p],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[a,dn+at],p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[a,"Netscape"],p],[/(wolvic|librewolf)\/([\w\.]+)/i],[a,p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[a,at+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[a,[p,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[a,[p,/[^\d\.]+./,R]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[S,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[S,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[S,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[S,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[S,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[S,/ower/,R,Vt]],[/ sun4\w[;\)]/i],[[S,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[S,Vt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[v,[u,zn],[r,k]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[v,[u,zn],[r,N]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[v,[u,un],[r,N]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[v,[u,un],[r,k]],[/(macintosh);/i],[v,[u,un]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[v,[u,Us],[r,N]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[v,[u,Lr],[r,k]],[/honor([-\w ]+)[;\)]/i],[v,[u,Lr],[r,N]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[v,[u,Mr],[r,k]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[v,[u,Mr],[r,N]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[v,/_/g," "],[u,Ra],[r,k]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[v,/_/g," "],[u,Ra],[r,N]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[v,[u,Pr],[r,N]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[v,[u,wt,{OnePlus:["304","403","203"],"*":Pr}],[r,k]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[v,[u,"Vivo"],[r,N]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[v,[u,"Realme"],[r,N]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto(?! 360)[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[v,[u,Ot],[r,N]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[v,[u,Ot],[r,k]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[v,[u,Ar],[r,k]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv|watch)\w+)/i,/\blg-?([\d\w]+) bui/i],[v,[u,Ar],[r,N]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[v,[u,xr],[r,k]],[/(nokia) (t[12][01])/i],[u,v,[r,k]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[v,/_/g," "],[r,N],[u,"Nokia"]],[/(pixel (c|tablet))\b/i],[v,[u,Yt],[r,k]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[v,[u,Yt],[r,N]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[v,[u,bi],[r,N]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[v,"Xperia Tablet"],[u,bi],[r,k]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[v,[u,wa],[r,N]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[v,[u,ei],[r,k]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[v,/(.+)/g,"Fire Phone $1"],[u,ei],[r,N]],[/(playbook);[-\w\),; ]+(rim)/i],[v,u,[r,k]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[v,[u,Or],[r,N]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[v,[u,ti],[r,k]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[v,[u,ti],[r,N]],[/(nexus 9)/i],[v,[u,"HTC"],[r,k]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[u,[v,/_/g," "],[r,N]],[/tcl (xess p17aa)/i,/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\w(\w|\w\w))?(\)| bui)/i],[v,[u,"TCL"],[r,k]],[/droid [\w\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\w(\w|\w\w))?(\)| bui)/i],[v,[u,"TCL"],[r,N]],[/(itel) ((\w+))/i],[[u,Vt],v,[r,wt,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[v,[u,"Acer"],[r,k]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[v,[u,"Meizu"],[r,N]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[v,[u,"Ulefone"],[r,N]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[v,[u,"Energizer"],[r,N]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[v,[u,"Cat"],[r,N]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[v,[u,"Smartfren"],[r,N]],[/droid.+; (a(?:015|06[35]|142p?))/i],[v,[u,"Nothing"],[r,N]],[/(imo) (tab \w+)/i,/(infinix) (x1101b?)/i],[u,v,[r,k]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (hmd|imo) ([\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i,/(oppo) ?([\w ]+) bui/i],[u,v,[r,N]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[u,v,[r,k]],[/(surface duo)/i],[v,[u,ba],[r,k]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[v,[u,"Fairphone"],[r,N]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[v,[u,Sa],[r,k]],[/(sprint) (\w+)/i],[u,v,[r,N]],[/(kin\.[onetw]{3})/i],[[v,/\./g," "],[u,ba],[r,N]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[v,[u,Ta],[r,k]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[v,[u,Ta],[r,N]],[/smart-tv.+(samsung)/i],[u,[r,z]],[/hbbtv.+maple;(\d+)/i],[[v,/^/,"SmartTV"],[u,zn],[r,z]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[u,Ar],[r,z]],[/(apple) ?tv/i],[u,[v,un+" TV"],[r,z]],[/crkey.*devicetype\/chromecast/i],[[v,qn+" Third Generation"],[u,Yt],[r,z]],[/crkey.*devicetype\/([^/]*)/i],[[v,/^/,"Chromecast "],[u,Yt],[r,z]],[/fuchsia.*crkey/i],[[v,qn+" Nest Hub"],[u,Yt],[r,z]],[/crkey/i],[[v,qn],[u,Yt],[r,z]],[/droid.+aft(\w+)( bui|\))/i],[v,[u,ei],[r,z]],[/(shield \w+ tv)/i],[v,[u,Sa],[r,z]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[v,[u,Us],[r,z]],[/(bravia[\w ]+)( bui|\))/i],[v,[u,bi],[r,z]],[/(mi(tv|box)-?\w+) bui/i],[v,[u,Ra],[r,z]],[/Hbbtv.*(technisat) (.*);/i],[u,v,[r,z]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[u,Qe],[v,Qe],[r,z]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[v,[r,z]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[r,z]],[/(ouya)/i,/(nintendo) (\w+)/i],[u,v,[r,M]],[/droid.+; (shield)( bui|\))/i],[v,[u,Sa],[r,M]],[/(playstation \w+)/i],[v,[u,bi],[r,M]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[v,[u,ba],[r,M]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[v,[u,zn],[r,V]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[u,v,[r,V]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[v,[u,Pr],[r,V]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[v,[u,un],[r,V]],[/(opwwe\d{3})/i],[v,[u,wa],[r,V]],[/(moto 360)/i],[v,[u,Ot],[r,V]],[/(smartwatch 3)/i],[v,[u,bi],[r,V]],[/(g watch r)/i],[v,[u,Ar],[r,V]],[/droid.+; (wt63?0{2,3})\)/i],[v,[u,Ta],[r,V]],[/droid.+; (glass) \d/i],[v,[u,Yt],[r,ee]],[/(pico) (4|neo3(?: link|pro)?)/i],[u,v,[r,ee]],[/; (quest( \d| pro)?)/i],[v,[u,zs],[r,ee]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[u,[r,L]],[/(aeobc)\b/i],[v,[u,ei],[r,L]],[/(homepod).+mac os/i],[v,[u,un],[r,L]],[/windows iot/i],[[r,L]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+?(mobile|vr|\d) safari/i],[v,[r,wt,{mobile:"Mobile",xr:"VR","*":k}]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[r,k]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[r,N]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[v,[u,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[a,In+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[a,p],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[a,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[a,p],[/ladybird\//i],[[a,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,a]],os:[[/microsoft (windows) (vista|xp)/i],[a,p],[/(windows (?:phone(?: os)?|mobile|iot))[\/ ]?([\d\.\w ]*)/i],[a,[p,wt,jr]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,wt,jr],[a,fn]],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[a,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[a,"macOS"],[p,/_/g,"."]],[/android ([\d\.]+).*crkey/i],[p,[a,qn+" Android"]],[/fuchsia.*crkey\/([\d\.]+)/i],[p,[a,qn+" Fuchsia"]],[/crkey\/([\d\.]+).*devicetype\/smartspeaker/i],[p,[a,qn+" SmartSpeaker"]],[/linux.*crkey\/([\d\.]+)/i],[p,[a,qn+" Linux"]],[/crkey\/([\d\.]+)/i],[p,[a,qn]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,a],[/(ubuntu) ([\w\.]+) like android/i],[[a,/(.+)/,"$1 Touch"],p],[/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen|webos)\w*[-\/; ]?([\d\.]*)/i],[a,p],[/\(bb(10);/i],[p,[a,Or]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[p,[a,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[a,at+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[a,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[a,"watchOS"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[a,"Chrome OS"],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/(pico) .+os([\w\.]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux)(?: arm\w*| x86\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[a,p],[/(sunos) ?([\w\.\d]*)/i],[[a,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[a,p]]},er=function(){var ne={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}};return Qt.call(ne.init,[[y,[a,p,P,r]],[b,[S]],[U,[r,v,u]],[A,[a,p]],[g,[a,p]]]),Qt.call(ne.isIgnore,[[y,[p,P]],[A,[p]],[g,[p]]]),Qt.call(ne.isIgnoreRgx,[[y,/ ?browser$/i],[g,/ ?os$/i]]),Qt.call(ne.toString,[[y,[a,p]],[b,[S]],[U,[u,v]],[A,[a,p]],[g,[a,p]]]),ne}(),tr=function(ne,se){var oe=er.init[se],Se=er.isIgnore[se]||0,fe=er.isIgnoreRgx[se]||0,Te=er.toString[se]||0;function pe(){Qt.call(this,oe)}return pe.prototype.getItem=function(){return ne},pe.prototype.withClientHints=function(){return Gn?Gn.getHighEntropyValues(ln).then(function(xe){return ne.setCH(new Br(xe,!1)).parseCH().get()}):ne.parseCH().get()},pe.prototype.withFeatureCheck=function(){return ne.detectFeature().get()},se!=h&&(pe.prototype.is=function(xe){var ye=!1;for(var He in this)if(this.hasOwnProperty(He)&&!Wi(Se,He)&&Vt(fe?Ri(fe,this[He]):this[He])==Vt(fe?Ri(fe,xe):xe)){if(ye=!0,xe!=x)break}else if(xe==x&&ye){ye=!ye;break}return ye},pe.prototype.toString=function(){var xe=R;for(var ye in Te)typeof this[Te[ye]]!==x&&(xe+=(xe?" ":R)+this[Te[ye]]);return xe||x}),Gn||(pe.prototype.then=function(xe){var ye=this,He=function(){for(var kt in ye)ye.hasOwnProperty(kt)&&(this[kt]=ye[kt])};He.prototype={is:pe.prototype.is,toString:pe.prototype.toString};var xt=new He;return xe(xt),xt}),new pe};function Br(ne,se){if(ne=ne||{},Qt.call(this,ln),se)Qt.call(this,[[H,Nr(ne[re])],[B,Nr(ne[ge])],[N,/\?1/.test(ne[Ue])],[v,Mt(ne[Ne])],[Z,Mt(ne[ct])],[ae,Mt(ne[Xi])],[S,Mt(ne[ve])],[Y,Nr(ne[Ee])],[le,Mt(ne[Ze])]]);else for(var oe in ne)this.hasOwnProperty(oe)&&typeof ne[oe]!==x&&(this[oe]=ne[oe])}function Vn(ne,se,oe,Se){return this.get=function(fe){return fe?this.data.hasOwnProperty(fe)?this.data[fe]:s:this.data},this.set=function(fe,Te){return this.data[fe]=Te,this},this.setCH=function(fe){return this.uaCH=fe,this},this.detectFeature=function(){if(We&&We.userAgent==this.ua)switch(this.itemType){case y:We.brave&&typeof We.brave.isBrave==m&&this.set(a,"Brave");break;case U:!this.get(r)&&Gn&&Gn[N]&&this.set(r,N),this.get(v)=="Macintosh"&&We&&typeof We.standalone!==x&&We.maxTouchPoints&&We.maxTouchPoints>2&&this.set(v,"iPad").set(r,k);break;case g:!this.get(a)&&Gn&&Gn[Z]&&this.set(a,Gn[Z]);break;case h:var fe=this.data,Te=function(pe){return fe[pe].getItem().detectFeature().get()};this.set(y,Te(y)).set(b,Te(b)).set(U,Te(U)).set(A,Te(A)).set(g,Te(g))}return this},this.parseUA=function(){return this.itemType!=h&&lt.call(this.data,this.ua,this.rgxMap),this.itemType==y&&this.set(P,kr(this.get(p))),this},this.parseCH=function(){var fe=this.uaCH,Te=this.rgxMap;switch(this.itemType){case y:case A:var pe=fe[B]||fe[H],xe;if(pe)for(var ye in pe){var He=pe[ye].brand||pe[ye],xt=pe[ye].version;this.itemType==y&&!/not.a.brand/i.test(He)&&(!xe||/chrom/i.test(xe)&&He!=yt)&&(He=wt(He,{Chrome:"Google Chrome",Edge:"Microsoft Edge","Chrome WebView":"Android WebView","Chrome Headless":"HeadlessChrome"}),this.set(a,He).set(p,xt).set(P,kr(xt)),xe=He),this.itemType==A&&He==yt&&this.set(p,xt)}break;case b:var kt=fe[S];kt&&(kt&&fe[le]=="64"&&(kt+="64"),lt.call(this.data,kt+";",Te));break;case U:if(fe[N]&&this.set(r,N),fe[v]&&(this.set(v,fe[v]),!this.get(r)||!this.get(u))){var Rt={};lt.call(Rt,"droid 9; "+fe[v]+")",Te),!this.get(r)&&Rt.type&&this.set(r,Rt.type),!this.get(u)&&Rt.vendor&&this.set(u,Rt.vendor)}if(fe[Y]){var ht;if(typeof fe[Y]!="string")for(var Ca=0;!ht&&Ca<fe[Y].length;)ht=wt(fe[Y][Ca++],Hs);else ht=wt(fe[Y],Hs);this.set(r,ht)}break;case g:var Ea=fe[Z];if(Ea){var Ti=fe[ae];Ea==fn&&(Ti=parseInt(kr(Ti),10)>=13?"11":"10"),this.set(a,Ea).set(p,Ti)}this.get(a)==fn&&fe[v]=="Xbox"&&this.set(a,"Xbox").set(p,s);break;case h:var Ys=this.data,Qn=function(gc){return Ys[gc].getItem().setCH(fe).parseCH().get()};this.set(y,Qn(y)).set(b,Qn(b)).set(U,Qn(U)).set(A,Qn(A)).set(g,Qn(g))}return this},Qt.call(this,[["itemType",ne],["ua",se],["uaCH",Se],["rgxMap",oe],["data",tr(this,ne)]]),this}function ut(ne,se,oe){if(typeof ne===D?(Yn(ne,!0)?(typeof se===D&&(oe=se),se=ne):(oe=ne,se=s),ne=s):typeof ne===O&&!Yn(se,!0)&&(oe=se,se=s),oe&&typeof oe.append===m){var Se={};oe.forEach(function(ye,He){Se[He]=ye}),oe=Se}if(!(this instanceof ut))return new ut(ne,se,oe).getResult();var fe=typeof ne===O?ne:oe&&oe[w]?oe[w]:We&&We.userAgent?We.userAgent:R,Te=new Br(oe,!0),pe=se?Is(Gs,se):Gs,xe=function(ye){return ye==h?function(){return new Vn(ye,fe,pe,Te).set("ua",fe).set(y,this.getBrowser()).set(b,this.getCPU()).set(U,this.getDevice()).set(A,this.getEngine()).set(g,this.getOS()).get()}:function(){return new Vn(ye,fe,pe[ye],Te).parseUA().get()}};return Qt.call(this,[["getBrowser",xe(y)],["getCPU",xe(b)],["getDevice",xe(U)],["getEngine",xe(A)],["getOS",xe(g)],["getResult",xe(h)],["getUA",function(){return fe}],["setUA",function(ye){return wi(ye)&&(fe=ye.length>T?Qe(ye,T):ye),this}]]).setUA(fe),this}ut.VERSION=_,ut.BROWSER=Ji([a,p,P,r]),ut.CPU=Ji([S]),ut.DEVICE=Ji([v,u,r,M,N,z,k,V,L]),ut.ENGINE=ut.OS=Ji([a,p]),d.exports&&(c=d.exports=ut),c.UAParser=ut;var Ft=$i&&(l.jQuery||l.Zepto);if(Ft&&!Ft.ua){var pn=new ut;Ft.ua=pn.getResult(),Ft.ua.get=function(){return pn.getUA()},Ft.ua.set=function(ne){pn.setUA(ne);var se=pn.getResult();for(var oe in se)Ft.ua[oe]=se[oe]}}})(typeof window=="object"?window:TS)}(Ns,Ns.exports)),Ns.exports}var Sr={},Wh;function rt(){if(Wh)return Sr;Wh=1;var d=Sr&&Sr.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.Logger=void 0;const c=d(pc()),l="mediasoup-client";class s{constructor(T){T?(this._debug=(0,c.default)(`${l}:${T}`),this._warn=(0,c.default)(`${l}:WARN:${T}`),this._error=(0,c.default)(`${l}:ERROR:${T}`)):(this._debug=(0,c.default)(l),this._warn=(0,c.default)(`${l}:WARN`),this._error=(0,c.default)(`${l}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}return Sr.Logger=s,Sr}var Rs={},Wo={exports:{}},em;function ES(){if(em)return Wo.exports;em=1;var d=typeof Reflect=="object"?Reflect:null,c=d&&typeof d.apply=="function"?d.apply:function(u,p,S){return Function.prototype.apply.call(u,p,S)},l;d&&typeof d.ownKeys=="function"?l=d.ownKeys:Object.getOwnPropertySymbols?l=function(u){return Object.getOwnPropertyNames(u).concat(Object.getOwnPropertySymbols(u))}:l=function(u){return Object.getOwnPropertyNames(u)};function s(r){console&&console.warn&&console.warn(r)}var _=Number.isNaN||function(u){return u!==u};function T(){T.init.call(this)}Wo.exports=T,Wo.exports.once=g,T.EventEmitter=T,T.prototype._events=void 0,T.prototype._eventsCount=0,T.prototype._maxListeners=void 0;var w=10;function R(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(T,"defaultMaxListeners",{enumerable:!0,get:function(){return w},set:function(r){if(typeof r!="number"||r<0||_(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");w=r}}),T.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},T.prototype.setMaxListeners=function(u){if(typeof u!="number"||u<0||_(u))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+u+".");return this._maxListeners=u,this};function C(r){return r._maxListeners===void 0?T.defaultMaxListeners:r._maxListeners}T.prototype.getMaxListeners=function(){return C(this)},T.prototype.emit=function(u){for(var p=[],S=1;S<arguments.length;S++)p.push(arguments[S]);var P=u==="error",v=this._events;if(v!==void 0)P=P&&v.error===void 0;else if(!P)return!1;if(P){var M;if(p.length>0&&(M=p[0]),M instanceof Error)throw M;var N=new Error("Unhandled error."+(M?" ("+M.message+")":""));throw N.context=M,N}var k=v[u];if(k===void 0)return!1;if(typeof k=="function")c(k,this,p);else for(var z=k.length,V=b(k,z),S=0;S<z;++S)c(V[S],this,p);return!0};function m(r,u,p,S){var P,v,M;if(R(p),v=r._events,v===void 0?(v=r._events=Object.create(null),r._eventsCount=0):(v.newListener!==void 0&&(r.emit("newListener",u,p.listener?p.listener:p),v=r._events),M=v[u]),M===void 0)M=v[u]=p,++r._eventsCount;else if(typeof M=="function"?M=v[u]=S?[p,M]:[M,p]:S?M.unshift(p):M.push(p),P=C(r),P>0&&M.length>P&&!M.warned){M.warned=!0;var N=new Error("Possible EventEmitter memory leak detected. "+M.length+" "+String(u)+" listeners added. Use emitter.setMaxListeners() to increase limit");N.name="MaxListenersExceededWarning",N.emitter=r,N.type=u,N.count=M.length,s(N)}return r}T.prototype.addListener=function(u,p){return m(this,u,p,!1)},T.prototype.on=T.prototype.addListener,T.prototype.prependListener=function(u,p){return m(this,u,p,!0)};function x(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function D(r,u,p){var S={fired:!1,wrapFn:void 0,target:r,type:u,listener:p},P=x.bind(S);return P.listener=p,S.wrapFn=P,P}T.prototype.once=function(u,p){return R(p),this.on(u,D(this,u,p)),this},T.prototype.prependOnceListener=function(u,p){return R(p),this.prependListener(u,D(this,u,p)),this},T.prototype.removeListener=function(u,p){var S,P,v,M,N;if(R(p),P=this._events,P===void 0)return this;if(S=P[u],S===void 0)return this;if(S===p||S.listener===p)--this._eventsCount===0?this._events=Object.create(null):(delete P[u],P.removeListener&&this.emit("removeListener",u,S.listener||p));else if(typeof S!="function"){for(v=-1,M=S.length-1;M>=0;M--)if(S[M]===p||S[M].listener===p){N=S[M].listener,v=M;break}if(v<0)return this;v===0?S.shift():U(S,v),S.length===1&&(P[u]=S[0]),P.removeListener!==void 0&&this.emit("removeListener",u,N||p)}return this},T.prototype.off=T.prototype.removeListener,T.prototype.removeAllListeners=function(u){var p,S,P;if(S=this._events,S===void 0)return this;if(S.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):S[u]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete S[u]),this;if(arguments.length===0){var v=Object.keys(S),M;for(P=0;P<v.length;++P)M=v[P],M!=="removeListener"&&this.removeAllListeners(M);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(p=S[u],typeof p=="function")this.removeListener(u,p);else if(p!==void 0)for(P=p.length-1;P>=0;P--)this.removeListener(u,p[P]);return this};function O(r,u,p){var S=r._events;if(S===void 0)return[];var P=S[u];return P===void 0?[]:typeof P=="function"?p?[P.listener||P]:[P]:p?A(P):b(P,P.length)}T.prototype.listeners=function(u){return O(this,u,!0)},T.prototype.rawListeners=function(u){return O(this,u,!1)},T.listenerCount=function(r,u){return typeof r.listenerCount=="function"?r.listenerCount(u):y.call(r,u)},T.prototype.listenerCount=y;function y(r){var u=this._events;if(u!==void 0){var p=u[r];if(typeof p=="function")return 1;if(p!==void 0)return p.length}return 0}T.prototype.eventNames=function(){return this._eventsCount>0?l(this._events):[]};function b(r,u){for(var p=new Array(u),S=0;S<u;++S)p[S]=r[S];return p}function U(r,u){for(;u+1<r.length;u++)r[u]=r[u+1];r.pop()}function A(r){for(var u=new Array(r.length),p=0;p<u.length;++p)u[p]=r[p].listener||r[p];return u}function g(r,u){return new Promise(function(p,S){function P(M){r.removeListener(u,v),S(M)}function v(){typeof r.removeListener=="function"&&r.removeListener("error",P),p([].slice.call(arguments))}a(r,u,v,{once:!0}),u!=="error"&&h(r,P,{once:!0})})}function h(r,u,p){typeof r.on=="function"&&a(r,"error",u,p)}function a(r,u,p,S){if(typeof r.on=="function")S.once?r.once(u,p):r.on(u,p);else if(typeof r.addEventListener=="function")r.addEventListener(u,function P(v){S.once&&r.removeEventListener(u,P),p(v)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}return Wo.exports}var tm;function Er(){if(tm)return Rs;tm=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.EnhancedEventEmitter=void 0;const d=ES(),c=rt(),l=new c.Logger("EnhancedEventEmitter");class s extends d.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(T,...w){return super.emit(T,...w)}safeEmit(T,...w){try{return super.emit(T,...w)}catch(R){l.error("safeEmit() | event listener threw an error [eventName:%s]:%o",T,R);try{super.emit("listenererror",T,R)}catch{}return!!super.listenerCount(T)}}on(T,w){return super.on(T,w),this}off(T,w){return super.off(T,w),this}addListener(T,w){return super.on(T,w),this}prependListener(T,w){return super.prependListener(T,w),this}once(T,w){return super.once(T,w),this}prependOnceListener(T,w){return super.prependOnceListener(T,w),this}removeListener(T,w){return super.off(T,w),this}removeAllListeners(T){return super.removeAllListeners(T),this}listenerCount(T){return super.listenerCount(T)}listeners(T){return super.listeners(T)}rawListeners(T){return super.rawListeners(T)}}return Rs.EnhancedEventEmitter=s,Rs}var wr={},nm;function Dt(){if(nm)return wr;nm=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.InvalidStateError=wr.UnsupportedError=void 0;class d extends Error{constructor(s){super(s),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,d):this.stack=new Error(s).stack}}wr.UnsupportedError=d;class c extends Error{constructor(s){super(s),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,c):this.stack=new Error(s).stack}}return wr.InvalidStateError=c,wr}var ma={},im;function _t(){if(im)return ma;im=1,Object.defineProperty(ma,"__esModule",{value:!0}),ma.clone=d,ma.generateRandomNumber=c,ma.deepFreeze=l;function d(s){if(s!==void 0)return Number.isNaN(s)?NaN:typeof structuredClone=="function"?structuredClone(s):JSON.parse(JSON.stringify(s))}function c(){return Math.round(Math.random()*1e7)}function l(s){const _=Reflect.ownKeys(s);for(const T of _){const w=s[T];(w&&typeof w=="object"||typeof w=="function")&&l(w)}return Object.freeze(s)}return ma}var Je={},Ve={},Rr={},rm;function DS(){if(rm)return Rr;rm=1;var d=Rr&&Rr.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.Logger=void 0;const c=d(pc()),l="h264-profile-level-id";class s{constructor(T){T?(this._debug=(0,c.default)(`${l}:${T}`),this._warn=(0,c.default)(`${l}:WARN:${T}`),this._error=(0,c.default)(`${l}:ERROR:${T}`)):(this._debug=(0,c.default)(l),this._warn=(0,c.default)(`${l}:WARN`),this._error=(0,c.default)(`${l}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}return Rr.Logger=s,Rr}var am;function OS(){if(am)return Ve;am=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.generateProfileLevelIdStringForAnswer=Ve.isSameProfile=Ve.parseSdpProfileLevelId=Ve.levelToString=Ve.profileToString=Ve.profileLevelIdToString=Ve.parseProfileLevelId=Ve.ProfileLevelId=Ve.Level=Ve.Profile=void 0;const d=DS(),c=new d.Logger;var l;(function(r){r[r.ConstrainedBaseline=1]="ConstrainedBaseline",r[r.Baseline=2]="Baseline",r[r.Main=3]="Main",r[r.ConstrainedHigh=4]="ConstrainedHigh",r[r.High=5]="High",r[r.PredictiveHigh444=6]="PredictiveHigh444"})(l||(Ve.Profile=l={}));var s;(function(r){r[r.L1_b=0]="L1_b",r[r.L1=10]="L1",r[r.L1_1=11]="L1_1",r[r.L1_2=12]="L1_2",r[r.L1_3=13]="L1_3",r[r.L2=20]="L2",r[r.L2_1=21]="L2_1",r[r.L2_2=22]="L2_2",r[r.L3=30]="L3",r[r.L3_1=31]="L3_1",r[r.L3_2=32]="L3_2",r[r.L4=40]="L4",r[r.L4_1=41]="L4_1",r[r.L4_2=42]="L4_2",r[r.L5=50]="L5",r[r.L5_1=51]="L5_1",r[r.L5_2=52]="L5_2"})(s||(Ve.Level=s={}));class _{constructor(u,p){this.profile=u,this.level=p}}Ve.ProfileLevelId=_;const T=new _(l.ConstrainedBaseline,s.L3_1);class w{constructor(u){this.mask=~A("x",u),this.masked_value=A("1",u)}isMatch(u){return this.masked_value===(u&this.mask)}}class R{constructor(u,p,S){this.profile_idc=u,this.profile_iop=p,this.profile=S}}const C=[new R(66,new w("x1xx0000"),l.ConstrainedBaseline),new R(77,new w("1xxx0000"),l.ConstrainedBaseline),new R(88,new w("11xx0000"),l.ConstrainedBaseline),new R(66,new w("x0xx0000"),l.Baseline),new R(88,new w("10xx0000"),l.Baseline),new R(77,new w("0x0x0000"),l.Main),new R(100,new w("00000000"),l.High),new R(100,new w("00001100"),l.ConstrainedHigh),new R(244,new w("00000000"),l.PredictiveHigh444)];function m(r){if(typeof r!="string"||r.length!==6)return;const p=parseInt(r,16);if(p===0)return;const S=p&255,P=p>>8&255,v=p>>16&255;let M;switch(S){case s.L1_1:{M=P&16?s.L1_b:s.L1_1;break}case s.L1:case s.L1_2:case s.L1_3:case s.L2:case s.L2_1:case s.L2_2:case s.L3:case s.L3_1:case s.L3_2:case s.L4:case s.L4_1:case s.L4_2:case s.L5:case s.L5_1:case s.L5_2:{M=S;break}default:{c.warn(`parseProfileLevelId() | unrecognized level_idc [str:${r}, level_idc:${S}]`);return}}for(const N of C)if(v===N.profile_idc&&N.profile_iop.isMatch(P))return new _(N.profile,M);c.warn(`parseProfileLevelId() | unrecognized profile_idc/profile_iop combination [str:${r}, profile_idc:${v}, profile_iop:${P}]`)}Ve.parseProfileLevelId=m;function x(r){if(r.level==s.L1_b)switch(r.profile){case l.ConstrainedBaseline:return"42f00b";case l.Baseline:return"42100b";case l.Main:return"4d100b";default:{c.warn(`profileLevelIdToString() | Level 1_b not is allowed for profile ${r.profile}`);return}}let u;switch(r.profile){case l.ConstrainedBaseline:{u="42e0";break}case l.Baseline:{u="4200";break}case l.Main:{u="4d00";break}case l.ConstrainedHigh:{u="640c";break}case l.High:{u="6400";break}case l.PredictiveHigh444:{u="f400";break}default:{c.warn(`profileLevelIdToString() | unrecognized profile ${r.profile}`);return}}let p=r.level.toString(16);return p.length===1&&(p=`0${p}`),`${u}${p}`}Ve.profileLevelIdToString=x;function D(r){switch(r){case l.ConstrainedBaseline:return"ConstrainedBaseline";case l.Baseline:return"Baseline";case l.Main:return"Main";case l.ConstrainedHigh:return"ConstrainedHigh";case l.High:return"High";case l.PredictiveHigh444:return"PredictiveHigh444";default:{c.warn(`profileToString() | unrecognized profile ${r}`);return}}}Ve.profileToString=D;function O(r){switch(r){case s.L1_b:return"1b";case s.L1:return"1";case s.L1_1:return"1.1";case s.L1_2:return"1.2";case s.L1_3:return"1.3";case s.L2:return"2";case s.L2_1:return"2.1";case s.L2_2:return"2.2";case s.L3:return"3";case s.L3_1:return"3.1";case s.L3_2:return"3.2";case s.L4:return"4";case s.L4_1:return"4.1";case s.L4_2:return"4.2";case s.L5:return"5";case s.L5_1:return"5.1";case s.L5_2:return"5.2";default:{c.warn(`levelToString() | unrecognized level ${r}`);return}}}Ve.levelToString=O;function y(r={}){const u=r["profile-level-id"];return u?m(u):T}Ve.parseSdpProfileLevelId=y;function b(r={},u={}){const p=y(r),S=y(u);return!!(p&&S&&p.profile===S.profile)}Ve.isSameProfile=b;function U(r={},u={}){if(!r["profile-level-id"]&&!u["profile-level-id"]){c.warn("generateProfileLevelIdStringForAnswer() | profile-level-id missing in local and remote params");return}const p=y(r),S=y(u);if(!p)throw new TypeError("invalid local_profile_level_id");if(!S)throw new TypeError("invalid remote_profile_level_id");if(p.profile!==S.profile)throw new TypeError("H264 Profile mismatch");const P=a(r)&&a(u),v=p.level,M=S.level,N=h(v,M),k=P?v:N;return c.debug(`generateProfileLevelIdStringForAnswer() | result [profile:${p.profile}, level:${k}]`),x(new _(p.profile,k))}Ve.generateProfileLevelIdStringForAnswer=U;function A(r,u){return+(u[0]===r)<<7|+(u[1]===r)<<6|+(u[2]===r)<<5|+(u[3]===r)<<4|+(u[4]===r)<<3|+(u[5]===r)<<2|+(u[6]===r)<<1|+(u[7]===r)<<0}function g(r,u){return r===s.L1_b?u!==s.L1&&u!==s.L1_b:u===s.L1_b?r!==s.L1:r<u}function h(r,u){return g(r,u)?r:u}function a(r={}){const u=r["level-asymmetry-allowed"];return u===!0||u===1||u==="1"}return Ve}var sm;function Pt(){if(sm)return Je;sm=1;var d=Je&&Je.__createBinding||(Object.create?function(L,I,H,Y){Y===void 0&&(Y=H);var B=Object.getOwnPropertyDescriptor(I,H);(!B||("get"in B?!I.__esModule:B.writable||B.configurable))&&(B={enumerable:!0,get:function(){return I[H]}}),Object.defineProperty(L,Y,B)}:function(L,I,H,Y){Y===void 0&&(Y=H),L[Y]=I[H]}),c=Je&&Je.__setModuleDefault||(Object.create?function(L,I){Object.defineProperty(L,"default",{enumerable:!0,value:I})}:function(L,I){L.default=I}),l=Je&&Je.__importStar||function(){var L=function(I){return L=Object.getOwnPropertyNames||function(H){var Y=[];for(var B in H)Object.prototype.hasOwnProperty.call(H,B)&&(Y[Y.length]=B);return Y},L(I)};return function(I){if(I&&I.__esModule)return I;var H={};if(I!=null)for(var Y=L(I),B=0;B<Y.length;B++)Y[B]!=="default"&&d(H,I,Y[B]);return c(H,I),H}}();Object.defineProperty(Je,"__esModule",{value:!0}),Je.validateRtpCapabilities=C,Je.validateRtpParameters=m,Je.validateSctpStreamParameters=x,Je.validateSctpCapabilities=D,Je.getExtendedRtpCapabilities=O,Je.getRecvRtpCapabilities=y,Je.getSendingRtpParameters=b,Je.getSendingRemoteRtpParameters=U,Je.reduceCodecs=A,Je.generateProbatorRtpParameters=g,Je.canSend=h,Je.canReceive=a;const s=l(OS()),_=l(_t()),T="probator",w=1234,R=127;function C(L){if(typeof L!="object")throw new TypeError("caps is not an object");if(L.codecs&&!Array.isArray(L.codecs))throw new TypeError("caps.codecs is not an array");L.codecs||(L.codecs=[]);for(const I of L.codecs)r(I);if(L.headerExtensions&&!Array.isArray(L.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");L.headerExtensions||(L.headerExtensions=[]);for(const I of L.headerExtensions)p(I)}function m(L){if(typeof L!="object")throw new TypeError("params is not an object");if(L.mid&&typeof L.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(L.codecs))throw new TypeError("missing params.codecs");for(const I of L.codecs)S(I);if(L.headerExtensions&&!Array.isArray(L.headerExtensions))throw new TypeError("params.headerExtensions is not an array");L.headerExtensions||(L.headerExtensions=[]);for(const I of L.headerExtensions)P(I);if(L.encodings&&!Array.isArray(L.encodings))throw new TypeError("params.encodings is not an array");L.encodings||(L.encodings=[]);for(const I of L.encodings)v(I);if(L.rtcp&&typeof L.rtcp!="object")throw new TypeError("params.rtcp is not an object");L.rtcp||(L.rtcp={}),M(L.rtcp)}function x(L){if(typeof L!="object")throw new TypeError("params is not an object");if(typeof L.streamId!="number")throw new TypeError("missing params.streamId");let I=!1;if(typeof L.ordered=="boolean"?I=!0:L.ordered=!0,L.maxPacketLifeTime&&typeof L.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(L.maxRetransmits&&typeof L.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(L.maxPacketLifeTime&&L.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(I&&L.ordered&&(L.maxPacketLifeTime||L.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(!I&&(L.maxPacketLifeTime||L.maxRetransmits)&&(L.ordered=!1),L.label&&typeof L.label!="string")throw new TypeError("invalid params.label");if(L.protocol&&typeof L.protocol!="string")throw new TypeError("invalid params.protocol")}function D(L){if(typeof L!="object")throw new TypeError("caps is not an object");if(!L.numStreams||typeof L.numStreams!="object")throw new TypeError("missing caps.numStreams");N(L.numStreams)}function O(L,I){const H={codecs:[],headerExtensions:[]};for(const Y of I.codecs??[]){if(k(Y))continue;const B=(L.codecs??[]).find(ae=>z(ae,Y,{strict:!0,modify:!0}));if(!B)continue;const Z={mimeType:B.mimeType,kind:B.kind,clockRate:B.clockRate,channels:B.channels,localPayloadType:B.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:Y.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:B.parameters,remoteParameters:Y.parameters,rtcpFeedback:ee(B,Y)};H.codecs.push(Z)}for(const Y of H.codecs){const B=L.codecs.find(ae=>k(ae)&&ae.parameters.apt===Y.localPayloadType),Z=I.codecs.find(ae=>k(ae)&&ae.parameters.apt===Y.remotePayloadType);B&&Z&&(Y.localRtxPayloadType=B.preferredPayloadType,Y.remoteRtxPayloadType=Z.preferredPayloadType)}for(const Y of I.headerExtensions){const B=L.headerExtensions.find(ae=>V(ae,Y));if(!B)continue;const Z={kind:Y.kind,uri:Y.uri,sendId:B.preferredId,recvId:Y.preferredId,encrypt:B.preferredEncrypt,direction:"sendrecv"};switch(Y.direction){case"sendrecv":{Z.direction="sendrecv";break}case"recvonly":{Z.direction="sendonly";break}case"sendonly":{Z.direction="recvonly";break}case"inactive":{Z.direction="inactive";break}}H.headerExtensions.push(Z)}return H}function y(L){const I={codecs:[],headerExtensions:[]};for(const H of L.codecs){const Y={mimeType:H.mimeType,kind:H.kind,preferredPayloadType:H.remotePayloadType,clockRate:H.clockRate,channels:H.channels,parameters:H.localParameters,rtcpFeedback:H.rtcpFeedback};if(I.codecs.push(Y),!H.remoteRtxPayloadType)continue;const B={mimeType:`${H.kind}/rtx`,kind:H.kind,preferredPayloadType:H.remoteRtxPayloadType,clockRate:H.clockRate,parameters:{apt:H.remotePayloadType},rtcpFeedback:[]};I.codecs.push(B)}for(const H of L.headerExtensions){if(H.direction!=="sendrecv"&&H.direction!=="recvonly")continue;const Y={kind:H.kind,uri:H.uri,preferredId:H.recvId,preferredEncrypt:H.encrypt,direction:H.direction};I.headerExtensions.push(Y)}return I}function b(L,I){const H={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const Y of I.codecs){if(Y.kind!==L)continue;const B={mimeType:Y.mimeType,payloadType:Y.localPayloadType,clockRate:Y.clockRate,channels:Y.channels,parameters:Y.localParameters,rtcpFeedback:Y.rtcpFeedback};if(H.codecs.push(B),Y.localRtxPayloadType){const Z={mimeType:`${Y.kind}/rtx`,payloadType:Y.localRtxPayloadType,clockRate:Y.clockRate,parameters:{apt:Y.localPayloadType},rtcpFeedback:[]};H.codecs.push(Z)}}for(const Y of I.headerExtensions){if(Y.kind&&Y.kind!==L||Y.direction!=="sendrecv"&&Y.direction!=="sendonly")continue;const B={uri:Y.uri,id:Y.sendId,encrypt:Y.encrypt,parameters:{}};H.headerExtensions.push(B)}return H}function U(L,I){const H={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const Y of I.codecs){if(Y.kind!==L)continue;const B={mimeType:Y.mimeType,payloadType:Y.localPayloadType,clockRate:Y.clockRate,channels:Y.channels,parameters:Y.remoteParameters,rtcpFeedback:Y.rtcpFeedback};if(H.codecs.push(B),Y.localRtxPayloadType){const Z={mimeType:`${Y.kind}/rtx`,payloadType:Y.localRtxPayloadType,clockRate:Y.clockRate,parameters:{apt:Y.localPayloadType},rtcpFeedback:[]};H.codecs.push(Z)}}for(const Y of I.headerExtensions){if(Y.kind&&Y.kind!==L||Y.direction!=="sendrecv"&&Y.direction!=="sendonly")continue;const B={uri:Y.uri,id:Y.sendId,encrypt:Y.encrypt,parameters:{}};H.headerExtensions.push(B)}if(H.headerExtensions.some(Y=>Y.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const Y of H.codecs)Y.rtcpFeedback=(Y.rtcpFeedback??[]).filter(B=>B.type!=="goog-remb");else if(H.headerExtensions.some(Y=>Y.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const Y of H.codecs)Y.rtcpFeedback=(Y.rtcpFeedback??[]).filter(B=>B.type!=="transport-cc");else for(const Y of H.codecs)Y.rtcpFeedback=(Y.rtcpFeedback??[]).filter(B=>B.type!=="transport-cc"&&B.type!=="goog-remb");return H}function A(L,I){const H=[];if(!I)H.push(L[0]),k(L[1])&&H.push(L[1]);else{for(let Y=0;Y<L.length;++Y)if(z(L[Y],I,{strict:!0})){H.push(L[Y]),k(L[Y+1])&&H.push(L[Y+1]);break}if(H.length===0)throw new TypeError("no matching codec found")}return H}function g(L){L=_.clone(L),m(L);const I={mid:T,codecs:[],headerExtensions:[],encodings:[{ssrc:w}],rtcp:{cname:"probator"}};return I.codecs.push(L.codecs[0]),I.codecs[0].payloadType=R,I.headerExtensions=L.headerExtensions,I}function h(L,I){return I.codecs.some(H=>H.kind===L)}function a(L,I){if(m(L),L.codecs.length===0)return!1;const H=L.codecs[0];return I.codecs.some(Y=>Y.remotePayloadType===H.payloadType)}function r(L){const I=new RegExp("^(audio|video)/(.+)","i");if(typeof L!="object")throw new TypeError("codec is not an object");if(!L.mimeType||typeof L.mimeType!="string")throw new TypeError("missing codec.mimeType");const H=I.exec(L.mimeType);if(!H)throw new TypeError("invalid codec.mimeType");if(L.kind=H[1].toLowerCase(),L.preferredPayloadType&&typeof L.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof L.clockRate!="number")throw new TypeError("missing codec.clockRate");L.kind==="audio"?typeof L.channels!="number"&&(L.channels=1):delete L.channels,(!L.parameters||typeof L.parameters!="object")&&(L.parameters={});for(const Y of Object.keys(L.parameters)){let B=L.parameters[Y];if(B===void 0&&(L.parameters[Y]="",B=""),typeof B!="string"&&typeof B!="number")throw new TypeError(`invalid codec parameter [key:${Y}s, value:${B}]`);if(Y==="apt"&&typeof B!="number")throw new TypeError("invalid codec apt parameter")}(!L.rtcpFeedback||!Array.isArray(L.rtcpFeedback))&&(L.rtcpFeedback=[]);for(const Y of L.rtcpFeedback)u(Y)}function u(L){if(typeof L!="object")throw new TypeError("fb is not an object");if(!L.type||typeof L.type!="string")throw new TypeError("missing fb.type");(!L.parameter||typeof L.parameter!="string")&&(L.parameter="")}function p(L){if(typeof L!="object")throw new TypeError("ext is not an object");if(L.kind!=="audio"&&L.kind!=="video")throw new TypeError("invalid ext.kind");if(!L.uri||typeof L.uri!="string")throw new TypeError("missing ext.uri");if(typeof L.preferredId!="number")throw new TypeError("missing ext.preferredId");if(L.preferredEncrypt&&typeof L.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(L.preferredEncrypt||(L.preferredEncrypt=!1),L.direction&&typeof L.direction!="string")throw new TypeError("invalid ext.direction");L.direction||(L.direction="sendrecv")}function S(L){const I=new RegExp("^(audio|video)/(.+)","i");if(typeof L!="object")throw new TypeError("codec is not an object");if(!L.mimeType||typeof L.mimeType!="string")throw new TypeError("missing codec.mimeType");const H=I.exec(L.mimeType);if(!H)throw new TypeError("invalid codec.mimeType");if(typeof L.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof L.clockRate!="number")throw new TypeError("missing codec.clockRate");H[1].toLowerCase()==="audio"?typeof L.channels!="number"&&(L.channels=1):delete L.channels,(!L.parameters||typeof L.parameters!="object")&&(L.parameters={});for(const B of Object.keys(L.parameters)){let Z=L.parameters[B];if(Z===void 0&&(L.parameters[B]="",Z=""),typeof Z!="string"&&typeof Z!="number")throw new TypeError(`invalid codec parameter [key:${B}s, value:${Z}]`);if(B==="apt"&&typeof Z!="number")throw new TypeError("invalid codec apt parameter")}(!L.rtcpFeedback||!Array.isArray(L.rtcpFeedback))&&(L.rtcpFeedback=[]);for(const B of L.rtcpFeedback)u(B)}function P(L){if(typeof L!="object")throw new TypeError("ext is not an object");if(!L.uri||typeof L.uri!="string")throw new TypeError("missing ext.uri");if(typeof L.id!="number")throw new TypeError("missing ext.id");if(L.encrypt&&typeof L.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");L.encrypt||(L.encrypt=!1),(!L.parameters||typeof L.parameters!="object")&&(L.parameters={});for(const I of Object.keys(L.parameters)){let H=L.parameters[I];if(H===void 0&&(L.parameters[I]="",H=""),typeof H!="string"&&typeof H!="number")throw new TypeError("invalid header extension parameter")}}function v(L){if(typeof L!="object")throw new TypeError("encoding is not an object");if(L.ssrc&&typeof L.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(L.rid&&typeof L.rid!="string")throw new TypeError("invalid encoding.rid");if(L.rtx&&typeof L.rtx!="object")throw new TypeError("invalid encoding.rtx");if(L.rtx&&typeof L.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if((!L.dtx||typeof L.dtx!="boolean")&&(L.dtx=!1),L.scalabilityMode&&typeof L.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function M(L){if(typeof L!="object")throw new TypeError("rtcp is not an object");if(L.cname&&typeof L.cname!="string")throw new TypeError("invalid rtcp.cname");(!L.reducedSize||typeof L.reducedSize!="boolean")&&(L.reducedSize=!0)}function N(L){if(typeof L!="object")throw new TypeError("numStreams is not an object");if(typeof L.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof L.MIS!="number")throw new TypeError("missing numStreams.MIS")}function k(L){return L?/.+\/rtx$/i.test(L.mimeType):!1}function z(L,I,{strict:H=!1,modify:Y=!1}={}){const B=L.mimeType.toLowerCase(),Z=I.mimeType.toLowerCase();if(B!==Z||L.clockRate!==I.clockRate||L.channels!==I.channels)return!1;switch(B){case"video/h264":{if(H){const ae=L.parameters["packetization-mode"]||0,le=I.parameters["packetization-mode"]||0;if(ae!==le||!s.isSameProfile(L.parameters,I.parameters))return!1;let re;try{re=s.generateProfileLevelIdStringForAnswer(L.parameters,I.parameters)}catch{return!1}Y&&(re?(L.parameters["profile-level-id"]=re,I.parameters["profile-level-id"]=re):(delete L.parameters["profile-level-id"],delete I.parameters["profile-level-id"]))}break}case"video/vp9":{if(H){const ae=L.parameters["profile-id"]||0,le=I.parameters["profile-id"]||0;if(ae!==le)return!1}break}}return!0}function V(L,I){return!(L.kind&&I.kind&&L.kind!==I.kind||L.uri!==I.uri)}function ee(L,I){const H=[];for(const Y of L.rtcpFeedback??[]){const B=(I.rtcpFeedback??[]).find(Z=>Z.type===Y.type&&(Z.parameter===Y.parameter||!Z.parameter&&!Y.parameter));B&&H.push(B)}return H}return Je}var It={},vi={},Ts={},om;function MS(){if(om)return Ts;om=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.Logger=void 0;const d=pc(),c="awaitqueue";let l=class{constructor(_){_?(this._debug=(0,d.default)(`${c}:${_}`),this._warn=(0,d.default)(`${c}:WARN:${_}`),this._error=(0,d.default)(`${c}:ERROR:${_}`)):(this._debug=(0,d.default)(c),this._warn=(0,d.default)(`${c}:WARN`),this._error=(0,d.default)(`${c}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};return Ts.Logger=l,Ts}var cm;function xS(){if(cm)return vi;cm=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.AwaitQueue=vi.AwaitQueueRemovedTaskError=vi.AwaitQueueStoppedError=void 0;const d=MS(),c=new d.Logger;class l extends Error{constructor(w){super(w??"AwaitQueue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,l)}}vi.AwaitQueueStoppedError=l;class s extends Error{constructor(w){super(w??"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,s)}}vi.AwaitQueueRemovedTaskError=s;class _{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(w,R){if(R=R??w.name,c.debug(`push() [name:${R}]`),typeof w!="function")throw new TypeError("given task is not a function");if(R)try{Object.defineProperty(w,"name",{value:R})}catch{}return new Promise((C,m)=>{const x={id:this.nextTaskId++,task:w,name:R,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:D=>{if(x.completed)return;x.completed=!0,this.pendingTasks.delete(x.id),c.debug(`resolving task [name:${x.name}]`),C(D);const[O]=this.pendingTasks.values();O&&!O.executedAt&&this.execute(O)},reject:D=>{if(!x.completed&&(x.completed=!0,this.pendingTasks.delete(x.id),c.debug(`rejecting task [name:${x.name}]: %s`,String(D)),m(D),!this.stopping)){const[O]=this.pendingTasks.values();O&&!O.executedAt&&this.execute(O)}}};this.pendingTasks.set(x.id,x),this.pendingTasks.size===1&&this.execute(x)})}stop(){c.debug("stop()"),this.stopping=!0;for(const w of this.pendingTasks.values())c.debug(`stop() | stopping task [name:${w.name}]`),w.reject(new l);this.stopping=!1}remove(w){c.debug(`remove() [taskIdx:${w}]`);const R=Array.from(this.pendingTasks.values())[w];if(!R){c.debug(`stop() | no task with given idx [taskIdx:${w}]`);return}R.reject(new s)}dump(){const w=Date.now();let R=0;return Array.from(this.pendingTasks.values()).map(C=>({idx:R++,task:C.task,name:C.name,enqueuedTime:C.executedAt?C.executedAt-C.enqueuedAt:w-C.enqueuedAt,executionTime:C.executedAt?w-C.executedAt:0}))}async execute(w){if(c.debug(`execute() [name:${w.name}]`),w.executedAt)throw new Error("task already being executed");w.executedAt=Date.now();try{const R=await w.task();w.resolve(R)}catch(R){w.reject(R)}}}return vi.AwaitQueue=_,vi}/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Au,lm;function LS(){if(lm)return Au;lm=1;let d;return Au=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:q_):c=>(d||(d=Promise.resolve())).then(c).catch(l=>setTimeout(()=>{throw l},0)),Au}var Cs={},um;function yg(){if(um)return Cs;um=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.Producer=void 0;const d=rt(),c=Er(),l=Dt(),s=new d.Logger("Producer");let _=class extends c.EnhancedEventEmitter{constructor({id:w,localId:R,rtpSender:C,track:m,rtpParameters:x,stopTracks:D,disableTrackOnPause:O,zeroRtpOnPause:y,appData:b}){super(),this._closed=!1,this._observer=new c.EnhancedEventEmitter,s.debug("constructor()"),this._id=w,this._localId=R,this._rtpSender=C,this._track=m,this._kind=m.kind,this._rtpParameters=x,this._paused=O?!m.enabled:!1,this._maxSpatialLayer=void 0,this._stopTracks=D,this._disableTrackOnPause=O,this._zeroRtpOnPause=y,this._appData=b??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(w){this._appData=w}get observer(){return this._observer}close(){this._closed||(s.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(s.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new l.InvalidStateError("closed");return new Promise((w,R)=>{this.safeEmit("@getstats",w,R)})}pause(){if(s.debug("pause()"),this._closed){s.error("pause() | Producer closed");return}this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((w,R)=>{this.safeEmit("@pause",w,R)}).catch(()=>{}),this._observer.safeEmit("pause")}resume(){if(s.debug("resume()"),this._closed){s.error("resume() | Producer closed");return}this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((w,R)=>{this.safeEmit("@resume",w,R)}).catch(()=>{}),this._observer.safeEmit("resume")}async replaceTrack({track:w}){if(s.debug("replaceTrack() [track:%o]",w),this._closed){if(w&&this._stopTracks)try{w.stop()}catch{}throw new l.InvalidStateError("closed")}else if(w&&w.readyState==="ended")throw new l.InvalidStateError("track ended");if(w===this._track){s.debug("replaceTrack() | same track, ignored");return}await new Promise((R,C)=>{this.safeEmit("@replacetrack",w,R,C)}),this.destroyTrack(),this._track=w,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()}async setMaxSpatialLayer(w){if(this._closed)throw new l.InvalidStateError("closed");if(this._kind!=="video")throw new l.UnsupportedError("not a video Producer");if(typeof w!="number")throw new TypeError("invalid spatialLayer");w!==this._maxSpatialLayer&&(await new Promise((R,C)=>{this.safeEmit("@setmaxspatiallayer",w,R,C)}).catch(()=>{}),this._maxSpatialLayer=w)}async setRtpEncodingParameters(w){if(this._closed)throw new l.InvalidStateError("closed");if(typeof w!="object")throw new TypeError("invalid params");await new Promise((R,C)=>{this.safeEmit("@setrtpencodingparameters",w,R,C)})}onTrackEnded(){s.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}};return Cs.Producer=_,Cs}var Es={},dm;function bg(){if(dm)return Es;dm=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.Consumer=void 0;const d=rt(),c=Er(),l=Dt(),s=new d.Logger("Consumer");let _=class extends c.EnhancedEventEmitter{constructor({id:w,localId:R,producerId:C,rtpReceiver:m,track:x,rtpParameters:D,appData:O}){super(),this._closed=!1,this._observer=new c.EnhancedEventEmitter,s.debug("constructor()"),this._id=w,this._localId=R,this._producerId=C,this._rtpReceiver=m,this._track=x,this._rtpParameters=D,this._paused=!x.enabled,this._appData=O??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(w){this._appData=w}get observer(){return this._observer}close(){this._closed||(s.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(s.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new l.InvalidStateError("closed");return new Promise((w,R)=>{this.safeEmit("@getstats",w,R)})}pause(){if(s.debug("pause()"),this._closed){s.error("pause() | Consumer closed");return}if(this._paused){s.debug("pause() | Consumer is already paused");return}this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause")}resume(){if(s.debug("resume()"),this._closed){s.error("resume() | Consumer closed");return}if(!this._paused){s.debug("resume() | Consumer is already resumed");return}this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")}onTrackEnded(){s.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}};return Es.Consumer=_,Es}var Ds={},fm;function Sg(){if(fm)return Ds;fm=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.DataProducer=void 0;const d=rt(),c=Er(),l=Dt(),s=new d.Logger("DataProducer");let _=class extends c.EnhancedEventEmitter{constructor({id:w,dataChannel:R,sctpStreamParameters:C,appData:m}){super(),this._closed=!1,this._observer=new c.EnhancedEventEmitter,s.debug("constructor()"),this._id=w,this._dataChannel=R,this._sctpStreamParameters=C,this._appData=m??{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(w){this._dataChannel.bufferedAmountLowThreshold=w}get appData(){return this._appData}set appData(w){this._appData=w}get observer(){return this._observer}close(){this._closed||(s.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(s.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(w){if(s.debug("send()"),this._closed)throw new l.InvalidStateError("closed");this._dataChannel.send(w)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(s.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",w=>{if(this._closed)return;let{error:R}=w;R||(R=new Error("unknown DataChannel error")),R.errorDetail==="sctp-failure"?s.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",R.sctpCauseCode,R.message):s.error('DataChannel "error" event: %o',R),this.safeEmit("error",R)}),this._dataChannel.addEventListener("close",()=>{this._closed||(s.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||s.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}};return Ds.DataProducer=_,Ds}var Os={},pm;function wg(){if(pm)return Os;pm=1,Object.defineProperty(Os,"__esModule",{value:!0}),Os.DataConsumer=void 0;const d=rt(),c=Er(),l=new d.Logger("DataConsumer");let s=class extends c.EnhancedEventEmitter{constructor({id:T,dataProducerId:w,dataChannel:R,sctpStreamParameters:C,appData:m}){super(),this._closed=!1,this._observer=new c.EnhancedEventEmitter,l.debug("constructor()"),this._id=T,this._dataProducerId=w,this._dataChannel=R,this._sctpStreamParameters=C,this._appData=m??{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(T){this._dataChannel.binaryType=T}get appData(){return this._appData}set appData(T){this._appData=T}get observer(){return this._observer}close(){this._closed||(l.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(l.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(l.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",T=>{if(this._closed)return;let{error:w}=T;w||(w=new Error("unknown DataChannel error")),w.errorDetail==="sctp-failure"?l.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",w.sctpCauseCode,w.message):l.error('DataChannel "error" event: %o',w),this.safeEmit("error",w)}),this._dataChannel.addEventListener("close",()=>{this._closed||(l.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",T=>{this._closed||this.safeEmit("message",T.data)})}};return Os.DataConsumer=s,Os}var hm;function Rg(){if(hm)return It;hm=1;var d=It&&It.__createBinding||(Object.create?function(h,a,r,u){u===void 0&&(u=r);var p=Object.getOwnPropertyDescriptor(a,r);(!p||("get"in p?!a.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return a[r]}}),Object.defineProperty(h,u,p)}:function(h,a,r,u){u===void 0&&(u=r),h[u]=a[r]}),c=It&&It.__setModuleDefault||(Object.create?function(h,a){Object.defineProperty(h,"default",{enumerable:!0,value:a})}:function(h,a){h.default=a}),l=It&&It.__importStar||function(){var h=function(a){return h=Object.getOwnPropertyNames||function(r){var u=[];for(var p in r)Object.prototype.hasOwnProperty.call(r,p)&&(u[u.length]=p);return u},h(a)};return function(a){if(a&&a.__esModule)return a;var r={};if(a!=null)for(var u=h(a),p=0;p<u.length;p++)u[p]!=="default"&&d(r,a,u[p]);return c(r,a),r}}(),s=It&&It.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(It,"__esModule",{value:!0}),It.Transport=void 0;const _=xS(),T=s(LS()),w=rt(),R=Er(),C=Dt(),m=l(_t()),x=l(Pt()),D=yg(),O=bg(),y=Sg(),b=wg(),U=new w.Logger("Transport");class A{constructor(a){this.consumerOptions=a,this.promise=new Promise((r,u)=>{this.resolve=r,this.reject=u})}}let g=class extends R.EnhancedEventEmitter{constructor({direction:a,id:r,iceParameters:u,iceCandidates:p,dtlsParameters:S,sctpParameters:P,iceServers:v,iceTransportPolicy:M,additionalSettings:N,proprietaryConstraints:k,appData:z,handlerFactory:V,extendedRtpCapabilities:ee,canProduceByKind:L}){super(),this._closed=!1,this._iceGatheringState="new",this._connectionState="new",this._producers=new Map,this._consumers=new Map,this._dataProducers=new Map,this._dataConsumers=new Map,this._probatorConsumerCreated=!1,this._awaitQueue=new _.AwaitQueue,this._pendingConsumerTasks=[],this._consumerCreationInProgress=!1,this._pendingPauseConsumers=new Map,this._consumerPauseInProgress=!1,this._pendingResumeConsumers=new Map,this._consumerResumeInProgress=!1,this._pendingCloseConsumers=new Map,this._consumerCloseInProgress=!1,this._observer=new R.EnhancedEventEmitter,U.debug("constructor() [id:%s, direction:%s]",r,a),this._id=r,this._direction=a,this._extendedRtpCapabilities=ee,this._canProduceByKind=L,this._maxSctpMessageSize=P?P.maxMessageSize:null;const I=m.clone(N)??{};delete I.iceServers,delete I.iceTransportPolicy,delete I.bundlePolicy,delete I.rtcpMuxPolicy,delete I.sdpSemantics,this._handler=V(),this._handler.run({direction:a,iceParameters:u,iceCandidates:p,dtlsParameters:S,sctpParameters:P,iceServers:v,iceTransportPolicy:M,additionalSettings:I,proprietaryConstraints:k,extendedRtpCapabilities:ee}),this._appData=z??{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get iceGatheringState(){return this._iceGatheringState}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(a){this._appData=a}get observer(){return this._observer}close(){if(!this._closed){U.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close(),this._connectionState="closed";for(const a of this._producers.values())a.transportClosed();this._producers.clear();for(const a of this._consumers.values())a.transportClosed();this._consumers.clear();for(const a of this._dataProducers.values())a.transportClosed();this._dataProducers.clear();for(const a of this._dataConsumers.values())a.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new C.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:a}){if(U.debug("restartIce()"),this._closed)throw new C.InvalidStateError("closed");if(!a)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>await this._handler.restartIce(a),"transport.restartIce()")}async updateIceServers({iceServers:a}={}){if(U.debug("updateIceServers()"),this._closed)throw new C.InvalidStateError("closed");if(!Array.isArray(a))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(a),"transport.updateIceServers()")}async produce({track:a,encodings:r,codecOptions:u,codec:p,stopTracks:S=!0,disableTrackOnPause:P=!0,zeroRtpOnPause:v=!1,onRtpSender:M,appData:N={}}={}){if(U.debug("produce() [track:%o]",a),this._closed)throw new C.InvalidStateError("closed");if(a){if(this._direction!=="send")throw new C.UnsupportedError("not a sending Transport");if(this._canProduceByKind[a.kind]){if(a.readyState==="ended")throw new C.InvalidStateError("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(N&&typeof N!="object")throw new TypeError("if given, appData must be an object")}else throw new C.UnsupportedError(`cannot produce ${a.kind}`)}else throw new TypeError("missing track");return this._awaitQueue.push(async()=>{let k;if(r&&!Array.isArray(r))throw TypeError("encodings must be an array");r&&r.length===0?k=void 0:r&&(k=r.map(L=>{const I={active:!0};return L.active===!1&&(I.active=!1),typeof L.dtx=="boolean"&&(I.dtx=L.dtx),typeof L.scalabilityMode=="string"&&(I.scalabilityMode=L.scalabilityMode),typeof L.scaleResolutionDownBy=="number"&&(I.scaleResolutionDownBy=L.scaleResolutionDownBy),typeof L.maxBitrate=="number"&&(I.maxBitrate=L.maxBitrate),typeof L.maxFramerate=="number"&&(I.maxFramerate=L.maxFramerate),typeof L.adaptivePtime=="boolean"&&(I.adaptivePtime=L.adaptivePtime),typeof L.priority=="string"&&(I.priority=L.priority),typeof L.networkPriority=="string"&&(I.networkPriority=L.networkPriority),I}));const{localId:z,rtpParameters:V,rtpSender:ee}=await this._handler.send({track:a,encodings:k,codecOptions:u,codec:p,onRtpSender:M});try{x.validateRtpParameters(V);const{id:L}=await new Promise((H,Y)=>{this.safeEmit("produce",{kind:a.kind,rtpParameters:V,appData:N},H,Y)}),I=new D.Producer({id:L,localId:z,rtpSender:ee,track:a,rtpParameters:V,stopTracks:S,disableTrackOnPause:P,zeroRtpOnPause:v,appData:N});return this._producers.set(I.id,I),this.handleProducer(I),this._observer.safeEmit("newproducer",I),I}catch(L){throw this._handler.stopSending(z).catch(()=>{}),L}},"transport.produce()").catch(k=>{if(S)try{a.stop()}catch{}throw k})}async consume({id:a,producerId:r,kind:u,rtpParameters:p,streamId:S,onRtpReceiver:P,appData:v={}}){if(U.debug("consume()"),this._closed)throw new C.InvalidStateError("closed");if(this._direction!=="recv")throw new C.UnsupportedError("not a receiving Transport");if(typeof a!="string")throw new TypeError("missing id");if(typeof r!="string")throw new TypeError("missing producerId");if(u!=="audio"&&u!=="video")throw new TypeError(`invalid kind '${u}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(v&&typeof v!="object")throw new TypeError("if given, appData must be an object");const M=m.clone(p);if(!x.canReceive(M,this._extendedRtpCapabilities))throw new C.UnsupportedError("cannot consume this Producer");const k=new A({id:a,producerId:r,kind:u,rtpParameters:M,streamId:S,onRtpReceiver:P,appData:v});return this._pendingConsumerTasks.push(k),(0,T.default)(()=>{this._closed||this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),k.promise}async produceData({ordered:a=!0,maxPacketLifeTime:r,maxRetransmits:u,label:p="",protocol:S="",appData:P={}}={}){if(U.debug("produceData()"),this._closed)throw new C.InvalidStateError("closed");if(this._direction!=="send")throw new C.UnsupportedError("not a sending Transport");if(this._maxSctpMessageSize){if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(P&&typeof P!="object")throw new TypeError("if given, appData must be an object")}else throw new C.UnsupportedError("SCTP not enabled by remote Transport");return(r||u)&&(a=!1),this._awaitQueue.push(async()=>{const{dataChannel:v,sctpStreamParameters:M}=await this._handler.sendDataChannel({ordered:a,maxPacketLifeTime:r,maxRetransmits:u,label:p,protocol:S});x.validateSctpStreamParameters(M);const{id:N}=await new Promise((z,V)=>{this.safeEmit("producedata",{sctpStreamParameters:M,label:p,protocol:S,appData:P},z,V)}),k=new y.DataProducer({id:N,dataChannel:v,sctpStreamParameters:M,appData:P});return this._dataProducers.set(k.id,k),this.handleDataProducer(k),this._observer.safeEmit("newdataproducer",k),k},"transport.produceData()")}async consumeData({id:a,dataProducerId:r,sctpStreamParameters:u,label:p="",protocol:S="",appData:P={}}){if(U.debug("consumeData()"),this._closed)throw new C.InvalidStateError("closed");if(this._direction!=="recv")throw new C.UnsupportedError("not a receiving Transport");if(this._maxSctpMessageSize){if(typeof a!="string")throw new TypeError("missing id");if(typeof r!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(P&&typeof P!="object")throw new TypeError("if given, appData must be an object")}else throw new C.UnsupportedError("SCTP not enabled by remote Transport");const v=m.clone(u);return x.validateSctpStreamParameters(v),this._awaitQueue.push(async()=>{const{dataChannel:M}=await this._handler.receiveDataChannel({sctpStreamParameters:v,label:p,protocol:S}),N=new b.DataConsumer({id:a,dataProducerId:r,dataChannel:M,sctpStreamParameters:v,appData:P});return this._dataConsumers.set(N.id,N),this.handleDataConsumer(N),this._observer.safeEmit("newdataconsumer",N),N},"transport.consumeData()")}async createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0){U.debug("createPendingConsumers() | there is no Consumer to be created");return}const a=[...this._pendingConsumerTasks];this._pendingConsumerTasks=[];let r;const u=[];for(const p of a){const{id:S,kind:P,rtpParameters:v,streamId:M,onRtpReceiver:N}=p.consumerOptions;u.push({trackId:S,kind:P,rtpParameters:v,streamId:M,onRtpReceiver:N})}try{const p=await this._handler.receive(u);for(let S=0;S<p.length;++S){const P=a[S],v=p[S],{id:M,producerId:N,kind:k,rtpParameters:z,appData:V}=P.consumerOptions,{localId:ee,rtpReceiver:L,track:I}=v,H=new O.Consumer({id:M,localId:ee,producerId:N,rtpReceiver:L,track:I,rtpParameters:z,appData:V});this._consumers.set(H.id,H),this.handleConsumer(H),!this._probatorConsumerCreated&&!r&&k==="video"&&(r=H),this._observer.safeEmit("newconsumer",H),P.resolve(H)}}catch(p){for(const S of a)S.reject(p)}if(r)try{const p=x.generateProbatorRtpParameters(r.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:p}]),U.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(p){U.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",p)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0){U.debug("pausePendingConsumers() | there is no Consumer to be paused");return}const a=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const r=a.map(u=>u.localId);await this._handler.pauseReceiving(r)}catch(r){U.error("pausePendingConsumers() | failed to pause Consumers:",r)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0){U.debug("resumePendingConsumers() | there is no Consumer to be resumed");return}const a=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const r=a.map(u=>u.localId);await this._handler.resumeReceiving(r)}catch(r){U.error("resumePendingConsumers() | failed to resume Consumers:",r)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0){U.debug("closePendingConsumers() | there is no Consumer to be closed");return}const a=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(a.map(r=>r.localId))}catch(r){U.error("closePendingConsumers() | failed to close Consumers:",r)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const a=this._handler;a.on("@connect",({dtlsParameters:r},u,p)=>{if(this._closed){p(new C.InvalidStateError("closed"));return}this.safeEmit("connect",{dtlsParameters:r},u,p)}),a.on("@icegatheringstatechange",r=>{r!==this._iceGatheringState&&(U.debug("ICE gathering state changed to %s",r),this._iceGatheringState=r,this._closed||this.safeEmit("icegatheringstatechange",r))}),a.on("@connectionstatechange",r=>{r!==this._connectionState&&(U.debug("connection state changed to %s",r),this._connectionState=r,this._closed||this.safeEmit("connectionstatechange",r))})}handleProducer(a){a.on("@close",()=>{this._producers.delete(a.id),!this._closed&&this._awaitQueue.push(async()=>await this._handler.stopSending(a.localId),"producer @close event").catch(r=>U.warn("producer.close() failed:%o",r))}),a.on("@pause",(r,u)=>{this._awaitQueue.push(async()=>await this._handler.pauseSending(a.localId),"producer @pause event").then(r).catch(u)}),a.on("@resume",(r,u)=>{this._awaitQueue.push(async()=>await this._handler.resumeSending(a.localId),"producer @resume event").then(r).catch(u)}),a.on("@replacetrack",(r,u,p)=>{this._awaitQueue.push(async()=>await this._handler.replaceTrack(a.localId,r),"producer @replacetrack event").then(u).catch(p)}),a.on("@setmaxspatiallayer",(r,u,p)=>{this._awaitQueue.push(async()=>await this._handler.setMaxSpatialLayer(a.localId,r),"producer @setmaxspatiallayer event").then(u).catch(p)}),a.on("@setrtpencodingparameters",(r,u,p)=>{this._awaitQueue.push(async()=>await this._handler.setRtpEncodingParameters(a.localId,r),"producer @setrtpencodingparameters event").then(u).catch(p)}),a.on("@getstats",(r,u)=>{if(this._closed)return u(new C.InvalidStateError("closed"));this._handler.getSenderStats(a.localId).then(r).catch(u)})}handleConsumer(a){a.on("@close",()=>{this._consumers.delete(a.id),this._pendingPauseConsumers.delete(a.id),this._pendingResumeConsumers.delete(a.id),!this._closed&&(this._pendingCloseConsumers.set(a.id,a),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),a.on("@pause",()=>{this._pendingResumeConsumers.has(a.id)&&this._pendingResumeConsumers.delete(a.id),this._pendingPauseConsumers.set(a.id,a),(0,T.default)(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),a.on("@resume",()=>{this._pendingPauseConsumers.has(a.id)&&this._pendingPauseConsumers.delete(a.id),this._pendingResumeConsumers.set(a.id,a),(0,T.default)(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),a.on("@getstats",(r,u)=>{if(this._closed)return u(new C.InvalidStateError("closed"));this._handler.getReceiverStats(a.localId).then(r).catch(u)})}handleDataProducer(a){a.on("@close",()=>{this._dataProducers.delete(a.id)})}handleDataConsumer(a){a.on("@close",()=>{this._dataConsumers.delete(a.id)})}};return It.Transport=g,It}var yn={},bn={},Pu={},Nu={exports:{}},mm;function sd(){if(mm)return Nu.exports;mm=1;var d=Nu.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(c){return c.encoding?"rtpmap:%d %s/%s/%s":c.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(c){return c.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(c){return c.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(c){return"extmap:%d"+(c.direction?"/%s":"%v")+(c["encrypt-uri"]?" %s":"%v")+" %s"+(c.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(c){return c.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(c){var l="candidate:%s %d %s %d %s %d typ %s";return l+=c.raddr!=null?" raddr %s rport %d":"%v%v",l+=c.tcptype!=null?" tcptype %s":"%v",c.generation!=null&&(l+=" generation %d"),l+=c["network-id"]!=null?" network-id %d":"%v",l+=c["network-cost"]!=null?" network-cost %d":"%v",l}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(c){var l="ssrc:%d";return c.attribute!=null&&(l+=" %s",c.value!=null&&(l+=":%s")),l}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(c){return c.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(c){return c.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(c){return"imageattr:%s %s %s"+(c.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(c){return"simulcast:%s %s"+(c.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(c){return"ts-refclk:%s"+(c.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(c){var l="mediaclk:";return l+=c.id!=null?"id=%s %s":"%v%s",l+=c.mediaClockValue!=null?"=%s":"",l+=c.rateNumerator!=null?" rate=%s":"",l+=c.rateDenominator!=null?"/%s":"",l}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(d).forEach(function(c){var l=d[c];l.forEach(function(s){s.reg||(s.reg=/(.*)/),s.format||(s.format="%s")})}),Nu.exports}var gm;function AS(){return gm||(gm=1,function(d){var c=function(R){return String(Number(R))===R?Number(R):R},l=function(R,C,m,x){if(x&&!m)C[x]=c(R[1]);else for(var D=0;D<m.length;D+=1)R[D+1]!=null&&(C[m[D]]=c(R[D+1]))},s=function(R,C,m){var x=R.name&&R.names;R.push&&!C[R.push]?C[R.push]=[]:x&&!C[R.name]&&(C[R.name]={});var D=R.push?{}:x?C[R.name]:C;l(m.match(R.reg),D,R.names,R.name),R.push&&C[R.push].push(D)},_=sd(),T=RegExp.prototype.test.bind(/^([a-z])=(.*)/);d.parse=function(R){var C={},m=[],x=C;return R.split(/(\r\n|\r|\n)/).filter(T).forEach(function(D){var O=D[0],y=D.slice(2);O==="m"&&(m.push({rtp:[],fmtp:[]}),x=m[m.length-1]);for(var b=0;b<(_[O]||[]).length;b+=1){var U=_[O][b];if(U.reg.test(y))return s(U,x,y)}}),C.media=m,C};var w=function(R,C){var m=C.split(/=(.+)/,2);return m.length===2?R[m[0]]=c(m[1]):m.length===1&&C.length>1&&(R[m[0]]=void 0),R};d.parseParams=function(R){return R.split(/;\s?/).reduce(w,{})},d.parseFmtpConfig=d.parseParams,d.parsePayloads=function(R){return R.toString().split(" ").map(Number)},d.parseRemoteCandidates=function(R){for(var C=[],m=R.split(" ").map(c),x=0;x<m.length;x+=3)C.push({component:m[x],ip:m[x+1],port:m[x+2]});return C},d.parseImageAttributes=function(R){return R.split(" ").map(function(C){return C.substring(1,C.length-1).split(",").reduce(w,{})})},d.parseSimulcastStreamList=function(R){return R.split(";").map(function(C){return C.split(",").map(function(m){var x,D=!1;return m[0]!=="~"?x=c(m):(x=c(m.substring(1,m.length)),D=!0),{scid:x,paused:D}})})}}(Pu)),Pu}var ku,vm;function PS(){if(vm)return ku;vm=1;var d=sd(),c=/%[sdv%]/g,l=function(w){var R=1,C=arguments,m=C.length;return w.replace(c,function(x){if(R>=m)return x;var D=C[R];switch(R+=1,x){case"%%":return"%";case"%s":return String(D);case"%d":return Number(D);case"%v":return""}})},s=function(w,R,C){var m=R.format instanceof Function?R.format(R.push?C:C[R.name]):R.format,x=[w+"="+m];if(R.names)for(var D=0;D<R.names.length;D+=1){var O=R.names[D];R.name?x.push(C[R.name][O]):x.push(C[R.names[D]])}else x.push(C[R.name]);return l.apply(null,x)},_=["v","o","s","i","u","e","p","c","b","t","r","z","a"],T=["i","c","b","a"];return ku=function(w,R){R=R||{},w.version==null&&(w.version=0),w.name==null&&(w.name=" "),w.media.forEach(function(D){D.payloads==null&&(D.payloads="")});var C=R.outerOrder||_,m=R.innerOrder||T,x=[];return C.forEach(function(D){d[D].forEach(function(O){O.name in w&&w[O.name]!=null?x.push(s(D,O,w)):O.push in w&&w[O.push]!=null&&w[O.push].forEach(function(y){x.push(s(D,O,y))})})}),w.media.forEach(function(D){x.push(s("m",d.m[0],D)),m.forEach(function(O){d[O].forEach(function(y){y.name in D&&D[y.name]!=null?x.push(s(O,y,D)):y.push in D&&D[y.push]!=null&&D[y.push].forEach(function(b){x.push(s(O,y,b))})})})}),x.join(`\r
`)+`\r
`},ku}var _m;function Nt(){if(_m)return bn;_m=1;var d=AS(),c=PS(),l=sd();return bn.grammar=l,bn.write=c,bn.parse=d.parse,bn.parseParams=d.parseParams,bn.parseFmtpConfig=d.parseFmtpConfig,bn.parsePayloads=d.parsePayloads,bn.parseRemoteCandidates=d.parseRemoteCandidates,bn.parseImageAttributes=d.parseImageAttributes,bn.parseSimulcastStreamList=d.parseSimulcastStreamList,bn}var Ht={},ym;function Bn(){if(ym)return Ht;ym=1;var d=Ht&&Ht.__createBinding||(Object.create?function(C,m,x,D){D===void 0&&(D=x);var O=Object.getOwnPropertyDescriptor(m,x);(!O||("get"in O?!m.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return m[x]}}),Object.defineProperty(C,D,O)}:function(C,m,x,D){D===void 0&&(D=x),C[D]=m[x]}),c=Ht&&Ht.__setModuleDefault||(Object.create?function(C,m){Object.defineProperty(C,"default",{enumerable:!0,value:m})}:function(C,m){C.default=m}),l=Ht&&Ht.__importStar||function(){var C=function(m){return C=Object.getOwnPropertyNames||function(x){var D=[];for(var O in x)Object.prototype.hasOwnProperty.call(x,O)&&(D[D.length]=O);return D},C(m)};return function(m){if(m&&m.__esModule)return m;var x={};if(m!=null)for(var D=C(m),O=0;O<D.length;O++)D[O]!=="default"&&d(x,m,D[O]);return c(x,m),x}}();Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.extractRtpCapabilities=_,Ht.extractDtlsParameters=T,Ht.getCname=w,Ht.applyCodecParameters=R;const s=l(Nt());function _({sdpObject:C}){const m=new Map,x=[];let D=!1,O=!1;for(const b of C.media){const U=b.type;switch(U){case"audio":{if(D)continue;D=!0;break}case"video":{if(O)continue;O=!0;break}default:continue}for(const A of b.rtp){const g={kind:U,mimeType:`${U}/${A.codec}`,preferredPayloadType:A.payload,clockRate:A.rate,channels:A.encoding,parameters:{},rtcpFeedback:[]};m.set(g.preferredPayloadType,g)}for(const A of b.fmtp||[]){const g=s.parseParams(A.config),h=m.get(A.payload);h&&(g!=null&&g.hasOwnProperty("profile-level-id")&&(g["profile-level-id"]=String(g["profile-level-id"])),h.parameters=g)}for(const A of b.rtcpFb||[]){const g={type:A.type,parameter:A.subtype};if(g.parameter||delete g.parameter,A.payload!=="*"){const h=m.get(A.payload);if(!h)continue;h.rtcpFeedback.push(g)}else for(const h of m.values())h.kind===U&&!/.+\/rtx$/i.test(h.mimeType)&&h.rtcpFeedback.push(g)}for(const A of b.ext||[]){if(A["encrypt-uri"])continue;const g={kind:U,uri:A.uri,preferredId:A.value};x.push(g)}}return{codecs:Array.from(m.values()),headerExtensions:x}}function T({sdpObject:C}){let m=C.setup,x=C.fingerprint;if(!m||!x){const y=(C.media||[]).find(b=>b.port!==0);y&&(m??(m=y.setup),x??(x=y.fingerprint))}if(m){if(!x)throw new Error("no a=fingerprint found at SDP session or media level")}else throw new Error("no a=setup found at SDP session or media level");let D;switch(m){case"active":{D="client";break}case"passive":{D="server";break}case"actpass":{D="auto";break}}return{role:D,fingerprints:[{algorithm:x.type,value:x.hash}]}}function w({offerMediaObject:C}){const m=(C.ssrcs||[]).find(x=>x.attribute==="cname");return m?m.value:""}function R({offerRtpParameters:C,answerMediaObject:m}){for(const x of C.codecs){const D=x.mimeType.toLowerCase();if(D!=="audio/opus"||!(m.rtp||[]).find(U=>U.payload===x.payloadType))continue;m.fmtp=m.fmtp||[];let y=m.fmtp.find(U=>U.payload===x.payloadType);y||(y={payload:x.payloadType,config:""},m.fmtp.push(y));const b=s.parseParams(y.config);switch(D){case"audio/opus":{const U=x.parameters["sprop-stereo"];U!==void 0&&(b.stereo=Number(U)?1:0);break}}y.config="";for(const U of Object.keys(b))y.config&&(y.config+=";"),y.config+=`${U}=${b[U]}`}}return Ht}var Ms={},bm;function Dr(){if(bm)return Ms;bm=1,Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.getRtpEncodings=d,Ms.addLegacySimulcast=c;function d({offerMediaObject:l}){const s=new Set;for(const w of l.ssrcs||[]){const R=w.id;s.add(R)}if(s.size===0)throw new Error("no a=ssrc lines found");const _=new Map;for(const w of l.ssrcGroups||[]){if(w.semantics!=="FID")continue;let[R,C]=w.ssrcs.split(/\s+/);R=Number(R),C=Number(C),s.has(R)&&(s.delete(R),s.delete(C),_.set(R,C))}for(const w of s)_.set(w,null);const T=[];for(const[w,R]of _){const C={ssrc:w};R&&(C.rtx={ssrc:R}),T.push(C)}return T}function c({offerMediaObject:l,numStreams:s}){if(s<=1)throw new TypeError("numStreams must be greater than 1");const _=(l.ssrcs||[]).find(y=>y.attribute==="msid");if(!_)throw new Error("a=ssrc line with msid information not found");const[T,w]=_.value.split(" "),R=Number(_.id);let C;(l.ssrcGroups||[]).some(y=>{if(y.semantics!=="FID")return!1;const b=y.ssrcs.split(/\s+/);return Number(b[0])===R?(C=Number(b[1]),!0):!1});const m=l.ssrcs.find(y=>y.attribute==="cname");if(!m)throw new Error("a=ssrc line with cname information not found");const x=m.value,D=[],O=[];for(let y=0;y<s;++y)D.push(R+y),C&&O.push(C+y);l.ssrcGroups=[],l.ssrcs=[],l.ssrcGroups.push({semantics:"SIM",ssrcs:D.join(" ")});for(const y of D)l.ssrcs.push({id:y,attribute:"cname",value:x}),l.ssrcs.push({id:y,attribute:"msid",value:`${T} ${w}`});for(let y=0;y<O.length;++y){const b=D[y],U=O[y];l.ssrcs.push({id:U,attribute:"cname",value:x}),l.ssrcs.push({id:U,attribute:"msid",value:`${T} ${w}`}),l.ssrcGroups.push({semantics:"FID",ssrcs:`${b} ${U}`})}}return Ms}var ec={},Sm;function hc(){if(Sm)return ec;Sm=1,Object.defineProperty(ec,"__esModule",{value:!0}),ec.addNackSupportForOpus=d;function d(c){var l;for(const s of c.codecs??[])(s.mimeType.toLowerCase()==="audio/opus"||s.mimeType.toLowerCase()==="audio/multiopus")&&!((l=s.rtcpFeedback)!=null&&l.some(_=>_.type==="nack"&&!_.parameter))&&(s.rtcpFeedback||(s.rtcpFeedback=[]),s.rtcpFeedback.push({type:"nack"}))}return ec}var xs={},wm;function Gt(){if(wm)return xs;wm=1,Object.defineProperty(xs,"__esModule",{value:!0}),xs.HandlerInterface=void 0;const d=Er();let c=class extends d.EnhancedEventEmitter{constructor(){super()}};return xs.HandlerInterface=c,xs}var Sn={},Et={},Rm;function NS(){if(Rm)return Et;Rm=1;var d=Et&&Et.__createBinding||(Object.create?function(m,x,D,O){O===void 0&&(O=D);var y=Object.getOwnPropertyDescriptor(x,D);(!y||("get"in y?!x.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return x[D]}}),Object.defineProperty(m,O,y)}:function(m,x,D,O){O===void 0&&(O=D),m[O]=x[D]}),c=Et&&Et.__setModuleDefault||(Object.create?function(m,x){Object.defineProperty(m,"default",{enumerable:!0,value:x})}:function(m,x){m.default=x}),l=Et&&Et.__importStar||function(){var m=function(x){return m=Object.getOwnPropertyNames||function(D){var O=[];for(var y in D)Object.prototype.hasOwnProperty.call(D,y)&&(O[O.length]=y);return O},m(x)};return function(x){if(x&&x.__esModule)return x;var D={};if(x!=null)for(var O=m(x),y=0;y<O.length;y++)O[y]!=="default"&&d(D,x,O[y]);return c(D,x),D}}();Object.defineProperty(Et,"__esModule",{value:!0}),Et.OfferMediaSection=Et.AnswerMediaSection=Et.MediaSection=void 0;const s=l(Nt()),_=l(_t());let T=class{constructor({iceParameters:x,iceCandidates:D,dtlsParameters:O,planB:y=!1}){if(this._mediaObject={},this._planB=y,x&&this.setIceParameters(x),D){this._mediaObject.candidates=[];for(const b of D){const U={};U.component=1,U.foundation=b.foundation,U.ip=b.address??b.ip,U.port=b.port,U.priority=b.priority,U.transport=b.protocol,U.type=b.type,b.tcpType&&(U.tcptype=b.tcpType),this._mediaObject.candidates.push(U)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}O&&this.setDtlsRole(O.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(x){this._mediaObject.iceUfrag=x.usernameFragment,this._mediaObject.icePwd=x.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}};Et.MediaSection=T;class w extends T{constructor({iceParameters:x,iceCandidates:D,dtlsParameters:O,sctpParameters:y,plainRtpParameters:b,planB:U=!1,offerMediaObject:A,offerRtpParameters:g,answerRtpParameters:h,codecOptions:a,extmapAllowMixed:r=!1}){switch(super({iceParameters:x,iceCandidates:D,dtlsParameters:O,planB:U}),this._mediaObject.mid=String(A.mid),this._mediaObject.type=A.type,this._mediaObject.protocol=A.protocol,b?(this._mediaObject.connection={ip:b.ip,version:b.ipVersion},this._mediaObject.port=b.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),A.type){case"audio":case"video":{this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const u of h.codecs){const p={payload:u.payloadType,codec:C(u),rate:u.clockRate};u.channels>1&&(p.encoding=u.channels),this._mediaObject.rtp.push(p);const S=_.clone(u.parameters)??{};let P=_.clone(u.rtcpFeedback)??[];if(a){const{opusStereo:M,opusFec:N,opusDtx:k,opusMaxPlaybackRate:z,opusMaxAverageBitrate:V,opusPtime:ee,opusNack:L,videoGoogleStartBitrate:I,videoGoogleMaxBitrate:H,videoGoogleMinBitrate:Y}=a,B=g.codecs.find(Z=>Z.payloadType===u.payloadType);switch(u.mimeType.toLowerCase()){case"audio/opus":case"audio/multiopus":{M!==void 0&&(B.parameters["sprop-stereo"]=M?1:0,S.stereo=M?1:0),N!==void 0&&(B.parameters.useinbandfec=N?1:0,S.useinbandfec=N?1:0),k!==void 0&&(B.parameters.usedtx=k?1:0,S.usedtx=k?1:0),z!==void 0&&(S.maxplaybackrate=z),V!==void 0&&(S.maxaveragebitrate=V),ee!==void 0&&(B.parameters.ptime=ee,S.ptime=ee),L||(B.rtcpFeedback=B.rtcpFeedback.filter(Z=>Z.type!=="nack"||Z.parameter),P=P.filter(Z=>Z.type!=="nack"||Z.parameter));break}case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":{I!==void 0&&(S["x-google-start-bitrate"]=I),H!==void 0&&(S["x-google-max-bitrate"]=H),Y!==void 0&&(S["x-google-min-bitrate"]=Y);break}}}const v={payload:u.payloadType,config:""};for(const M of Object.keys(S))v.config&&(v.config+=";"),v.config+=`${M}=${S[M]}`;v.config&&this._mediaObject.fmtp.push(v);for(const M of P)this._mediaObject.rtcpFb.push({payload:u.payloadType,type:M.type,subtype:M.parameter})}this._mediaObject.payloads=h.codecs.map(u=>u.payloadType).join(" "),this._mediaObject.ext=[];for(const u of h.headerExtensions)(A.ext??[]).some(S=>S.uri===u.uri)&&this._mediaObject.ext.push({uri:u.uri,value:u.id});if(r&&A.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),A.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:A.simulcast.list1},this._mediaObject.rids=[];for(const u of A.rids??[])u.direction==="send"&&this._mediaObject.rids.push({id:u.id,direction:"recv"})}else if(A.simulcast_03){this._mediaObject.simulcast_03={value:A.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const u of A.rids??[])u.direction==="send"&&this._mediaObject.rids.push({id:u.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",this._planB&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break}case"application":{typeof A.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=y.port,this._mediaObject.maxMessageSize=y.maxMessageSize):A.sctpmap&&(this._mediaObject.payloads=y.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:y.port,maxMessageSize:y.maxMessageSize});break}}}setDtlsRole(x){switch(x){case"client":{this._mediaObject.setup="active";break}case"server":{this._mediaObject.setup="passive";break}case"auto":{this._mediaObject.setup="actpass";break}}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(x){var b,U;if(!((b=this._mediaObject.simulcast)!=null&&b.list1))return;const D={};for(const A of x)A.rid&&(D[A.rid]=A);const O=this._mediaObject.simulcast.list1,y=s.parseSimulcastStreamList(O);for(const A of y)for(const g of A)g.paused=!((U=D[g.scid])!=null&&U.active);this._mediaObject.simulcast.list1=y.map(A=>A.map(g=>`${g.paused?"~":""}${g.scid}`).join(",")).join(";")}}Et.AnswerMediaSection=w;class R extends T{constructor({iceParameters:x,iceCandidates:D,dtlsParameters:O,sctpParameters:y,plainRtpParameters:b,planB:U=!1,mid:A,kind:g,offerRtpParameters:h,streamId:a,trackId:r,oldDataChannelSpec:u=!1}){var p;switch(super({iceParameters:x,iceCandidates:D,dtlsParameters:O,planB:U}),this._mediaObject.mid=String(A),this._mediaObject.type=g,b?(this._mediaObject.connection={ip:b.ip,version:b.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=b.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},y?this._mediaObject.protocol="UDP/DTLS/SCTP":this._mediaObject.protocol="UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),g){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${a??"-"} ${r}`);for(const M of h.codecs){const N={payload:M.payloadType,codec:C(M),rate:M.clockRate};M.channels>1&&(N.encoding=M.channels),this._mediaObject.rtp.push(N);const k={payload:M.payloadType,config:""};for(const z of Object.keys(M.parameters))k.config&&(k.config+=";"),k.config+=`${z}=${M.parameters[z]}`;k.config&&this._mediaObject.fmtp.push(k);for(const z of M.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:M.payloadType,type:z.type,subtype:z.parameter})}this._mediaObject.payloads=h.codecs.map(M=>M.payloadType).join(" "),this._mediaObject.ext=[];for(const M of h.headerExtensions)this._mediaObject.ext.push({uri:M.uri,value:M.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const S=h.encodings[0],P=S.ssrc,v=(p=S.rtx)==null?void 0:p.ssrc;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],h.rtcp.cname&&this._mediaObject.ssrcs.push({id:P,attribute:"cname",value:h.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:P,attribute:"msid",value:`${a??"-"} ${r}`}),v&&(h.rtcp.cname&&this._mediaObject.ssrcs.push({id:v,attribute:"cname",value:h.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:v,attribute:"msid",value:`${a??"-"} ${r}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${P} ${v}`}));break}case"application":{u?(this._mediaObject.payloads=y.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:y.port,maxMessageSize:y.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=y.port,this._mediaObject.maxMessageSize=y.maxMessageSize);break}}}setDtlsRole(x){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:x,streamId:D,trackId:O}){var g;const y=x.encodings[0],b=y.ssrc,U=(g=y.rtx)==null?void 0:g.ssrc,A=this._mediaObject.payloads.split(" ");for(const h of x.codecs){if(A.includes(String(h.payloadType)))continue;const a={payload:h.payloadType,codec:C(h),rate:h.clockRate};h.channels>1&&(a.encoding=h.channels),this._mediaObject.rtp.push(a);const r={payload:h.payloadType,config:""};for(const u of Object.keys(h.parameters))r.config&&(r.config+=";"),r.config+=`${u}=${h.parameters[u]}`;r.config&&this._mediaObject.fmtp.push(r);for(const u of h.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:h.payloadType,type:u.type,subtype:u.parameter})}this._mediaObject.payloads+=` ${x.codecs.filter(h=>!this._mediaObject.payloads.includes(h.payloadType)).map(h=>h.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),x.rtcp.cname&&this._mediaObject.ssrcs.push({id:b,attribute:"cname",value:x.rtcp.cname}),this._mediaObject.ssrcs.push({id:b,attribute:"msid",value:`${D??"-"} ${O}`}),U&&(x.rtcp.cname&&this._mediaObject.ssrcs.push({id:U,attribute:"cname",value:x.rtcp.cname}),this._mediaObject.ssrcs.push({id:U,attribute:"msid",value:`${D??"-"} ${O}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${b} ${U}`}))}planBStopReceiving({offerRtpParameters:x}){var b;const D=x.encodings[0],O=D.ssrc,y=(b=D.rtx)==null?void 0:b.ssrc;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(U=>U.id!==O&&U.id!==y),y&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(U=>U.ssrcs!==`${O} ${y}`))}}Et.OfferMediaSection=R;function C(m){const D=new RegExp("^(audio|video)/(.+)","i").exec(m.mimeType);if(!D)throw new TypeError("invalid codec.mimeType");return D[2]}return Et}var Tm;function Un(){if(Tm)return Sn;Tm=1;var d=Sn&&Sn.__createBinding||(Object.create?function(C,m,x,D){D===void 0&&(D=x);var O=Object.getOwnPropertyDescriptor(m,x);(!O||("get"in O?!m.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return m[x]}}),Object.defineProperty(C,D,O)}:function(C,m,x,D){D===void 0&&(D=x),C[D]=m[x]}),c=Sn&&Sn.__setModuleDefault||(Object.create?function(C,m){Object.defineProperty(C,"default",{enumerable:!0,value:m})}:function(C,m){C.default=m}),l=Sn&&Sn.__importStar||function(){var C=function(m){return C=Object.getOwnPropertyNames||function(x){var D=[];for(var O in x)Object.prototype.hasOwnProperty.call(x,O)&&(D[D.length]=O);return D},C(m)};return function(m){if(m&&m.__esModule)return m;var x={};if(m!=null)for(var D=C(m),O=0;O<D.length;O++)D[O]!=="default"&&d(x,m,D[O]);return c(x,m),x}}();Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.RemoteSdp=void 0;const s=l(Nt()),_=rt(),T=NS(),w=new _.Logger("RemoteSdp");let R=class{constructor({iceParameters:m,iceCandidates:x,dtlsParameters:D,sctpParameters:O,plainRtpParameters:y,planB:b=!1}){if(this._mediaSections=[],this._midToIndex=new Map,this._iceParameters=m,this._iceCandidates=x,this._dtlsParameters=D,this._sctpParameters=O,this._plainRtpParameters=y,this._planB=b,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},m!=null&&m.iceLite&&(this._sdpObject.icelite="ice-lite"),D){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const U=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:D.fingerprints[U-1].algorithm,hash:D.fingerprints[U-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}y&&(this._sdpObject.origin.address=y.ip,this._sdpObject.origin.ipVer=y.ipVersion)}updateIceParameters(m){w.debug("updateIceParameters() [iceParameters:%o]",m),this._iceParameters=m,this._sdpObject.icelite=m.iceLite?"ice-lite":void 0;for(const x of this._mediaSections)x.setIceParameters(m)}updateDtlsRole(m){w.debug("updateDtlsRole() [role:%s]",m),this._dtlsParameters.role=m;for(const x of this._mediaSections)x.setDtlsRole(m)}getNextMediaSectionIdx(){for(let m=0;m<this._mediaSections.length;++m){const x=this._mediaSections[m];if(x.closed)return{idx:m,reuseMid:x.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:m,reuseMid:x,offerRtpParameters:D,answerRtpParameters:O,codecOptions:y,extmapAllowMixed:b=!1}){const U=new T.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:m,offerRtpParameters:D,answerRtpParameters:O,codecOptions:y,extmapAllowMixed:b});x?this._replaceMediaSection(U,x):this._midToIndex.has(U.mid)?this._replaceMediaSection(U):this._addMediaSection(U)}receive({mid:m,kind:x,offerRtpParameters:D,streamId:O,trackId:y}){const b=this._midToIndex.get(m);let U;if(b!==void 0&&(U=this._mediaSections[b]),U)U.planBReceive({offerRtpParameters:D,streamId:O,trackId:y}),this._replaceMediaSection(U);else{U=new T.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:m,kind:x,offerRtpParameters:D,streamId:O,trackId:y});const A=this._mediaSections.find(g=>g.closed);A?this._replaceMediaSection(U,A.mid):this._addMediaSection(U)}}pauseMediaSection(m){this._findMediaSection(m).pause()}resumeSendingMediaSection(m){this._findMediaSection(m).resume()}resumeReceivingMediaSection(m){this._findMediaSection(m).resume()}disableMediaSection(m){this._findMediaSection(m).disable()}closeMediaSection(m){const x=this._findMediaSection(m);return m===this._firstMid?(w.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",m),this.disableMediaSection(m),!1):(x.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(m,x){const D=this._findMediaSection(m);D.muxSimulcastStreams(x),this._replaceMediaSection(D)}planBStopReceiving({mid:m,offerRtpParameters:x}){const D=this._findMediaSection(m);D.planBStopReceiving({offerRtpParameters:x}),this._replaceMediaSection(D)}sendSctpAssociation({offerMediaObject:m}){const x=new T.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:m});this._addMediaSection(x)}receiveSctpAssociation({oldDataChannelSpec:m=!1}={}){const x=new T.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:m});this._addMediaSection(x)}getSdp(){return this._sdpObject.origin.sessionVersion++,s.write(this._sdpObject)}_addMediaSection(m){this._firstMid||(this._firstMid=m.mid),this._mediaSections.push(m),this._midToIndex.set(m.mid,this._mediaSections.length-1),this._sdpObject.media.push(m.getObject()),this._regenerateBundleMids()}_replaceMediaSection(m,x){if(typeof x=="string"){const D=this._midToIndex.get(x);if(D===void 0)throw new Error(`no media section found for reuseMid '${x}'`);const O=this._mediaSections[D];this._mediaSections[D]=m,this._midToIndex.delete(O.mid),this._midToIndex.set(m.mid,D),this._sdpObject.media[D]=m.getObject(),this._regenerateBundleMids()}else{const D=this._midToIndex.get(m.mid);if(D===void 0)throw new Error(`no media section found with mid '${m.mid}'`);this._mediaSections[D]=m,this._sdpObject.media[D]=m.getObject()}}_findMediaSection(m){const x=this._midToIndex.get(m);if(x===void 0)throw new Error(`no media section found with mid '${m}'`);return this._mediaSections[x]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(m=>!m.closed).map(m=>m.mid).join(" "))}};return Sn.RemoteSdp=R,Sn}var tc={},Cm;function Ki(){if(Cm)return tc;Cm=1,Object.defineProperty(tc,"__esModule",{value:!0}),tc.parse=c;const d=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");function c(l){const s=d.exec(l??"");return s?{spatialLayers:Number(s[1]),temporalLayers:Number(s[2])}:{spatialLayers:1,temporalLayers:1}}return tc}var Em;function kS(){if(Em)return yn;Em=1;var d=yn&&yn.__createBinding||(Object.create?function(h,a,r,u){u===void 0&&(u=r);var p=Object.getOwnPropertyDescriptor(a,r);(!p||("get"in p?!a.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return a[r]}}),Object.defineProperty(h,u,p)}:function(h,a,r,u){u===void 0&&(u=r),h[u]=a[r]}),c=yn&&yn.__setModuleDefault||(Object.create?function(h,a){Object.defineProperty(h,"default",{enumerable:!0,value:a})}:function(h,a){h.default=a}),l=yn&&yn.__importStar||function(){var h=function(a){return h=Object.getOwnPropertyNames||function(r){var u=[];for(var p in r)Object.prototype.hasOwnProperty.call(r,p)&&(u[u.length]=p);return u},h(a)};return function(a){if(a&&a.__esModule)return a;var r={};if(a!=null)for(var u=h(a),p=0;p<u.length;p++)u[p]!=="default"&&d(r,a,u[p]);return c(r,a),r}}();Object.defineProperty(yn,"__esModule",{value:!0}),yn.Chrome111=void 0;const s=l(Nt()),_=rt(),T=l(_t()),w=l(Pt()),R=l(Bn()),C=l(Dr()),m=l(hc()),x=Dt(),D=Gt(),O=Un(),y=Ki(),b=new _.Logger("Chrome111"),U="Chrome111",A={OS:1024,MIS:1024};let g=class Tg extends D.HandlerInterface{static createFactory(){return()=>new Tg}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return U}close(){if(b.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){b.debug("getNativeRtpCapabilities()");const a=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{a.addTransceiver("audio"),a.addTransceiver("video");const r=await a.createOffer();try{a.close()}catch{}const u=s.parse(r.sdp),p=R.extractRtpCapabilities({sdpObject:u});return m.addNackSupportForOpus(p),p}catch(r){try{a.close()}catch{}throw r}}async getNativeSctpCapabilities(){return b.debug("getNativeSctpCapabilities()"),{numStreams:A}}run({direction:a,iceParameters:r,iceCandidates:u,dtlsParameters:p,sctpParameters:S,iceServers:P,iceTransportPolicy:v,additionalSettings:M,proprietaryConstraints:N,extendedRtpCapabilities:k}){this.assertNotClosed(),b.debug("run()"),this._direction=a,this._remoteSdp=new O.RemoteSdp({iceParameters:r,iceCandidates:u,dtlsParameters:p,sctpParameters:S}),this._sendingRtpParametersByKind={audio:w.getSendingRtpParameters("audio",k),video:w.getSendingRtpParameters("video",k)},this._sendingRemoteRtpParametersByKind={audio:w.getSendingRemoteRtpParameters("audio",k),video:w.getSendingRemoteRtpParameters("video",k)},p.role&&p.role!=="auto"&&(this._forcedLocalDtlsRole=p.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:P??[],iceTransportPolicy:v??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...M},N),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(b.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}}))}async updateIceServers(a){this.assertNotClosed(),b.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=a,this._pc.setConfiguration(r)}async restartIce(a){if(this.assertNotClosed(),b.debug("restartIce()"),this._remoteSdp.updateIceParameters(a),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});b.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const u={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const u=await this._pc.createAnswer();b.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:a,encodings:r,codecOptions:u,codec:p,onRtpSender:S}){if(this.assertNotClosed(),this.assertSendDirection(),b.debug("send() [kind:%s, track.id:%s]",a.kind,a.id),r&&r.length>1){let I=1;for(const H of r){const Y=H.scalabilityMode?(0,y.parse)(H.scalabilityMode).temporalLayers:3;Y>I&&(I=Y)}r.forEach((H,Y)=>{H.rid=`r${Y}`,H.scalabilityMode=`L1T${I}`})}const P=T.clone(this._sendingRtpParametersByKind[a.kind]);P.codecs=w.reduceCodecs(P.codecs,p);const v=T.clone(this._sendingRemoteRtpParametersByKind[a.kind]);v.codecs=w.reduceCodecs(v.codecs,p);const M=this._remoteSdp.getNextMediaSectionIdx(),N=this._pc.addTransceiver(a,{direction:"sendonly",streams:[this._sendStream],sendEncodings:r});S&&S(N.sender);const k=await this._pc.createOffer();let z=s.parse(k.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:z}),b.debug("send() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const V=N.mid;P.mid=V,z=s.parse(this._pc.localDescription.sdp);const ee=z.media[M.idx];if(P.rtcp.cname=R.getCname({offerMediaObject:ee}),!r)P.encodings=C.getRtpEncodings({offerMediaObject:ee});else if(r.length===1){const I=C.getRtpEncodings({offerMediaObject:ee});Object.assign(I[0],r[0]),P.encodings=I}else P.encodings=r;this._remoteSdp.send({offerMediaObject:ee,reuseMid:M.reuseMid,offerRtpParameters:P,answerRtpParameters:v,codecOptions:u,extmapAllowMixed:!0});const L={type:"answer",sdp:this._remoteSdp.getSdp()};return b.debug("send() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setRemoteDescription(L),this._mapMidTransceiver.set(V,N),{localId:V,rtpParameters:P,rtpSender:N.sender}}async stopSending(a){if(this.assertSendDirection(),b.debug("stopSending() [localId:%s]",a),this._closed)return;const r=this._mapMidTransceiver.get(a);if(!r)throw new Error("associated RTCRtpTransceiver not found");if(r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.closeMediaSection(r.mid))try{r.stop()}catch{}const p=await this._pc.createOffer();b.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const S={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S),this._mapMidTransceiver.delete(a)}async pauseSending(a){this.assertNotClosed(),this.assertSendDirection(),b.debug("pauseSending() [localId:%s]",a);const r=this._mapMidTransceiver.get(a);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(a);const u=await this._pc.createOffer();b.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async resumeSending(a){this.assertNotClosed(),this.assertSendDirection(),b.debug("resumeSending() [localId:%s]",a);const r=this._mapMidTransceiver.get(a);if(this._remoteSdp.resumeSendingMediaSection(a),!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="sendonly";const u=await this._pc.createOffer();b.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async replaceTrack(a,r){this.assertNotClosed(),this.assertSendDirection(),r?b.debug("replaceTrack() [localId:%s, track.id:%s]",a,r.id):b.debug("replaceTrack() [localId:%s, no track]",a);const u=this._mapMidTransceiver.get(a);if(!u)throw new Error("associated RTCRtpTransceiver not found");await u.sender.replaceTrack(r)}async setMaxSpatialLayer(a,r){this.assertNotClosed(),this.assertSendDirection(),b.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",a,r);const u=this._mapMidTransceiver.get(a);if(!u)throw new Error("associated RTCRtpTransceiver not found");const p=u.sender.getParameters();p.encodings.forEach((v,M)=>{M<=r?v.active=!0:v.active=!1}),await u.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(a,p.encodings);const S=await this._pc.createOffer();b.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const P={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async setRtpEncodingParameters(a,r){this.assertNotClosed(),this.assertSendDirection(),b.debug("setRtpEncodingParameters() [localId:%s, params:%o]",a,r);const u=this._mapMidTransceiver.get(a);if(!u)throw new Error("associated RTCRtpTransceiver not found");const p=u.sender.getParameters();p.encodings.forEach((v,M)=>{p.encodings[M]={...v,...r}}),await u.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(a,p.encodings);const S=await this._pc.createOffer();b.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const P={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async getSenderStats(a){this.assertNotClosed(),this.assertSendDirection();const r=this._mapMidTransceiver.get(a);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.sender.getStats()}async sendDataChannel({ordered:a,maxPacketLifeTime:r,maxRetransmits:u,label:p,protocol:S}){this.assertNotClosed(),this.assertSendDirection();const P={negotiated:!0,id:this._nextSendSctpStreamId,ordered:a,maxPacketLifeTime:r,maxRetransmits:u,protocol:S};b.debug("sendDataChannel() [options:%o]",P);const v=this._pc.createDataChannel(p,P);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%A.MIS,!this._hasDataChannelMediaSection){const N=await this._pc.createOffer(),k=s.parse(N.sdp),z=k.media.find(ee=>ee.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:k}),b.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N),this._remoteSdp.sendSctpAssociation({offerMediaObject:z});const V={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setRemoteDescription(V),this._hasDataChannelMediaSection=!0}const M={streamId:P.id,ordered:P.ordered,maxPacketLifeTime:P.maxPacketLifeTime,maxRetransmits:P.maxRetransmits};return{dataChannel:v,sctpStreamParameters:M}}async receive(a){this.assertNotClosed(),this.assertRecvDirection();const r=[],u=new Map;for(const v of a){const{trackId:M,kind:N,rtpParameters:k,streamId:z}=v;b.debug("receive() [trackId:%s, kind:%s]",M,N);const V=k.mid??String(this._mapMidTransceiver.size);u.set(M,V),this._remoteSdp.receive({mid:V,kind:N,offerRtpParameters:k,streamId:z??k.rtcp.cname,trackId:M})}const p={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);for(const v of a){const{trackId:M,onRtpReceiver:N}=v;if(N){const k=u.get(M),z=this._pc.getTransceivers().find(V=>V.mid===k);if(!z)throw new Error("transceiver not found");N(z.receiver)}}let S=await this._pc.createAnswer();const P=s.parse(S.sdp);for(const v of a){const{trackId:M,rtpParameters:N}=v,k=u.get(M),z=P.media.find(V=>String(V.mid)===k);R.applyCodecParameters({offerRtpParameters:N,answerMediaObject:z})}S={type:"answer",sdp:s.write(P)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:P}),b.debug("receive() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S);for(const v of a){const{trackId:M}=v,N=u.get(M),k=this._pc.getTransceivers().find(z=>z.mid===N);if(k)this._mapMidTransceiver.set(N,k),r.push({localId:N,track:k.receiver.track,rtpReceiver:k.receiver});else throw new Error("new RTCRtpTransceiver not found")}return r}async stopReceiving(a){if(this.assertRecvDirection(),this._closed)return;for(const p of a){b.debug("stopReceiving() [localId:%s]",p);const S=this._mapMidTransceiver.get(p);if(!S)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(S.mid)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const u=await this._pc.createAnswer();b.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u);for(const p of a)this._mapMidTransceiver.delete(p)}async pauseReceiving(a){this.assertNotClosed(),this.assertRecvDirection();for(const p of a){b.debug("pauseReceiving() [localId:%s]",p);const S=this._mapMidTransceiver.get(p);if(!S)throw new Error("associated RTCRtpTransceiver not found");S.direction="inactive",this._remoteSdp.pauseMediaSection(p)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const u=await this._pc.createAnswer();b.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async resumeReceiving(a){this.assertNotClosed(),this.assertRecvDirection();for(const p of a){b.debug("resumeReceiving() [localId:%s]",p);const S=this._mapMidTransceiver.get(p);if(!S)throw new Error("associated RTCRtpTransceiver not found");S.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(p)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const u=await this._pc.createAnswer();b.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async getReceiverStats(a){this.assertNotClosed(),this.assertRecvDirection();const r=this._mapMidTransceiver.get(a);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:a,label:r,protocol:u}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:p,ordered:S,maxPacketLifeTime:P,maxRetransmits:v}=a,M={negotiated:!0,id:p,ordered:S,maxPacketLifeTime:P,maxRetransmits:v,protocol:u};b.debug("receiveDataChannel() [options:%o]",M);const N=this._pc.createDataChannel(r,M);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const k={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",k),await this._pc.setRemoteDescription(k);const z=await this._pc.createAnswer();if(!this._transportReady){const V=s.parse(z.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:V})}b.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setLocalDescription(z),this._hasDataChannelMediaSection=!0}return{dataChannel:N}}async setupTransport({localDtlsRole:a,localSdpObject:r}){r||(r=s.parse(this._pc.localDescription.sdp));const u=R.extractDtlsParameters({sdpObject:r});u.role=a,this._remoteSdp.updateDtlsRole(a==="client"?"server":"client"),await new Promise((p,S)=>{this.safeEmit("@connect",{dtlsParameters:u},p,S)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new x.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return yn.Chrome111=g,yn}var wn={},Dm;function jS(){if(Dm)return wn;Dm=1;var d=wn&&wn.__createBinding||(Object.create?function(h,a,r,u){u===void 0&&(u=r);var p=Object.getOwnPropertyDescriptor(a,r);(!p||("get"in p?!a.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return a[r]}}),Object.defineProperty(h,u,p)}:function(h,a,r,u){u===void 0&&(u=r),h[u]=a[r]}),c=wn&&wn.__setModuleDefault||(Object.create?function(h,a){Object.defineProperty(h,"default",{enumerable:!0,value:a})}:function(h,a){h.default=a}),l=wn&&wn.__importStar||function(){var h=function(a){return h=Object.getOwnPropertyNames||function(r){var u=[];for(var p in r)Object.prototype.hasOwnProperty.call(r,p)&&(u[u.length]=p);return u},h(a)};return function(a){if(a&&a.__esModule)return a;var r={};if(a!=null)for(var u=h(a),p=0;p<u.length;p++)u[p]!=="default"&&d(r,a,u[p]);return c(r,a),r}}();Object.defineProperty(wn,"__esModule",{value:!0}),wn.Chrome74=void 0;const s=l(Nt()),_=rt(),T=l(_t()),w=l(Pt()),R=l(Bn()),C=l(Dr()),m=l(hc()),x=Dt(),D=Gt(),O=Un(),y=Ki(),b=new _.Logger("Chrome74"),U="Chrome74",A={OS:1024,MIS:1024};let g=class Cg extends D.HandlerInterface{static createFactory(){return()=>new Cg}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return U}close(){if(b.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){b.debug("getNativeRtpCapabilities()");const a=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{a.addTransceiver("audio"),a.addTransceiver("video");const r=await a.createOffer();try{a.close()}catch{}const u=s.parse(r.sdp),p=R.extractRtpCapabilities({sdpObject:u});return m.addNackSupportForOpus(p),p}catch(r){try{a.close()}catch{}throw r}}async getNativeSctpCapabilities(){return b.debug("getNativeSctpCapabilities()"),{numStreams:A}}run({direction:a,iceParameters:r,iceCandidates:u,dtlsParameters:p,sctpParameters:S,iceServers:P,iceTransportPolicy:v,additionalSettings:M,proprietaryConstraints:N,extendedRtpCapabilities:k}){b.debug("run()"),this._direction=a,this._remoteSdp=new O.RemoteSdp({iceParameters:r,iceCandidates:u,dtlsParameters:p,sctpParameters:S}),this._sendingRtpParametersByKind={audio:w.getSendingRtpParameters("audio",k),video:w.getSendingRtpParameters("video",k)},this._sendingRemoteRtpParametersByKind={audio:w.getSendingRemoteRtpParameters("audio",k),video:w.getSendingRemoteRtpParameters("video",k)},p.role&&p.role!=="auto"&&(this._forcedLocalDtlsRole=p.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:P??[],iceTransportPolicy:v??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...M},N),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(b.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}}))}async updateIceServers(a){this.assertNotClosed(),b.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=a,this._pc.setConfiguration(r)}async restartIce(a){if(this.assertNotClosed(),b.debug("restartIce()"),this._remoteSdp.updateIceParameters(a),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});b.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const u={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const u=await this._pc.createAnswer();b.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:a,encodings:r,codecOptions:u,codec:p}){this.assertNotClosed(),this.assertSendDirection(),b.debug("send() [kind:%s, track.id:%s]",a.kind,a.id),r&&r.length>1&&r.forEach((H,Y)=>{H.rid=`r${Y}`});const S=T.clone(this._sendingRtpParametersByKind[a.kind]);S.codecs=w.reduceCodecs(S.codecs,p);const P=T.clone(this._sendingRemoteRtpParametersByKind[a.kind]);P.codecs=w.reduceCodecs(P.codecs,p);const v=this._remoteSdp.getNextMediaSectionIdx(),M=this._pc.addTransceiver(a,{direction:"sendonly",streams:[this._sendStream],sendEncodings:r});let N=await this._pc.createOffer(),k=s.parse(N.sdp),z;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:k});let V=!1;const ee=(0,y.parse)((r??[{}])[0].scalabilityMode);r&&r.length===1&&ee.spatialLayers>1&&S.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(b.debug("send() | enabling legacy simulcast for VP9 SVC"),V=!0,k=s.parse(N.sdp),z=k.media[v.idx],C.addLegacySimulcast({offerMediaObject:z,numStreams:ee.spatialLayers}),N={type:"offer",sdp:s.write(k)}),b.debug("send() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N);const L=M.mid;if(S.mid=L,k=s.parse(this._pc.localDescription.sdp),z=k.media[v.idx],S.rtcp.cname=R.getCname({offerMediaObject:z}),!r)S.encodings=C.getRtpEncodings({offerMediaObject:z});else if(r.length===1){let H=C.getRtpEncodings({offerMediaObject:z});Object.assign(H[0],r[0]),V&&(H=[H[0]]),S.encodings=H}else S.encodings=r;if(S.encodings.length>1&&(S.codecs[0].mimeType.toLowerCase()==="video/vp8"||S.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const H of S.encodings)H.scalabilityMode?H.scalabilityMode=`L1T${ee.temporalLayers}`:H.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:z,reuseMid:v.reuseMid,offerRtpParameters:S,answerRtpParameters:P,codecOptions:u,extmapAllowMixed:!0});const I={type:"answer",sdp:this._remoteSdp.getSdp()};return b.debug("send() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I),this._mapMidTransceiver.set(L,M),{localId:L,rtpParameters:S,rtpSender:M.sender}}async stopSending(a){if(this.assertSendDirection(),b.debug("stopSending() [localId:%s]",a),this._closed)return;const r=this._mapMidTransceiver.get(a);if(!r)throw new Error("associated RTCRtpTransceiver not found");if(r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.closeMediaSection(r.mid))try{r.stop()}catch{}const p=await this._pc.createOffer();b.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const S={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S),this._mapMidTransceiver.delete(a)}async pauseSending(a){this.assertNotClosed(),this.assertSendDirection(),b.debug("pauseSending() [localId:%s]",a);const r=this._mapMidTransceiver.get(a);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(a);const u=await this._pc.createOffer();b.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async resumeSending(a){this.assertNotClosed(),this.assertSendDirection(),b.debug("resumeSending() [localId:%s]",a);const r=this._mapMidTransceiver.get(a);if(this._remoteSdp.resumeSendingMediaSection(a),!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="sendonly";const u=await this._pc.createOffer();b.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async replaceTrack(a,r){this.assertNotClosed(),this.assertSendDirection(),r?b.debug("replaceTrack() [localId:%s, track.id:%s]",a,r.id):b.debug("replaceTrack() [localId:%s, no track]",a);const u=this._mapMidTransceiver.get(a);if(!u)throw new Error("associated RTCRtpTransceiver not found");await u.sender.replaceTrack(r)}async setMaxSpatialLayer(a,r){this.assertNotClosed(),this.assertSendDirection(),b.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",a,r);const u=this._mapMidTransceiver.get(a);if(!u)throw new Error("associated RTCRtpTransceiver not found");const p=u.sender.getParameters();p.encodings.forEach((v,M)=>{M<=r?v.active=!0:v.active=!1}),await u.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(a,p.encodings);const S=await this._pc.createOffer();b.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const P={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async setRtpEncodingParameters(a,r){this.assertNotClosed(),this.assertSendDirection(),b.debug("setRtpEncodingParameters() [localId:%s, params:%o]",a,r);const u=this._mapMidTransceiver.get(a);if(!u)throw new Error("associated RTCRtpTransceiver not found");const p=u.sender.getParameters();p.encodings.forEach((v,M)=>{p.encodings[M]={...v,...r}}),await u.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(a,p.encodings);const S=await this._pc.createOffer();b.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const P={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async getSenderStats(a){this.assertNotClosed(),this.assertSendDirection();const r=this._mapMidTransceiver.get(a);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.sender.getStats()}async sendDataChannel({ordered:a,maxPacketLifeTime:r,maxRetransmits:u,label:p,protocol:S}){this.assertNotClosed(),this.assertSendDirection();const P={negotiated:!0,id:this._nextSendSctpStreamId,ordered:a,maxPacketLifeTime:r,maxRetransmits:u,protocol:S};b.debug("sendDataChannel() [options:%o]",P);const v=this._pc.createDataChannel(p,P);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%A.MIS,!this._hasDataChannelMediaSection){const N=await this._pc.createOffer(),k=s.parse(N.sdp),z=k.media.find(ee=>ee.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:k}),b.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N),this._remoteSdp.sendSctpAssociation({offerMediaObject:z});const V={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setRemoteDescription(V),this._hasDataChannelMediaSection=!0}const M={streamId:P.id,ordered:P.ordered,maxPacketLifeTime:P.maxPacketLifeTime,maxRetransmits:P.maxRetransmits};return{dataChannel:v,sctpStreamParameters:M}}async receive(a){this.assertNotClosed(),this.assertRecvDirection();const r=[],u=new Map;for(const v of a){const{trackId:M,kind:N,rtpParameters:k,streamId:z}=v;b.debug("receive() [trackId:%s, kind:%s]",M,N);const V=k.mid??String(this._mapMidTransceiver.size);u.set(M,V),this._remoteSdp.receive({mid:V,kind:N,offerRtpParameters:k,streamId:z??k.rtcp.cname,trackId:M})}const p={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);let S=await this._pc.createAnswer();const P=s.parse(S.sdp);for(const v of a){const{trackId:M,rtpParameters:N}=v,k=u.get(M),z=P.media.find(V=>String(V.mid)===k);R.applyCodecParameters({offerRtpParameters:N,answerMediaObject:z})}S={type:"answer",sdp:s.write(P)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:P}),b.debug("receive() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S);for(const v of a){const{trackId:M}=v,N=u.get(M),k=this._pc.getTransceivers().find(z=>z.mid===N);if(k)this._mapMidTransceiver.set(N,k),r.push({localId:N,track:k.receiver.track,rtpReceiver:k.receiver});else throw new Error("new RTCRtpTransceiver not found")}return r}async stopReceiving(a){if(this.assertRecvDirection(),this._closed)return;for(const p of a){b.debug("stopReceiving() [localId:%s]",p);const S=this._mapMidTransceiver.get(p);if(!S)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(S.mid)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const u=await this._pc.createAnswer();b.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u);for(const p of a)this._mapMidTransceiver.delete(p)}async pauseReceiving(a){this.assertNotClosed(),this.assertRecvDirection();for(const p of a){b.debug("pauseReceiving() [localId:%s]",p);const S=this._mapMidTransceiver.get(p);if(!S)throw new Error("associated RTCRtpTransceiver not found");S.direction="inactive",this._remoteSdp.pauseMediaSection(p)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const u=await this._pc.createAnswer();b.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async resumeReceiving(a){this.assertNotClosed(),this.assertRecvDirection();for(const p of a){b.debug("resumeReceiving() [localId:%s]",p);const S=this._mapMidTransceiver.get(p);if(!S)throw new Error("associated RTCRtpTransceiver not found");S.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(p)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const u=await this._pc.createAnswer();b.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async getReceiverStats(a){this.assertNotClosed(),this.assertRecvDirection();const r=this._mapMidTransceiver.get(a);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:a,label:r,protocol:u}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:p,ordered:S,maxPacketLifeTime:P,maxRetransmits:v}=a,M={negotiated:!0,id:p,ordered:S,maxPacketLifeTime:P,maxRetransmits:v,protocol:u};b.debug("receiveDataChannel() [options:%o]",M);const N=this._pc.createDataChannel(r,M);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const k={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",k),await this._pc.setRemoteDescription(k);const z=await this._pc.createAnswer();if(!this._transportReady){const V=s.parse(z.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:V})}b.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setLocalDescription(z),this._hasDataChannelMediaSection=!0}return{dataChannel:N}}async setupTransport({localDtlsRole:a,localSdpObject:r}){r||(r=s.parse(this._pc.localDescription.sdp));const u=R.extractDtlsParameters({sdpObject:r});u.role=a,this._remoteSdp.updateDtlsRole(a==="client"?"server":"client"),await new Promise((p,S)=>{this.safeEmit("@connect",{dtlsParameters:u},p,S)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new x.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return wn.Chrome74=g,wn}var Rn={},Om;function BS(){if(Om)return Rn;Om=1;var d=Rn&&Rn.__createBinding||(Object.create?function(A,g,h,a){a===void 0&&(a=h);var r=Object.getOwnPropertyDescriptor(g,h);(!r||("get"in r?!g.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return g[h]}}),Object.defineProperty(A,a,r)}:function(A,g,h,a){a===void 0&&(a=h),A[a]=g[h]}),c=Rn&&Rn.__setModuleDefault||(Object.create?function(A,g){Object.defineProperty(A,"default",{enumerable:!0,value:g})}:function(A,g){A.default=g}),l=Rn&&Rn.__importStar||function(){var A=function(g){return A=Object.getOwnPropertyNames||function(h){var a=[];for(var r in h)Object.prototype.hasOwnProperty.call(h,r)&&(a[a.length]=r);return a},A(g)};return function(g){if(g&&g.__esModule)return g;var h={};if(g!=null)for(var a=A(g),r=0;r<a.length;r++)a[r]!=="default"&&d(h,g,a[r]);return c(h,g),h}}();Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.Chrome70=void 0;const s=l(Nt()),_=rt(),T=l(_t()),w=l(Pt()),R=l(Bn()),C=l(Dr()),m=Gt(),x=Un(),D=Ki(),O=new _.Logger("Chrome70"),y="Chrome70",b={OS:1024,MIS:1024};let U=class Eg extends m.HandlerInterface{static createFactory(){return()=>new Eg}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return y}close(){if(O.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){O.debug("getNativeRtpCapabilities()");const g=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{g.addTransceiver("audio"),g.addTransceiver("video");const h=await g.createOffer();try{g.close()}catch{}const a=s.parse(h.sdp);return R.extractRtpCapabilities({sdpObject:a})}catch(h){try{g.close()}catch{}throw h}}async getNativeSctpCapabilities(){return O.debug("getNativeSctpCapabilities()"),{numStreams:b}}run({direction:g,iceParameters:h,iceCandidates:a,dtlsParameters:r,sctpParameters:u,iceServers:p,iceTransportPolicy:S,additionalSettings:P,proprietaryConstraints:v,extendedRtpCapabilities:M}){O.debug("run()"),this._direction=g,this._remoteSdp=new x.RemoteSdp({iceParameters:h,iceCandidates:a,dtlsParameters:r,sctpParameters:u}),this._sendingRtpParametersByKind={audio:w.getSendingRtpParameters("audio",M),video:w.getSendingRtpParameters("video",M)},this._sendingRemoteRtpParametersByKind={audio:w.getSendingRemoteRtpParameters("audio",M),video:w.getSendingRemoteRtpParameters("video",M)},r.role&&r.role!=="auto"&&(this._forcedLocalDtlsRole=r.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:p??[],iceTransportPolicy:S??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...P},v),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(O.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(g){O.debug("updateIceServers()");const h=this._pc.getConfiguration();h.iceServers=g,this._pc.setConfiguration(h)}async restartIce(g){if(O.debug("restartIce()"),this._remoteSdp.updateIceParameters(g),!!this._transportReady)if(this._direction==="send"){const h=await this._pc.createOffer({iceRestart:!0});O.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",h),await this._pc.setLocalDescription(h);const a={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}else{const h={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const a=await this._pc.createAnswer();O.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}}async getTransportStats(){return this._pc.getStats()}async send({track:g,encodings:h,codecOptions:a,codec:r}){this.assertSendDirection(),O.debug("send() [kind:%s, track.id:%s]",g.kind,g.id);const u=T.clone(this._sendingRtpParametersByKind[g.kind]);u.codecs=w.reduceCodecs(u.codecs,r);const p=T.clone(this._sendingRemoteRtpParametersByKind[g.kind]);p.codecs=w.reduceCodecs(p.codecs,r);const S=this._remoteSdp.getNextMediaSectionIdx(),P=this._pc.addTransceiver(g,{direction:"sendonly",streams:[this._sendStream]});let v=await this._pc.createOffer(),M=s.parse(v.sdp),N;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),h&&h.length>1&&(O.debug("send() | enabling legacy simulcast"),M=s.parse(v.sdp),N=M.media[S.idx],C.addLegacySimulcast({offerMediaObject:N,numStreams:h.length}),v={type:"offer",sdp:s.write(M)});let k=!1;const z=(0,D.parse)((h??[{}])[0].scalabilityMode);if(h&&h.length===1&&z.spatialLayers>1&&u.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(O.debug("send() | enabling legacy simulcast for VP9 SVC"),k=!0,M=s.parse(v.sdp),N=M.media[S.idx],C.addLegacySimulcast({offerMediaObject:N,numStreams:z.spatialLayers}),v={type:"offer",sdp:s.write(M)}),O.debug("send() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v),h){O.debug("send() | applying given encodings");const L=P.sender.getParameters();for(let I=0;I<(L.encodings??[]).length;++I){const H=L.encodings[I],Y=h[I];if(!Y)break;L.encodings[I]=Object.assign(H,Y)}await P.sender.setParameters(L)}const V=P.mid;if(u.mid=V,M=s.parse(this._pc.localDescription.sdp),N=M.media[S.idx],u.rtcp.cname=R.getCname({offerMediaObject:N}),u.encodings=C.getRtpEncodings({offerMediaObject:N}),h)for(let L=0;L<u.encodings.length;++L)h[L]&&Object.assign(u.encodings[L],h[L]);if(k&&(u.encodings=[u.encodings[0]]),u.encodings.length>1&&(u.codecs[0].mimeType.toLowerCase()==="video/vp8"||u.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const L of u.encodings)L.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:N,reuseMid:S.reuseMid,offerRtpParameters:u,answerRtpParameters:p,codecOptions:a});const ee={type:"answer",sdp:this._remoteSdp.getSdp()};return O.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ee),await this._pc.setRemoteDescription(ee),this._mapMidTransceiver.set(V,P),{localId:V,rtpParameters:u,rtpSender:P.sender}}async stopSending(g){this.assertSendDirection(),O.debug("stopSending() [localId:%s]",g);const h=this._mapMidTransceiver.get(g);if(!h)throw new Error("associated RTCRtpTransceiver not found");if(h.sender.replaceTrack(null),this._pc.removeTrack(h.sender),this._remoteSdp.closeMediaSection(h.mid))try{h.stop()}catch{}const r=await this._pc.createOffer();O.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const u={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u),this._mapMidTransceiver.delete(g)}async pauseSending(g){}async resumeSending(g){}async replaceTrack(g,h){this.assertSendDirection(),h?O.debug("replaceTrack() [localId:%s, track.id:%s]",g,h.id):O.debug("replaceTrack() [localId:%s, no track]",g);const a=this._mapMidTransceiver.get(g);if(!a)throw new Error("associated RTCRtpTransceiver not found");await a.sender.replaceTrack(h)}async setMaxSpatialLayer(g,h){this.assertSendDirection(),O.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",g,h);const a=this._mapMidTransceiver.get(g);if(!a)throw new Error("associated RTCRtpTransceiver not found");const r=a.sender.getParameters();r.encodings.forEach((S,P)=>{P<=h?S.active=!0:S.active=!1}),await a.sender.setParameters(r),this._remoteSdp.muxMediaSectionSimulcast(g,r.encodings);const u=await this._pc.createOffer();O.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async setRtpEncodingParameters(g,h){this.assertSendDirection(),O.debug("setRtpEncodingParameters() [localId:%s, params:%o]",g,h);const a=this._mapMidTransceiver.get(g);if(!a)throw new Error("associated RTCRtpTransceiver not found");const r=a.sender.getParameters();r.encodings.forEach((S,P)=>{r.encodings[P]={...S,...h}}),await a.sender.setParameters(r),this._remoteSdp.muxMediaSectionSimulcast(g,r.encodings);const u=await this._pc.createOffer();O.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async getSenderStats(g){this.assertSendDirection();const h=this._mapMidTransceiver.get(g);if(!h)throw new Error("associated RTCRtpTransceiver not found");return h.sender.getStats()}async sendDataChannel({ordered:g,maxPacketLifeTime:h,maxRetransmits:a,label:r,protocol:u}){this.assertSendDirection();const p={negotiated:!0,id:this._nextSendSctpStreamId,ordered:g,maxPacketLifeTime:h,maxRetransmitTime:h,maxRetransmits:a,protocol:u};O.debug("sendDataChannel() [options:%o]",p);const S=this._pc.createDataChannel(r,p);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%b.MIS,!this._hasDataChannelMediaSection){const v=await this._pc.createOffer(),M=s.parse(v.sdp),N=M.media.find(z=>z.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),O.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v),this._remoteSdp.sendSctpAssociation({offerMediaObject:N});const k={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k),this._hasDataChannelMediaSection=!0}const P={streamId:p.id,ordered:p.ordered,maxPacketLifeTime:p.maxPacketLifeTime,maxRetransmits:p.maxRetransmits};return{dataChannel:S,sctpStreamParameters:P}}async receive(g){this.assertRecvDirection();const h=[],a=new Map;for(const S of g){const{trackId:P,kind:v,rtpParameters:M,streamId:N}=S;O.debug("receive() [trackId:%s, kind:%s]",P,v);const k=M.mid??String(this._mapMidTransceiver.size);a.set(P,k),this._remoteSdp.receive({mid:k,kind:v,offerRtpParameters:M,streamId:N??M.rtcp.cname,trackId:P})}const r={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);let u=await this._pc.createAnswer();const p=s.parse(u.sdp);for(const S of g){const{trackId:P,rtpParameters:v}=S,M=a.get(P),N=p.media.find(k=>String(k.mid)===M);R.applyCodecParameters({offerRtpParameters:v,answerMediaObject:N})}u={type:"answer",sdp:s.write(p)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p}),O.debug("receive() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u);for(const S of g){const{trackId:P}=S,v=a.get(P),M=this._pc.getTransceivers().find(N=>N.mid===v);if(!M)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(v,M),h.push({localId:v,track:M.receiver.track,rtpReceiver:M.receiver})}return h}async stopReceiving(g){this.assertRecvDirection();for(const r of g){O.debug("stopReceiving() [localId:%s]",r);const u=this._mapMidTransceiver.get(r);if(!u)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(u.mid)}const h={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const a=await this._pc.createAnswer();O.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const r of g)this._mapMidTransceiver.delete(r)}async pauseReceiving(g){}async resumeReceiving(g){}async getReceiverStats(g){this.assertRecvDirection();const h=this._mapMidTransceiver.get(g);if(!h)throw new Error("associated RTCRtpTransceiver not found");return h.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:g,label:h,protocol:a}){this.assertRecvDirection();const{streamId:r,ordered:u,maxPacketLifeTime:p,maxRetransmits:S}=g,P={negotiated:!0,id:r,ordered:u,maxPacketLifeTime:p,maxRetransmitTime:p,maxRetransmits:S,protocol:a};O.debug("receiveDataChannel() [options:%o]",P);const v=this._pc.createDataChannel(h,P);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const M={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",M),await this._pc.setRemoteDescription(M);const N=await this._pc.createAnswer();if(!this._transportReady){const k=s.parse(N.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:k})}O.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setLocalDescription(N),this._hasDataChannelMediaSection=!0}return{dataChannel:v}}async setupTransport({localDtlsRole:g,localSdpObject:h}){h||(h=s.parse(this._pc.localDescription.sdp));const a=R.extractDtlsParameters({sdpObject:h});a.role=g,this._remoteSdp.updateDtlsRole(g==="client"?"server":"client"),await new Promise((r,u)=>{this.safeEmit("@connect",{dtlsParameters:a},r,u)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return Rn.Chrome70=U,Rn}var Tn={},Ls={},Mm;function mc(){if(Mm)return Ls;Mm=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.getRtpEncodings=d,Ls.addLegacySimulcast=c;function d({offerMediaObject:l,track:s}){const _=new Set;for(const R of l.ssrcs||[]){if(R.attribute!=="msid")continue;if(R.value.split(" ")[1]===s.id){const m=R.id;_.add(m)}}if(_.size===0)throw new Error(`a=ssrc line with msid information not found [track.id:${s.id}]`);const T=new Map;for(const R of l.ssrcGroups||[]){if(R.semantics!=="FID")continue;let[C,m]=R.ssrcs.split(/\s+/);C=Number(C),m=Number(m),_.has(C)&&(_.delete(C),_.delete(m),T.set(C,m))}for(const R of _)T.set(R,null);const w=[];for(const[R,C]of T){const m={ssrc:R};C&&(m.rtx={ssrc:C}),w.push(m)}return w}function c({offerMediaObject:l,track:s,numStreams:_}){if(_<=1)throw new TypeError("numStreams must be greater than 1");let T,w,R;if(!(l.ssrcs||[]).find(y=>y.attribute!=="msid"?!1:y.value.split(" ")[1]===s.id?(T=y.id,R=y.value.split(" ")[0],!0):!1))throw new Error(`a=ssrc line with msid information not found [track.id:${s.id}]`);(l.ssrcGroups||[]).some(y=>{if(y.semantics!=="FID")return!1;const b=y.ssrcs.split(/\s+/);return Number(b[0])===T?(w=Number(b[1]),!0):!1});const m=l.ssrcs.find(y=>y.attribute==="cname"&&y.id===T);if(!m)throw new Error(`a=ssrc line with cname information not found [track.id:${s.id}]`);const x=m.value,D=[],O=[];for(let y=0;y<_;++y)D.push(T+y),w&&O.push(w+y);l.ssrcGroups=l.ssrcGroups||[],l.ssrcs=l.ssrcs||[],l.ssrcGroups.push({semantics:"SIM",ssrcs:D.join(" ")});for(const y of D)l.ssrcs.push({id:y,attribute:"cname",value:x}),l.ssrcs.push({id:y,attribute:"msid",value:`${R} ${s.id}`});for(let y=0;y<O.length;++y){const b=D[y],U=O[y];l.ssrcs.push({id:U,attribute:"cname",value:x}),l.ssrcs.push({id:U,attribute:"msid",value:`${R} ${s.id}`}),l.ssrcGroups.push({semantics:"FID",ssrcs:`${b} ${U}`})}}return Ls}var xm;function US(){if(xm)return Tn;xm=1;var d=Tn&&Tn.__createBinding||(Object.create?function(U,A,g,h){h===void 0&&(h=g);var a=Object.getOwnPropertyDescriptor(A,g);(!a||("get"in a?!A.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return A[g]}}),Object.defineProperty(U,h,a)}:function(U,A,g,h){h===void 0&&(h=g),U[h]=A[g]}),c=Tn&&Tn.__setModuleDefault||(Object.create?function(U,A){Object.defineProperty(U,"default",{enumerable:!0,value:A})}:function(U,A){U.default=A}),l=Tn&&Tn.__importStar||function(){var U=function(A){return U=Object.getOwnPropertyNames||function(g){var h=[];for(var a in g)Object.prototype.hasOwnProperty.call(g,a)&&(h[h.length]=a);return h},U(A)};return function(A){if(A&&A.__esModule)return A;var g={};if(A!=null)for(var h=U(A),a=0;a<h.length;a++)h[a]!=="default"&&d(g,A,h[a]);return c(g,A),g}}();Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.Chrome67=void 0;const s=l(Nt()),_=rt(),T=l(_t()),w=l(Pt()),R=l(Bn()),C=l(mc()),m=Gt(),x=Un(),D=new _.Logger("Chrome67"),O="Chrome67",y={OS:1024,MIS:1024};let b=class Dg extends m.HandlerInterface{static createFactory(){return()=>new Dg}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return O}close(){if(D.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){D.debug("getNativeRtpCapabilities()");const A=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const g=await A.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{A.close()}catch{}const h=s.parse(g.sdp);return R.extractRtpCapabilities({sdpObject:h})}catch(g){try{A.close()}catch{}throw g}}async getNativeSctpCapabilities(){return D.debug("getNativeSctpCapabilities()"),{numStreams:y}}run({direction:A,iceParameters:g,iceCandidates:h,dtlsParameters:a,sctpParameters:r,iceServers:u,iceTransportPolicy:p,additionalSettings:S,proprietaryConstraints:P,extendedRtpCapabilities:v}){D.debug("run()"),this._direction=A,this._remoteSdp=new x.RemoteSdp({iceParameters:g,iceCandidates:h,dtlsParameters:a,sctpParameters:r,planB:!0}),this._sendingRtpParametersByKind={audio:w.getSendingRtpParameters("audio",v),video:w.getSendingRtpParameters("video",v)},this._sendingRemoteRtpParametersByKind={audio:w.getSendingRemoteRtpParameters("audio",v),video:w.getSendingRemoteRtpParameters("video",v)},a.role&&a.role!=="auto"&&(this._forcedLocalDtlsRole=a.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:u??[],iceTransportPolicy:p??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...S},P),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(D.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(A){D.debug("updateIceServers()");const g=this._pc.getConfiguration();g.iceServers=A,this._pc.setConfiguration(g)}async restartIce(A){if(D.debug("restartIce()"),this._remoteSdp.updateIceParameters(A),!!this._transportReady)if(this._direction==="send"){const g=await this._pc.createOffer({iceRestart:!0});D.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",g),await this._pc.setLocalDescription(g);const h={type:"answer",sdp:this._remoteSdp.getSdp()};D.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h)}else{const g={type:"offer",sdp:this._remoteSdp.getSdp()};D.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",g),await this._pc.setRemoteDescription(g);const h=await this._pc.createAnswer();D.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h)}}async getTransportStats(){return this._pc.getStats()}async send({track:A,encodings:g,codecOptions:h,codec:a}){this.assertSendDirection(),D.debug("send() [kind:%s, track.id:%s]",A.kind,A.id),a&&D.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(A),this._pc.addTrack(A,this._sendStream);let r=await this._pc.createOffer(),u=s.parse(r.sdp),p;const S=T.clone(this._sendingRtpParametersByKind[A.kind]);S.codecs=w.reduceCodecs(S.codecs);const P=T.clone(this._sendingRemoteRtpParametersByKind[A.kind]);if(P.codecs=w.reduceCodecs(P.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),A.kind==="video"&&g&&g.length>1&&(D.debug("send() | enabling simulcast"),u=s.parse(r.sdp),p=u.media.find(k=>k.type==="video"),C.addLegacySimulcast({offerMediaObject:p,track:A,numStreams:g.length}),r={type:"offer",sdp:s.write(u)}),D.debug("send() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),u=s.parse(this._pc.localDescription.sdp),p=u.media.find(k=>k.type===A.kind),S.rtcp.cname=R.getCname({offerMediaObject:p}),S.encodings=C.getRtpEncodings({offerMediaObject:p,track:A}),g)for(let k=0;k<S.encodings.length;++k)g[k]&&Object.assign(S.encodings[k],g[k]);if(S.encodings.length>1&&S.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const k of S.encodings)k.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:p,offerRtpParameters:S,answerRtpParameters:P,codecOptions:h});const v={type:"answer",sdp:this._remoteSdp.getSdp()};D.debug("send() | calling pc.setRemoteDescription() [answer:%o]",v),await this._pc.setRemoteDescription(v);const M=String(this._nextSendLocalId);this._nextSendLocalId++;const N=this._pc.getSenders().find(k=>k.track===A);return this._mapSendLocalIdRtpSender.set(M,N),{localId:M,rtpParameters:S,rtpSender:N}}async stopSending(A){this.assertSendDirection(),D.debug("stopSending() [localId:%s]",A);const g=this._mapSendLocalIdRtpSender.get(A);if(!g)throw new Error("associated RTCRtpSender not found");this._pc.removeTrack(g),g.track&&this._sendStream.removeTrack(g.track),this._mapSendLocalIdRtpSender.delete(A);const h=await this._pc.createOffer();D.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",h);try{await this._pc.setLocalDescription(h)}catch(r){if(this._sendStream.getTracks().length===0){D.warn("stopSending() | ignoring expected error due no sending tracks: %s",r.toString());return}throw r}if(this._pc.signalingState==="stable")return;const a={type:"answer",sdp:this._remoteSdp.getSdp()};D.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async pauseSending(A){}async resumeSending(A){}async replaceTrack(A,g){this.assertSendDirection(),g?D.debug("replaceTrack() [localId:%s, track.id:%s]",A,g.id):D.debug("replaceTrack() [localId:%s, no track]",A);const h=this._mapSendLocalIdRtpSender.get(A);if(!h)throw new Error("associated RTCRtpSender not found");const a=h.track;await h.replaceTrack(g),a&&this._sendStream.removeTrack(a),g&&this._sendStream.addTrack(g)}async setMaxSpatialLayer(A,g){this.assertSendDirection(),D.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",A,g);const h=this._mapSendLocalIdRtpSender.get(A);if(!h)throw new Error("associated RTCRtpSender not found");const a=h.getParameters();a.encodings.forEach((r,u)=>{u<=g?r.active=!0:r.active=!1}),await h.setParameters(a)}async setRtpEncodingParameters(A,g){this.assertSendDirection(),D.debug("setRtpEncodingParameters() [localId:%s, params:%o]",A,g);const h=this._mapSendLocalIdRtpSender.get(A);if(!h)throw new Error("associated RTCRtpSender not found");const a=h.getParameters();a.encodings.forEach((r,u)=>{a.encodings[u]={...r,...g}}),await h.setParameters(a)}async getSenderStats(A){this.assertSendDirection();const g=this._mapSendLocalIdRtpSender.get(A);if(!g)throw new Error("associated RTCRtpSender not found");return g.getStats()}async sendDataChannel({ordered:A,maxPacketLifeTime:g,maxRetransmits:h,label:a,protocol:r}){this.assertSendDirection();const u={negotiated:!0,id:this._nextSendSctpStreamId,ordered:A,maxPacketLifeTime:g,maxRetransmitTime:g,maxRetransmits:h,protocol:r};D.debug("sendDataChannel() [options:%o]",u);const p=this._pc.createDataChannel(a,u);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%y.MIS,!this._hasDataChannelMediaSection){const P=await this._pc.createOffer(),v=s.parse(P.sdp),M=v.media.find(k=>k.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:v}),D.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P),this._remoteSdp.sendSctpAssociation({offerMediaObject:M});const N={type:"answer",sdp:this._remoteSdp.getSdp()};D.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N),this._hasDataChannelMediaSection=!0}const S={streamId:u.id,ordered:u.ordered,maxPacketLifeTime:u.maxPacketLifeTime,maxRetransmits:u.maxRetransmits};return{dataChannel:p,sctpStreamParameters:S}}async receive(A){this.assertRecvDirection();const g=[];for(const u of A){const{trackId:p,kind:S,rtpParameters:P,streamId:v}=u;D.debug("receive() [trackId:%s, kind:%s]",p,S);const M=S;this._remoteSdp.receive({mid:M,kind:S,offerRtpParameters:P,streamId:v??P.rtcp.cname,trackId:p})}const h={type:"offer",sdp:this._remoteSdp.getSdp()};D.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);let a=await this._pc.createAnswer();const r=s.parse(a.sdp);for(const u of A){const{kind:p,rtpParameters:S}=u,P=p,v=r.media.find(M=>String(M.mid)===P);R.applyCodecParameters({offerRtpParameters:S,answerMediaObject:v})}a={type:"answer",sdp:s.write(r)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:r}),D.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const u of A){const{kind:p,trackId:S,rtpParameters:P}=u,v=S,M=p,N=this._pc.getReceivers().find(k=>k.track&&k.track.id===v);if(!N)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(v,{mid:M,rtpParameters:P,rtpReceiver:N}),g.push({localId:v,track:N.track,rtpReceiver:N})}return g}async stopReceiving(A){this.assertRecvDirection();for(const a of A){D.debug("stopReceiving() [localId:%s]",a);const{mid:r,rtpParameters:u}=this._mapRecvLocalIdInfo.get(a)??{};this._mapRecvLocalIdInfo.delete(a),this._remoteSdp.planBStopReceiving({mid:r,offerRtpParameters:u})}const g={type:"offer",sdp:this._remoteSdp.getSdp()};D.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",g),await this._pc.setRemoteDescription(g);const h=await this._pc.createAnswer();D.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h)}async pauseReceiving(A){}async resumeReceiving(A){}async getReceiverStats(A){this.assertRecvDirection();const{rtpReceiver:g}=this._mapRecvLocalIdInfo.get(A)??{};if(!g)throw new Error("associated RTCRtpReceiver not found");return g.getStats()}async receiveDataChannel({sctpStreamParameters:A,label:g,protocol:h}){this.assertRecvDirection();const{streamId:a,ordered:r,maxPacketLifeTime:u,maxRetransmits:p}=A,S={negotiated:!0,id:a,ordered:r,maxPacketLifeTime:u,maxRetransmitTime:u,maxRetransmits:p,protocol:h};D.debug("receiveDataChannel() [options:%o]",S);const P=this._pc.createDataChannel(g,S);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const v={type:"offer",sdp:this._remoteSdp.getSdp()};D.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const M=await this._pc.createAnswer();if(!this._transportReady){const N=s.parse(M.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:N})}D.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setLocalDescription(M),this._hasDataChannelMediaSection=!0}return{dataChannel:P}}async setupTransport({localDtlsRole:A,localSdpObject:g}){g||(g=s.parse(this._pc.localDescription.sdp));const h=R.extractDtlsParameters({sdpObject:g});h.role=A,this._remoteSdp.updateDtlsRole(A==="client"?"server":"client"),await new Promise((a,r)=>{this.safeEmit("@connect",{dtlsParameters:h},a,r)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return Tn.Chrome67=b,Tn}var Cn={},Lm;function zS(){if(Lm)return Cn;Lm=1;var d=Cn&&Cn.__createBinding||(Object.create?function(A,g,h,a){a===void 0&&(a=h);var r=Object.getOwnPropertyDescriptor(g,h);(!r||("get"in r?!g.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return g[h]}}),Object.defineProperty(A,a,r)}:function(A,g,h,a){a===void 0&&(a=h),A[a]=g[h]}),c=Cn&&Cn.__setModuleDefault||(Object.create?function(A,g){Object.defineProperty(A,"default",{enumerable:!0,value:g})}:function(A,g){A.default=g}),l=Cn&&Cn.__importStar||function(){var A=function(g){return A=Object.getOwnPropertyNames||function(h){var a=[];for(var r in h)Object.prototype.hasOwnProperty.call(h,r)&&(a[a.length]=r);return a},A(g)};return function(g){if(g&&g.__esModule)return g;var h={};if(g!=null)for(var a=A(g),r=0;r<a.length;r++)a[r]!=="default"&&d(h,g,a[r]);return c(h,g),h}}();Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.Chrome55=void 0;const s=l(Nt()),_=rt(),T=Dt(),w=l(_t()),R=l(Pt()),C=l(Bn()),m=l(mc()),x=Gt(),D=Un(),O=new _.Logger("Chrome55"),y="Chrome55",b={OS:1024,MIS:1024};let U=class Og extends x.HandlerInterface{static createFactory(){return()=>new Og}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return y}close(){if(O.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){O.debug("getNativeRtpCapabilities()");const g=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const h=await g.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{g.close()}catch{}const a=s.parse(h.sdp);return C.extractRtpCapabilities({sdpObject:a})}catch(h){try{g.close()}catch{}throw h}}async getNativeSctpCapabilities(){return O.debug("getNativeSctpCapabilities()"),{numStreams:b}}run({direction:g,iceParameters:h,iceCandidates:a,dtlsParameters:r,sctpParameters:u,iceServers:p,iceTransportPolicy:S,additionalSettings:P,proprietaryConstraints:v,extendedRtpCapabilities:M}){O.debug("run()"),this._direction=g,this._remoteSdp=new D.RemoteSdp({iceParameters:h,iceCandidates:a,dtlsParameters:r,sctpParameters:u,planB:!0}),this._sendingRtpParametersByKind={audio:R.getSendingRtpParameters("audio",M),video:R.getSendingRtpParameters("video",M)},this._sendingRemoteRtpParametersByKind={audio:R.getSendingRemoteRtpParameters("audio",M),video:R.getSendingRemoteRtpParameters("video",M)},r.role&&r.role!=="auto"&&(this._forcedLocalDtlsRole=r.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:p??[],iceTransportPolicy:S??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...P},v),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(O.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(g){O.debug("updateIceServers()");const h=this._pc.getConfiguration();h.iceServers=g,this._pc.setConfiguration(h)}async restartIce(g){if(O.debug("restartIce()"),this._remoteSdp.updateIceParameters(g),!!this._transportReady)if(this._direction==="send"){const h=await this._pc.createOffer({iceRestart:!0});O.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",h),await this._pc.setLocalDescription(h);const a={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}else{const h={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const a=await this._pc.createAnswer();O.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}}async getTransportStats(){return this._pc.getStats()}async send({track:g,encodings:h,codecOptions:a,codec:r}){this.assertSendDirection(),O.debug("send() [kind:%s, track.id:%s]",g.kind,g.id),r&&O.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(g),this._pc.addStream(this._sendStream);let u=await this._pc.createOffer(),p=s.parse(u.sdp),S;const P=w.clone(this._sendingRtpParametersByKind[g.kind]);P.codecs=R.reduceCodecs(P.codecs);const v=w.clone(this._sendingRemoteRtpParametersByKind[g.kind]);if(v.codecs=R.reduceCodecs(v.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p}),g.kind==="video"&&h&&h.length>1&&(O.debug("send() | enabling simulcast"),p=s.parse(u.sdp),S=p.media.find(k=>k.type==="video"),m.addLegacySimulcast({offerMediaObject:S,track:g,numStreams:h.length}),u={type:"offer",sdp:s.write(p)}),O.debug("send() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),p=s.parse(this._pc.localDescription.sdp),S=p.media.find(k=>k.type===g.kind),P.rtcp.cname=C.getCname({offerMediaObject:S}),P.encodings=m.getRtpEncodings({offerMediaObject:S,track:g}),h)for(let k=0;k<P.encodings.length;++k)h[k]&&Object.assign(P.encodings[k],h[k]);if(P.encodings.length>1&&P.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const k of P.encodings)k.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:S,offerRtpParameters:P,answerRtpParameters:v,codecOptions:a});const M={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("send() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M);const N=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(N,g),{localId:N,rtpParameters:P}}async stopSending(g){this.assertSendDirection(),O.debug("stopSending() [localId:%s]",g);const h=this._mapSendLocalIdTrack.get(g);if(!h)throw new Error("track not found");this._mapSendLocalIdTrack.delete(g),this._sendStream.removeTrack(h),this._pc.addStream(this._sendStream);const a=await this._pc.createOffer();O.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",a);try{await this._pc.setLocalDescription(a)}catch(u){if(this._sendStream.getTracks().length===0){O.warn("stopSending() | ignoring expected error due no sending tracks: %s",u.toString());return}throw u}if(this._pc.signalingState==="stable")return;const r={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}async pauseSending(g){}async resumeSending(g){}async replaceTrack(g,h){throw new T.UnsupportedError("not implemented")}async setMaxSpatialLayer(g,h){throw new T.UnsupportedError(" not implemented")}async setRtpEncodingParameters(g,h){throw new T.UnsupportedError("not supported")}async getSenderStats(g){throw new T.UnsupportedError("not implemented")}async sendDataChannel({ordered:g,maxPacketLifeTime:h,maxRetransmits:a,label:r,protocol:u}){this.assertSendDirection();const p={negotiated:!0,id:this._nextSendSctpStreamId,ordered:g,maxPacketLifeTime:h,maxRetransmitTime:h,maxRetransmits:a,protocol:u};O.debug("sendDataChannel() [options:%o]",p);const S=this._pc.createDataChannel(r,p);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%b.MIS,!this._hasDataChannelMediaSection){const v=await this._pc.createOffer(),M=s.parse(v.sdp),N=M.media.find(z=>z.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),O.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v),this._remoteSdp.sendSctpAssociation({offerMediaObject:N});const k={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k),this._hasDataChannelMediaSection=!0}const P={streamId:p.id,ordered:p.ordered,maxPacketLifeTime:p.maxPacketLifeTime,maxRetransmits:p.maxRetransmits};return{dataChannel:S,sctpStreamParameters:P}}async receive(g){this.assertRecvDirection();const h=[];for(const p of g){const{trackId:S,kind:P,rtpParameters:v,streamId:M}=p;O.debug("receive() [trackId:%s, kind:%s]",S,P);const N=P;this._remoteSdp.receive({mid:N,kind:P,offerRtpParameters:v,streamId:M??v.rtcp.cname,trackId:S})}const a={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",a),await this._pc.setRemoteDescription(a);let r=await this._pc.createAnswer();const u=s.parse(r.sdp);for(const p of g){const{kind:S,rtpParameters:P}=p,v=S,M=u.media.find(N=>String(N.mid)===v);C.applyCodecParameters({offerRtpParameters:P,answerMediaObject:M})}r={type:"answer",sdp:s.write(u)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),O.debug("receive() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const p of g){const{kind:S,trackId:P,rtpParameters:v}=p,M=S,N=P,k=p.streamId??v.rtcp.cname,V=this._pc.getRemoteStreams().find(ee=>ee.id===k).getTrackById(N);if(!V)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(N,{mid:M,rtpParameters:v}),h.push({localId:N,track:V})}return h}async stopReceiving(g){this.assertRecvDirection();for(const r of g){O.debug("stopReceiving() [localId:%s]",r);const{mid:u,rtpParameters:p}=this._mapRecvLocalIdInfo.get(r)??{};this._mapRecvLocalIdInfo.delete(r),this._remoteSdp.planBStopReceiving({mid:u,offerRtpParameters:p})}const h={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const a=await this._pc.createAnswer();O.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}async pauseReceiving(g){}async resumeReceiving(g){}async getReceiverStats(g){throw new T.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:g,label:h,protocol:a}){this.assertRecvDirection();const{streamId:r,ordered:u,maxPacketLifeTime:p,maxRetransmits:S}=g,P={negotiated:!0,id:r,ordered:u,maxPacketLifeTime:p,maxRetransmitTime:p,maxRetransmits:S,protocol:a};O.debug("receiveDataChannel() [options:%o]",P);const v=this._pc.createDataChannel(h,P);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const M={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",M),await this._pc.setRemoteDescription(M);const N=await this._pc.createAnswer();if(!this._transportReady){const k=s.parse(N.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:k})}O.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setLocalDescription(N),this._hasDataChannelMediaSection=!0}return{dataChannel:v}}async setupTransport({localDtlsRole:g,localSdpObject:h}){h||(h=s.parse(this._pc.localDescription.sdp));const a=C.extractDtlsParameters({sdpObject:h});a.role=g,this._remoteSdp.updateDtlsRole(g==="client"?"server":"client"),await new Promise((r,u)=>{this.safeEmit("@connect",{dtlsParameters:a},r,u)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return Cn.Chrome55=U,Cn}var En={},Am;function qS(){if(Am)return En;Am=1;var d=En&&En.__createBinding||(Object.create?function(g,h,a,r){r===void 0&&(r=a);var u=Object.getOwnPropertyDescriptor(h,a);(!u||("get"in u?!h.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return h[a]}}),Object.defineProperty(g,r,u)}:function(g,h,a,r){r===void 0&&(r=a),g[r]=h[a]}),c=En&&En.__setModuleDefault||(Object.create?function(g,h){Object.defineProperty(g,"default",{enumerable:!0,value:h})}:function(g,h){g.default=h}),l=En&&En.__importStar||function(){var g=function(h){return g=Object.getOwnPropertyNames||function(a){var r=[];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(r[r.length]=u);return r},g(h)};return function(h){if(h&&h.__esModule)return h;var a={};if(h!=null)for(var r=g(h),u=0;u<r.length;u++)r[u]!=="default"&&d(a,h,r[u]);return c(a,h),a}}();Object.defineProperty(En,"__esModule",{value:!0}),En.Firefox120=void 0;const s=l(Nt()),_=rt(),T=Dt(),w=l(_t()),R=l(Pt()),C=l(Bn()),m=l(Dr()),x=Gt(),D=Un(),O=Ki(),y=new _.Logger("Firefox120"),b="Firefox120",U={OS:16,MIS:2048};let A=class Mg extends x.HandlerInterface{static createFactory(){return()=>new Mg}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return b}close(){if(y.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){y.debug("getNativeRtpCapabilities()");const h=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),a=document.createElement("canvas");a.getContext("2d");const u=a.captureStream().getVideoTracks()[0];try{h.addTransceiver("audio",{direction:"sendrecv"}),h.addTransceiver(u,{direction:"sendrecv",sendEncodings:[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}]});const p=await h.createOffer();try{a.remove()}catch{}try{u.stop()}catch{}try{h.close()}catch{}const S=s.parse(p.sdp);return C.extractRtpCapabilities({sdpObject:S})}catch(p){try{a.remove()}catch{}try{u.stop()}catch{}try{h.close()}catch{}throw p}}async getNativeSctpCapabilities(){return y.debug("getNativeSctpCapabilities()"),{numStreams:U}}run({direction:h,iceParameters:a,iceCandidates:r,dtlsParameters:u,sctpParameters:p,iceServers:S,iceTransportPolicy:P,additionalSettings:v,proprietaryConstraints:M,extendedRtpCapabilities:N}){this.assertNotClosed(),y.debug("run()"),this._direction=h,this._remoteSdp=new D.RemoteSdp({iceParameters:a,iceCandidates:r,dtlsParameters:u,sctpParameters:p}),this._sendingRtpParametersByKind={audio:R.getSendingRtpParameters("audio",N),video:R.getSendingRtpParameters("video",N)},this._sendingRemoteRtpParametersByKind={audio:R.getSendingRemoteRtpParameters("audio",N),video:R.getSendingRemoteRtpParameters("video",N)},this._pc=new RTCPeerConnection({iceServers:S??[],iceTransportPolicy:P??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...v},M),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(y.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(h){throw this.assertNotClosed(),new T.UnsupportedError("not supported")}async restartIce(h){if(this.assertNotClosed(),y.debug("restartIce()"),this._remoteSdp.updateIceParameters(h),!!this._transportReady)if(this._direction==="send"){const a=await this._pc.createOffer({iceRestart:!0});y.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const r={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const a={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",a),await this._pc.setRemoteDescription(a);const r=await this._pc.createAnswer();y.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:h,encodings:a,codecOptions:r,codec:u,onRtpSender:p}){this.assertNotClosed(),this.assertSendDirection(),y.debug("send() [kind:%s, track.id:%s]",h.kind,h.id),a&&a.length>1&&a.forEach((L,I)=>{L.rid=`r${I}`});const S=w.clone(this._sendingRtpParametersByKind[h.kind]);S.codecs=R.reduceCodecs(S.codecs,u);const P=w.clone(this._sendingRemoteRtpParametersByKind[h.kind]);P.codecs=R.reduceCodecs(P.codecs,u);const v=this._pc.addTransceiver(h,{direction:"sendonly",streams:[this._sendStream],sendEncodings:a});p&&p(v.sender);const M=await this._pc.createOffer();let N=s.parse(M.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:N});const k=(0,O.parse)((a??[{}])[0].scalabilityMode);y.debug("send() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M);const z=v.mid;S.mid=z,N=s.parse(this._pc.localDescription.sdp);const V=N.media[N.media.length-1];if(S.rtcp.cname=C.getCname({offerMediaObject:V}),!a)S.encodings=m.getRtpEncodings({offerMediaObject:V});else if(a.length===1){const L=m.getRtpEncodings({offerMediaObject:V});Object.assign(L[0],a[0]),S.encodings=L}else S.encodings=a;if(S.encodings.length>1&&(S.codecs[0].mimeType.toLowerCase()==="video/vp8"||S.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const L of S.encodings)L.scalabilityMode?L.scalabilityMode=`L1T${k.temporalLayers}`:L.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:V,offerRtpParameters:S,answerRtpParameters:P,codecOptions:r,extmapAllowMixed:!0});const ee={type:"answer",sdp:this._remoteSdp.getSdp()};return y.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ee),await this._pc.setRemoteDescription(ee),this._mapMidTransceiver.set(z,v),{localId:z,rtpParameters:S,rtpSender:v.sender}}async stopSending(h){if(this.assertSendDirection(),y.debug("stopSending() [localId:%s]",h),this._closed)return;const a=this._mapMidTransceiver.get(h);if(!a)throw new Error("associated transceiver not found");a.sender.replaceTrack(null),this._pc.removeTrack(a.sender),this._remoteSdp.disableMediaSection(a.mid);const r=await this._pc.createOffer();y.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const u={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u),this._mapMidTransceiver.delete(h)}async pauseSending(h){this.assertNotClosed(),this.assertSendDirection(),y.debug("pauseSending() [localId:%s]",h);const a=this._mapMidTransceiver.get(h);if(!a)throw new Error("associated RTCRtpTransceiver not found");a.direction="inactive",this._remoteSdp.pauseMediaSection(h);const r=await this._pc.createOffer();y.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const u={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}async resumeSending(h){this.assertNotClosed(),this.assertSendDirection(),y.debug("resumeSending() [localId:%s]",h);const a=this._mapMidTransceiver.get(h);if(!a)throw new Error("associated RTCRtpTransceiver not found");a.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(h);const r=await this._pc.createOffer();y.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const u={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}async replaceTrack(h,a){this.assertNotClosed(),this.assertSendDirection(),a?y.debug("replaceTrack() [localId:%s, track.id:%s]",h,a.id):y.debug("replaceTrack() [localId:%s, no track]",h);const r=this._mapMidTransceiver.get(h);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(a)}async setMaxSpatialLayer(h,a){this.assertNotClosed(),this.assertSendDirection(),y.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",h,a);const r=this._mapMidTransceiver.get(h);if(!r)throw new Error("associated transceiver not found");const u=r.sender.getParameters();u.encodings.forEach((P,v)=>{v<=a?P.active=!0:P.active=!1}),await r.sender.setParameters(u),this._remoteSdp.muxMediaSectionSimulcast(h,u.encodings);const p=await this._pc.createOffer();y.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const S={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S)}async setRtpEncodingParameters(h,a){this.assertNotClosed(),this.assertSendDirection(),y.debug("setRtpEncodingParameters() [localId:%s, params:%o]",h,a);const r=this._mapMidTransceiver.get(h);if(!r)throw new Error("associated RTCRtpTransceiver not found");const u=r.sender.getParameters();u.encodings.forEach((P,v)=>{u.encodings[v]={...P,...a}}),await r.sender.setParameters(u),this._remoteSdp.muxMediaSectionSimulcast(h,u.encodings);const p=await this._pc.createOffer();y.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const S={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S)}async getSenderStats(h){this.assertNotClosed(),this.assertSendDirection();const a=this._mapMidTransceiver.get(h);if(!a)throw new Error("associated RTCRtpTransceiver not found");return a.sender.getStats()}async sendDataChannel({ordered:h,maxPacketLifeTime:a,maxRetransmits:r,label:u,protocol:p}){this.assertNotClosed(),this.assertSendDirection();const S={negotiated:!0,id:this._nextSendSctpStreamId,ordered:h,maxPacketLifeTime:a,maxRetransmits:r,protocol:p};y.debug("sendDataChannel() [options:%o]",S);const P=this._pc.createDataChannel(u,S);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%U.MIS,!this._hasDataChannelMediaSection){const M=await this._pc.createOffer(),N=s.parse(M.sdp),k=N.media.find(V=>V.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:N}),y.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M),this._remoteSdp.sendSctpAssociation({offerMediaObject:k});const z={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setRemoteDescription(z),this._hasDataChannelMediaSection=!0}const v={streamId:S.id,ordered:S.ordered,maxPacketLifeTime:S.maxPacketLifeTime,maxRetransmits:S.maxRetransmits};return{dataChannel:P,sctpStreamParameters:v}}async receive(h){this.assertNotClosed(),this.assertRecvDirection();const a=[],r=new Map;for(const P of h){const{trackId:v,kind:M,rtpParameters:N,streamId:k}=P;y.debug("receive() [trackId:%s, kind:%s]",v,M);const z=N.mid??String(this._mapMidTransceiver.size);r.set(v,z),this._remoteSdp.receive({mid:z,kind:M,offerRtpParameters:N,streamId:k??N.rtcp.cname,trackId:v})}const u={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);for(const P of h){const{trackId:v,onRtpReceiver:M}=P;if(M){const N=r.get(v),k=this._pc.getTransceivers().find(z=>z.mid===N);if(!k)throw new Error("transceiver not found");M(k.receiver)}}let p=await this._pc.createAnswer();const S=s.parse(p.sdp);for(const P of h){const{trackId:v,rtpParameters:M}=P,N=r.get(v),k=S.media.find(z=>String(z.mid)===N);C.applyCodecParameters({offerRtpParameters:M,answerMediaObject:k}),p={type:"answer",sdp:s.write(S)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:S}),y.debug("receive() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p);for(const P of h){const{trackId:v}=P,M=r.get(v),N=this._pc.getTransceivers().find(k=>k.mid===M);if(!N)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(M,N),a.push({localId:M,track:N.receiver.track,rtpReceiver:N.receiver})}return a}async stopReceiving(h){if(this.assertRecvDirection(),this._closed)return;for(const u of h){y.debug("stopReceiving() [localId:%s]",u);const p=this._mapMidTransceiver.get(u);if(!p)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(p.mid)}const a={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",a),await this._pc.setRemoteDescription(a);const r=await this._pc.createAnswer();y.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const u of h)this._mapMidTransceiver.delete(u)}async pauseReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const u of h){y.debug("pauseReceiving() [localId:%s]",u);const p=this._mapMidTransceiver.get(u);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="inactive",this._remoteSdp.pauseMediaSection(u)}const a={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",a),await this._pc.setRemoteDescription(a);const r=await this._pc.createAnswer();y.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const u of h){y.debug("resumeReceiving() [localId:%s]",u);const p=this._mapMidTransceiver.get(u);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(u)}const a={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",a),await this._pc.setRemoteDescription(a);const r=await this._pc.createAnswer();y.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(h){this.assertRecvDirection();const a=this._mapMidTransceiver.get(h);if(!a)throw new Error("associated RTCRtpTransceiver not found");return a.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:h,label:a,protocol:r}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:u,ordered:p,maxPacketLifeTime:S,maxRetransmits:P}=h,v={negotiated:!0,id:u,ordered:p,maxPacketLifeTime:S,maxRetransmits:P,protocol:r};y.debug("receiveDataChannel() [options:%o]",v);const M=this._pc.createDataChannel(a,v);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const N={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",N),await this._pc.setRemoteDescription(N);const k=await this._pc.createAnswer();if(!this._transportReady){const z=s.parse(k.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:z})}y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setLocalDescription(k),this._hasDataChannelMediaSection=!0}return{dataChannel:M}}async setupTransport({localDtlsRole:h,localSdpObject:a}){a||(a=s.parse(this._pc.localDescription.sdp));const r=C.extractDtlsParameters({sdpObject:a});r.role=h,this._remoteSdp.updateDtlsRole(h==="client"?"server":"client"),await new Promise((u,p)=>{this.safeEmit("@connect",{dtlsParameters:r},u,p)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new T.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return En.Firefox120=A,En}var Dn={},Pm;function IS(){if(Pm)return Dn;Pm=1;var d=Dn&&Dn.__createBinding||(Object.create?function(g,h,a,r){r===void 0&&(r=a);var u=Object.getOwnPropertyDescriptor(h,a);(!u||("get"in u?!h.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return h[a]}}),Object.defineProperty(g,r,u)}:function(g,h,a,r){r===void 0&&(r=a),g[r]=h[a]}),c=Dn&&Dn.__setModuleDefault||(Object.create?function(g,h){Object.defineProperty(g,"default",{enumerable:!0,value:h})}:function(g,h){g.default=h}),l=Dn&&Dn.__importStar||function(){var g=function(h){return g=Object.getOwnPropertyNames||function(a){var r=[];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(r[r.length]=u);return r},g(h)};return function(h){if(h&&h.__esModule)return h;var a={};if(h!=null)for(var r=g(h),u=0;u<r.length;u++)r[u]!=="default"&&d(a,h,r[u]);return c(a,h),a}}();Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.Firefox60=void 0;const s=l(Nt()),_=rt(),T=Dt(),w=l(_t()),R=l(Pt()),C=l(Bn()),m=l(Dr()),x=Gt(),D=Un(),O=Ki(),y=new _.Logger("Firefox60"),b="Firefox60",U={OS:16,MIS:2048};let A=class xg extends x.HandlerInterface{static createFactory(){return()=>new xg}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return b}close(){if(y.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){y.debug("getNativeRtpCapabilities()");const h=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),a=document.createElement("canvas");a.getContext("2d");const u=a.captureStream().getVideoTracks()[0];try{h.addTransceiver("audio",{direction:"sendrecv"});const p=h.addTransceiver(u,{direction:"sendrecv"}),S=p.sender.getParameters(),P=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];S.encodings=P,await p.sender.setParameters(S);const v=await h.createOffer();try{a.remove()}catch{}try{u.stop()}catch{}try{h.close()}catch{}const M=s.parse(v.sdp);return C.extractRtpCapabilities({sdpObject:M})}catch(p){try{a.remove()}catch{}try{u.stop()}catch{}try{h.close()}catch{}throw p}}async getNativeSctpCapabilities(){return y.debug("getNativeSctpCapabilities()"),{numStreams:U}}run({direction:h,iceParameters:a,iceCandidates:r,dtlsParameters:u,sctpParameters:p,iceServers:S,iceTransportPolicy:P,additionalSettings:v,proprietaryConstraints:M,extendedRtpCapabilities:N}){this.assertNotClosed(),y.debug("run()"),this._direction=h,this._remoteSdp=new D.RemoteSdp({iceParameters:a,iceCandidates:r,dtlsParameters:u,sctpParameters:p}),this._sendingRtpParametersByKind={audio:R.getSendingRtpParameters("audio",N),video:R.getSendingRtpParameters("video",N)},this._sendingRemoteRtpParametersByKind={audio:R.getSendingRemoteRtpParameters("audio",N),video:R.getSendingRemoteRtpParameters("video",N)},this._pc=new RTCPeerConnection({iceServers:S??[],iceTransportPolicy:P??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...v},M),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(y.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(h){throw this.assertNotClosed(),new T.UnsupportedError("not supported")}async restartIce(h){if(this.assertNotClosed(),y.debug("restartIce()"),this._remoteSdp.updateIceParameters(h),!!this._transportReady)if(this._direction==="send"){const a=await this._pc.createOffer({iceRestart:!0});y.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const r={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const a={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",a),await this._pc.setRemoteDescription(a);const r=await this._pc.createAnswer();y.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:h,encodings:a,codecOptions:r,codec:u}){this.assertNotClosed(),this.assertSendDirection(),y.debug("send() [kind:%s, track.id:%s]",h.kind,h.id),a&&(a=w.clone(a),a.forEach((ee,L)=>{ee.rid=`r${L}`}),a.reverse());const p=w.clone(this._sendingRtpParametersByKind[h.kind]);p.codecs=R.reduceCodecs(p.codecs,u);const S=w.clone(this._sendingRemoteRtpParametersByKind[h.kind]);S.codecs=R.reduceCodecs(S.codecs,u);const P=this._pc.addTransceiver(h,{direction:"sendonly",streams:[this._sendStream]});if(a){const ee=P.sender.getParameters();ee.encodings=a,await P.sender.setParameters(ee)}const v=await this._pc.createOffer();let M=s.parse(v.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:M});const N=(0,O.parse)((a??[{}])[0].scalabilityMode);y.debug("send() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);const k=P.mid;p.mid=k,M=s.parse(this._pc.localDescription.sdp);const z=M.media[M.media.length-1];if(p.rtcp.cname=C.getCname({offerMediaObject:z}),!a)p.encodings=m.getRtpEncodings({offerMediaObject:z});else if(a.length===1){const ee=m.getRtpEncodings({offerMediaObject:z});Object.assign(ee[0],a[0]),p.encodings=ee}else p.encodings=a.reverse();if(p.encodings.length>1&&(p.codecs[0].mimeType.toLowerCase()==="video/vp8"||p.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const ee of p.encodings)ee.scalabilityMode?ee.scalabilityMode=`L1T${N.temporalLayers}`:ee.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:z,offerRtpParameters:p,answerRtpParameters:S,codecOptions:r,extmapAllowMixed:!0});const V={type:"answer",sdp:this._remoteSdp.getSdp()};return y.debug("send() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setRemoteDescription(V),this._mapMidTransceiver.set(k,P),{localId:k,rtpParameters:p,rtpSender:P.sender}}async stopSending(h){if(this.assertSendDirection(),y.debug("stopSending() [localId:%s]",h),this._closed)return;const a=this._mapMidTransceiver.get(h);if(!a)throw new Error("associated transceiver not found");a.sender.replaceTrack(null),this._pc.removeTrack(a.sender),this._remoteSdp.disableMediaSection(a.mid);const r=await this._pc.createOffer();y.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const u={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u),this._mapMidTransceiver.delete(h)}async pauseSending(h){this.assertNotClosed(),this.assertSendDirection(),y.debug("pauseSending() [localId:%s]",h);const a=this._mapMidTransceiver.get(h);if(!a)throw new Error("associated RTCRtpTransceiver not found");a.direction="inactive",this._remoteSdp.pauseMediaSection(h);const r=await this._pc.createOffer();y.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const u={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}async resumeSending(h){this.assertNotClosed(),this.assertSendDirection(),y.debug("resumeSending() [localId:%s]",h);const a=this._mapMidTransceiver.get(h);if(!a)throw new Error("associated RTCRtpTransceiver not found");a.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(h);const r=await this._pc.createOffer();y.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const u={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}async replaceTrack(h,a){this.assertNotClosed(),this.assertSendDirection(),a?y.debug("replaceTrack() [localId:%s, track.id:%s]",h,a.id):y.debug("replaceTrack() [localId:%s, no track]",h);const r=this._mapMidTransceiver.get(h);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(a)}async setMaxSpatialLayer(h,a){this.assertNotClosed(),this.assertSendDirection(),y.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",h,a);const r=this._mapMidTransceiver.get(h);if(!r)throw new Error("associated transceiver not found");const u=r.sender.getParameters();a=u.encodings.length-1-a,u.encodings.forEach((P,v)=>{v>=a?P.active=!0:P.active=!1}),await r.sender.setParameters(u),this._remoteSdp.muxMediaSectionSimulcast(h,u.encodings);const p=await this._pc.createOffer();y.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const S={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S)}async setRtpEncodingParameters(h,a){this.assertNotClosed(),this.assertSendDirection(),y.debug("setRtpEncodingParameters() [localId:%s, params:%o]",h,a);const r=this._mapMidTransceiver.get(h);if(!r)throw new Error("associated RTCRtpTransceiver not found");const u=r.sender.getParameters();u.encodings.forEach((P,v)=>{u.encodings[v]={...P,...a}}),await r.sender.setParameters(u),this._remoteSdp.muxMediaSectionSimulcast(h,u.encodings);const p=await this._pc.createOffer();y.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const S={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S)}async getSenderStats(h){this.assertNotClosed(),this.assertSendDirection();const a=this._mapMidTransceiver.get(h);if(!a)throw new Error("associated RTCRtpTransceiver not found");return a.sender.getStats()}async sendDataChannel({ordered:h,maxPacketLifeTime:a,maxRetransmits:r,label:u,protocol:p}){this.assertNotClosed(),this.assertSendDirection();const S={negotiated:!0,id:this._nextSendSctpStreamId,ordered:h,maxPacketLifeTime:a,maxRetransmits:r,protocol:p};y.debug("sendDataChannel() [options:%o]",S);const P=this._pc.createDataChannel(u,S);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%U.MIS,!this._hasDataChannelMediaSection){const M=await this._pc.createOffer(),N=s.parse(M.sdp),k=N.media.find(V=>V.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:N}),y.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M),this._remoteSdp.sendSctpAssociation({offerMediaObject:k});const z={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setRemoteDescription(z),this._hasDataChannelMediaSection=!0}const v={streamId:S.id,ordered:S.ordered,maxPacketLifeTime:S.maxPacketLifeTime,maxRetransmits:S.maxRetransmits};return{dataChannel:P,sctpStreamParameters:v}}async receive(h){this.assertNotClosed(),this.assertRecvDirection();const a=[],r=new Map;for(const P of h){const{trackId:v,kind:M,rtpParameters:N,streamId:k}=P;y.debug("receive() [trackId:%s, kind:%s]",v,M);const z=N.mid??String(this._mapMidTransceiver.size);r.set(v,z),this._remoteSdp.receive({mid:z,kind:M,offerRtpParameters:N,streamId:k??N.rtcp.cname,trackId:v})}const u={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);let p=await this._pc.createAnswer();const S=s.parse(p.sdp);for(const P of h){const{trackId:v,rtpParameters:M}=P,N=r.get(v),k=S.media.find(z=>String(z.mid)===N);C.applyCodecParameters({offerRtpParameters:M,answerMediaObject:k}),p={type:"answer",sdp:s.write(S)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:S}),y.debug("receive() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p);for(const P of h){const{trackId:v}=P,M=r.get(v),N=this._pc.getTransceivers().find(k=>k.mid===M);if(!N)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(M,N),a.push({localId:M,track:N.receiver.track,rtpReceiver:N.receiver})}return a}async stopReceiving(h){if(this.assertRecvDirection(),this._closed)return;for(const u of h){y.debug("stopReceiving() [localId:%s]",u);const p=this._mapMidTransceiver.get(u);if(!p)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(p.mid)}const a={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",a),await this._pc.setRemoteDescription(a);const r=await this._pc.createAnswer();y.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const u of h)this._mapMidTransceiver.delete(u)}async pauseReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const u of h){y.debug("pauseReceiving() [localId:%s]",u);const p=this._mapMidTransceiver.get(u);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="inactive",this._remoteSdp.pauseMediaSection(u)}const a={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",a),await this._pc.setRemoteDescription(a);const r=await this._pc.createAnswer();y.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const u of h){y.debug("resumeReceiving() [localId:%s]",u);const p=this._mapMidTransceiver.get(u);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(u)}const a={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",a),await this._pc.setRemoteDescription(a);const r=await this._pc.createAnswer();y.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(h){this.assertRecvDirection();const a=this._mapMidTransceiver.get(h);if(!a)throw new Error("associated RTCRtpTransceiver not found");return a.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:h,label:a,protocol:r}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:u,ordered:p,maxPacketLifeTime:S,maxRetransmits:P}=h,v={negotiated:!0,id:u,ordered:p,maxPacketLifeTime:S,maxRetransmits:P,protocol:r};y.debug("receiveDataChannel() [options:%o]",v);const M=this._pc.createDataChannel(a,v);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const N={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",N),await this._pc.setRemoteDescription(N);const k=await this._pc.createAnswer();if(!this._transportReady){const z=s.parse(k.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:z})}y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setLocalDescription(k),this._hasDataChannelMediaSection=!0}return{dataChannel:M}}async setupTransport({localDtlsRole:h,localSdpObject:a}){a||(a=s.parse(this._pc.localDescription.sdp));const r=C.extractDtlsParameters({sdpObject:a});r.role=h,this._remoteSdp.updateDtlsRole(h==="client"?"server":"client"),await new Promise((u,p)=>{this.safeEmit("@connect",{dtlsParameters:r},u,p)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new T.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return Dn.Firefox60=A,Dn}var On={},Nm;function HS(){if(Nm)return On;Nm=1;var d=On&&On.__createBinding||(Object.create?function(h,a,r,u){u===void 0&&(u=r);var p=Object.getOwnPropertyDescriptor(a,r);(!p||("get"in p?!a.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return a[r]}}),Object.defineProperty(h,u,p)}:function(h,a,r,u){u===void 0&&(u=r),h[u]=a[r]}),c=On&&On.__setModuleDefault||(Object.create?function(h,a){Object.defineProperty(h,"default",{enumerable:!0,value:a})}:function(h,a){h.default=a}),l=On&&On.__importStar||function(){var h=function(a){return h=Object.getOwnPropertyNames||function(r){var u=[];for(var p in r)Object.prototype.hasOwnProperty.call(r,p)&&(u[u.length]=p);return u},h(a)};return function(a){if(a&&a.__esModule)return a;var r={};if(a!=null)for(var u=h(a),p=0;p<u.length;p++)u[p]!=="default"&&d(r,a,u[p]);return c(r,a),r}}();Object.defineProperty(On,"__esModule",{value:!0}),On.Safari12=void 0;const s=l(Nt()),_=rt(),T=l(_t()),w=l(Pt()),R=l(Bn()),C=l(Dr()),m=l(hc()),x=Dt(),D=Gt(),O=Un(),y=Ki(),b=new _.Logger("Safari12"),U="Safari12",A={OS:1024,MIS:1024};let g=class Lg extends D.HandlerInterface{static createFactory(){return()=>new Lg}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return U}close(){if(b.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){b.debug("getNativeRtpCapabilities()");const a=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{a.addTransceiver("audio"),a.addTransceiver("video");const r=await a.createOffer();try{a.close()}catch{}const u=s.parse(r.sdp),p=R.extractRtpCapabilities({sdpObject:u});return m.addNackSupportForOpus(p),p}catch(r){try{a.close()}catch{}throw r}}async getNativeSctpCapabilities(){return b.debug("getNativeSctpCapabilities()"),{numStreams:A}}run({direction:a,iceParameters:r,iceCandidates:u,dtlsParameters:p,sctpParameters:S,iceServers:P,iceTransportPolicy:v,additionalSettings:M,proprietaryConstraints:N,extendedRtpCapabilities:k}){this.assertNotClosed(),b.debug("run()"),this._direction=a,this._remoteSdp=new O.RemoteSdp({iceParameters:r,iceCandidates:u,dtlsParameters:p,sctpParameters:S}),this._sendingRtpParametersByKind={audio:w.getSendingRtpParameters("audio",k),video:w.getSendingRtpParameters("video",k)},this._sendingRemoteRtpParametersByKind={audio:w.getSendingRemoteRtpParameters("audio",k),video:w.getSendingRemoteRtpParameters("video",k)},p.role&&p.role!=="auto"&&(this._forcedLocalDtlsRole=p.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:P??[],iceTransportPolicy:v??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...M},N),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(b.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(a){this.assertNotClosed(),b.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=a,this._pc.setConfiguration(r)}async restartIce(a){if(this.assertNotClosed(),b.debug("restartIce()"),this._remoteSdp.updateIceParameters(a),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});b.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const u={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const u=await this._pc.createAnswer();b.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:a,encodings:r,codecOptions:u,codec:p,onRtpSender:S}){this.assertNotClosed(),this.assertSendDirection(),b.debug("send() [kind:%s, track.id:%s]",a.kind,a.id);const P=T.clone(this._sendingRtpParametersByKind[a.kind]);P.codecs=w.reduceCodecs(P.codecs,p);const v=T.clone(this._sendingRemoteRtpParametersByKind[a.kind]);v.codecs=w.reduceCodecs(v.codecs,p);const M=this._remoteSdp.getNextMediaSectionIdx(),N=this._pc.addTransceiver(a,{direction:"sendonly",streams:[this._sendStream]});S&&S(N.sender);let k=await this._pc.createOffer(),z=s.parse(k.sdp),V;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:z});const ee=(0,y.parse)((r??[{}])[0].scalabilityMode);r&&r.length>1&&(b.debug("send() | enabling legacy simulcast"),z=s.parse(k.sdp),V=z.media[M.idx],C.addLegacySimulcast({offerMediaObject:V,numStreams:r.length}),k={type:"offer",sdp:s.write(z)}),b.debug("send() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const L=N.mid;if(P.mid=L,z=s.parse(this._pc.localDescription.sdp),V=z.media[M.idx],P.rtcp.cname=R.getCname({offerMediaObject:V}),P.encodings=C.getRtpEncodings({offerMediaObject:V}),r)for(let H=0;H<P.encodings.length;++H)r[H]&&Object.assign(P.encodings[H],r[H]);if(P.encodings.length>1&&(P.codecs[0].mimeType.toLowerCase()==="video/vp8"||P.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const H of P.encodings)H.scalabilityMode?H.scalabilityMode=`L1T${ee.temporalLayers}`:H.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:V,reuseMid:M.reuseMid,offerRtpParameters:P,answerRtpParameters:v,codecOptions:u});const I={type:"answer",sdp:this._remoteSdp.getSdp()};return b.debug("send() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I),this._mapMidTransceiver.set(L,N),{localId:L,rtpParameters:P,rtpSender:N.sender}}async stopSending(a){if(this.assertSendDirection(),this._closed)return;b.debug("stopSending() [localId:%s]",a);const r=this._mapMidTransceiver.get(a);if(!r)throw new Error("associated RTCRtpTransceiver not found");if(r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.closeMediaSection(r.mid))try{r.stop()}catch{}const p=await this._pc.createOffer();b.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const S={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S),this._mapMidTransceiver.delete(a)}async pauseSending(a){this.assertNotClosed(),this.assertSendDirection(),b.debug("pauseSending() [localId:%s]",a);const r=this._mapMidTransceiver.get(a);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(a);const u=await this._pc.createOffer();b.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async resumeSending(a){this.assertNotClosed(),this.assertSendDirection(),b.debug("resumeSending() [localId:%s]",a);const r=this._mapMidTransceiver.get(a);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(a);const u=await this._pc.createOffer();b.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async replaceTrack(a,r){this.assertNotClosed(),this.assertSendDirection(),r?b.debug("replaceTrack() [localId:%s, track.id:%s]",a,r.id):b.debug("replaceTrack() [localId:%s, no track]",a);const u=this._mapMidTransceiver.get(a);if(!u)throw new Error("associated RTCRtpTransceiver not found");await u.sender.replaceTrack(r)}async setMaxSpatialLayer(a,r){this.assertNotClosed(),this.assertSendDirection(),b.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",a,r);const u=this._mapMidTransceiver.get(a);if(!u)throw new Error("associated RTCRtpTransceiver not found");const p=u.sender.getParameters();p.encodings.forEach((v,M)=>{M<=r?v.active=!0:v.active=!1}),await u.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(a,p.encodings);const S=await this._pc.createOffer();b.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const P={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async setRtpEncodingParameters(a,r){this.assertNotClosed(),this.assertSendDirection(),b.debug("setRtpEncodingParameters() [localId:%s, params:%o]",a,r);const u=this._mapMidTransceiver.get(a);if(!u)throw new Error("associated RTCRtpTransceiver not found");const p=u.sender.getParameters();p.encodings.forEach((v,M)=>{p.encodings[M]={...v,...r}}),await u.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(a,p.encodings);const S=await this._pc.createOffer();b.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const P={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async getSenderStats(a){this.assertNotClosed(),this.assertSendDirection();const r=this._mapMidTransceiver.get(a);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.sender.getStats()}async sendDataChannel({ordered:a,maxPacketLifeTime:r,maxRetransmits:u,label:p,protocol:S}){this.assertNotClosed(),this.assertSendDirection();const P={negotiated:!0,id:this._nextSendSctpStreamId,ordered:a,maxPacketLifeTime:r,maxRetransmits:u,protocol:S};b.debug("sendDataChannel() [options:%o]",P);const v=this._pc.createDataChannel(p,P);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%A.MIS,!this._hasDataChannelMediaSection){const N=await this._pc.createOffer(),k=s.parse(N.sdp),z=k.media.find(ee=>ee.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:k}),b.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N),this._remoteSdp.sendSctpAssociation({offerMediaObject:z});const V={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setRemoteDescription(V),this._hasDataChannelMediaSection=!0}const M={streamId:P.id,ordered:P.ordered,maxPacketLifeTime:P.maxPacketLifeTime,maxRetransmits:P.maxRetransmits};return{dataChannel:v,sctpStreamParameters:M}}async receive(a){this.assertNotClosed(),this.assertRecvDirection();const r=[],u=new Map;for(const v of a){const{trackId:M,kind:N,rtpParameters:k,streamId:z}=v;b.debug("receive() [trackId:%s, kind:%s]",M,N);const V=k.mid??String(this._mapMidTransceiver.size);u.set(M,V),this._remoteSdp.receive({mid:V,kind:N,offerRtpParameters:k,streamId:z??k.rtcp.cname,trackId:M})}const p={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);for(const v of a){const{trackId:M,onRtpReceiver:N}=v;if(N){const k=u.get(M),z=this._pc.getTransceivers().find(V=>V.mid===k);if(!z)throw new Error("transceiver not found");N(z.receiver)}}let S=await this._pc.createAnswer();const P=s.parse(S.sdp);for(const v of a){const{trackId:M,rtpParameters:N}=v,k=u.get(M),z=P.media.find(V=>String(V.mid)===k);R.applyCodecParameters({offerRtpParameters:N,answerMediaObject:z})}S={type:"answer",sdp:s.write(P)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:P}),b.debug("receive() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S);for(const v of a){const{trackId:M}=v,N=u.get(M),k=this._pc.getTransceivers().find(z=>z.mid===N);if(!k)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(N,k),r.push({localId:N,track:k.receiver.track,rtpReceiver:k.receiver})}return r}async stopReceiving(a){if(this.assertRecvDirection(),this._closed)return;for(const p of a){b.debug("stopReceiving() [localId:%s]",p);const S=this._mapMidTransceiver.get(p);if(!S)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(S.mid)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const u=await this._pc.createAnswer();b.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u);for(const p of a)this._mapMidTransceiver.delete(p)}async pauseReceiving(a){this.assertNotClosed(),this.assertRecvDirection();for(const p of a){b.debug("pauseReceiving() [localId:%s]",p);const S=this._mapMidTransceiver.get(p);if(!S)throw new Error("associated RTCRtpTransceiver not found");S.direction="inactive",this._remoteSdp.pauseMediaSection(p)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const u=await this._pc.createAnswer();b.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async resumeReceiving(a){this.assertNotClosed(),this.assertRecvDirection();for(const p of a){b.debug("resumeReceiving() [localId:%s]",p);const S=this._mapMidTransceiver.get(p);if(!S)throw new Error("associated RTCRtpTransceiver not found");S.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(p)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const u=await this._pc.createAnswer();b.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async getReceiverStats(a){this.assertNotClosed(),this.assertRecvDirection();const r=this._mapMidTransceiver.get(a);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:a,label:r,protocol:u}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:p,ordered:S,maxPacketLifeTime:P,maxRetransmits:v}=a,M={negotiated:!0,id:p,ordered:S,maxPacketLifeTime:P,maxRetransmits:v,protocol:u};b.debug("receiveDataChannel() [options:%o]",M);const N=this._pc.createDataChannel(r,M);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const k={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",k),await this._pc.setRemoteDescription(k);const z=await this._pc.createAnswer();if(!this._transportReady){const V=s.parse(z.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:V})}b.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setLocalDescription(z),this._hasDataChannelMediaSection=!0}return{dataChannel:N}}async setupTransport({localDtlsRole:a,localSdpObject:r}){r||(r=s.parse(this._pc.localDescription.sdp));const u=R.extractDtlsParameters({sdpObject:r});u.role=a,this._remoteSdp.updateDtlsRole(a==="client"?"server":"client"),await new Promise((p,S)=>{this.safeEmit("@connect",{dtlsParameters:u},p,S)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new x.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return On.Safari12=g,On}var Mn={},km;function GS(){if(km)return Mn;km=1;var d=Mn&&Mn.__createBinding||(Object.create?function(U,A,g,h){h===void 0&&(h=g);var a=Object.getOwnPropertyDescriptor(A,g);(!a||("get"in a?!A.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return A[g]}}),Object.defineProperty(U,h,a)}:function(U,A,g,h){h===void 0&&(h=g),U[h]=A[g]}),c=Mn&&Mn.__setModuleDefault||(Object.create?function(U,A){Object.defineProperty(U,"default",{enumerable:!0,value:A})}:function(U,A){U.default=A}),l=Mn&&Mn.__importStar||function(){var U=function(A){return U=Object.getOwnPropertyNames||function(g){var h=[];for(var a in g)Object.prototype.hasOwnProperty.call(g,a)&&(h[h.length]=a);return h},U(A)};return function(A){if(A&&A.__esModule)return A;var g={};if(A!=null)for(var h=U(A),a=0;a<h.length;a++)h[a]!=="default"&&d(g,A,h[a]);return c(g,A),g}}();Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.Safari11=void 0;const s=l(Nt()),_=rt(),T=l(_t()),w=l(Pt()),R=l(Bn()),C=l(mc()),m=Gt(),x=Un(),D=new _.Logger("Safari11"),O="Safari11",y={OS:1024,MIS:1024};let b=class Ag extends m.HandlerInterface{static createFactory(){return()=>new Ag}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return O}close(){if(D.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){D.debug("getNativeRtpCapabilities()");const A=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const g=await A.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{A.close()}catch{}const h=s.parse(g.sdp);return R.extractRtpCapabilities({sdpObject:h})}catch(g){try{A.close()}catch{}throw g}}async getNativeSctpCapabilities(){return D.debug("getNativeSctpCapabilities()"),{numStreams:y}}run({direction:A,iceParameters:g,iceCandidates:h,dtlsParameters:a,sctpParameters:r,iceServers:u,iceTransportPolicy:p,additionalSettings:S,proprietaryConstraints:P,extendedRtpCapabilities:v}){D.debug("run()"),this._direction=A,this._remoteSdp=new x.RemoteSdp({iceParameters:g,iceCandidates:h,dtlsParameters:a,sctpParameters:r,planB:!0}),this._sendingRtpParametersByKind={audio:w.getSendingRtpParameters("audio",v),video:w.getSendingRtpParameters("video",v)},this._sendingRemoteRtpParametersByKind={audio:w.getSendingRemoteRtpParameters("audio",v),video:w.getSendingRemoteRtpParameters("video",v)},a.role&&a.role!=="auto"&&(this._forcedLocalDtlsRole=a.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:u??[],iceTransportPolicy:p??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...S},P),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(D.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(A){D.debug("updateIceServers()");const g=this._pc.getConfiguration();g.iceServers=A,this._pc.setConfiguration(g)}async restartIce(A){if(D.debug("restartIce()"),this._remoteSdp.updateIceParameters(A),!!this._transportReady)if(this._direction==="send"){const g=await this._pc.createOffer({iceRestart:!0});D.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",g),await this._pc.setLocalDescription(g);const h={type:"answer",sdp:this._remoteSdp.getSdp()};D.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h)}else{const g={type:"offer",sdp:this._remoteSdp.getSdp()};D.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",g),await this._pc.setRemoteDescription(g);const h=await this._pc.createAnswer();D.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h)}}async getTransportStats(){return this._pc.getStats()}async send({track:A,encodings:g,codecOptions:h,codec:a}){this.assertSendDirection(),D.debug("send() [kind:%s, track.id:%s]",A.kind,A.id),a&&D.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(A),this._pc.addTrack(A,this._sendStream);let r=await this._pc.createOffer(),u=s.parse(r.sdp),p;const S=T.clone(this._sendingRtpParametersByKind[A.kind]);S.codecs=w.reduceCodecs(S.codecs);const P=T.clone(this._sendingRemoteRtpParametersByKind[A.kind]);if(P.codecs=w.reduceCodecs(P.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),A.kind==="video"&&g&&g.length>1&&(D.debug("send() | enabling simulcast"),u=s.parse(r.sdp),p=u.media.find(k=>k.type==="video"),C.addLegacySimulcast({offerMediaObject:p,track:A,numStreams:g.length}),r={type:"offer",sdp:s.write(u)}),D.debug("send() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),u=s.parse(this._pc.localDescription.sdp),p=u.media.find(k=>k.type===A.kind),S.rtcp.cname=R.getCname({offerMediaObject:p}),S.encodings=C.getRtpEncodings({offerMediaObject:p,track:A}),g)for(let k=0;k<S.encodings.length;++k)g[k]&&Object.assign(S.encodings[k],g[k]);if(S.encodings.length>1&&S.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const k of S.encodings)k.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:p,offerRtpParameters:S,answerRtpParameters:P,codecOptions:h});const v={type:"answer",sdp:this._remoteSdp.getSdp()};D.debug("send() | calling pc.setRemoteDescription() [answer:%o]",v),await this._pc.setRemoteDescription(v);const M=String(this._nextSendLocalId);this._nextSendLocalId++;const N=this._pc.getSenders().find(k=>k.track===A);return this._mapSendLocalIdRtpSender.set(M,N),{localId:M,rtpParameters:S,rtpSender:N}}async stopSending(A){this.assertSendDirection();const g=this._mapSendLocalIdRtpSender.get(A);if(!g)throw new Error("associated RTCRtpSender not found");g.track&&this._sendStream.removeTrack(g.track),this._mapSendLocalIdRtpSender.delete(A);const h=await this._pc.createOffer();D.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",h);try{await this._pc.setLocalDescription(h)}catch(r){if(this._sendStream.getTracks().length===0){D.warn("stopSending() | ignoring expected error due no sending tracks: %s",r.toString());return}throw r}if(this._pc.signalingState==="stable")return;const a={type:"answer",sdp:this._remoteSdp.getSdp()};D.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async pauseSending(A){}async resumeSending(A){}async replaceTrack(A,g){this.assertSendDirection(),g?D.debug("replaceTrack() [localId:%s, track.id:%s]",A,g.id):D.debug("replaceTrack() [localId:%s, no track]",A);const h=this._mapSendLocalIdRtpSender.get(A);if(!h)throw new Error("associated RTCRtpSender not found");const a=h.track;await h.replaceTrack(g),a&&this._sendStream.removeTrack(a),g&&this._sendStream.addTrack(g)}async setMaxSpatialLayer(A,g){this.assertSendDirection(),D.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",A,g);const h=this._mapSendLocalIdRtpSender.get(A);if(!h)throw new Error("associated RTCRtpSender not found");const a=h.getParameters();a.encodings.forEach((r,u)=>{u<=g?r.active=!0:r.active=!1}),await h.setParameters(a)}async setRtpEncodingParameters(A,g){this.assertSendDirection(),D.debug("setRtpEncodingParameters() [localId:%s, params:%o]",A,g);const h=this._mapSendLocalIdRtpSender.get(A);if(!h)throw new Error("associated RTCRtpSender not found");const a=h.getParameters();a.encodings.forEach((r,u)=>{a.encodings[u]={...r,...g}}),await h.setParameters(a)}async getSenderStats(A){this.assertSendDirection();const g=this._mapSendLocalIdRtpSender.get(A);if(!g)throw new Error("associated RTCRtpSender not found");return g.getStats()}async sendDataChannel({ordered:A,maxPacketLifeTime:g,maxRetransmits:h,label:a,protocol:r}){this.assertSendDirection();const u={negotiated:!0,id:this._nextSendSctpStreamId,ordered:A,maxPacketLifeTime:g,maxRetransmits:h,protocol:r};D.debug("sendDataChannel() [options:%o]",u);const p=this._pc.createDataChannel(a,u);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%y.MIS,!this._hasDataChannelMediaSection){const P=await this._pc.createOffer(),v=s.parse(P.sdp),M=v.media.find(k=>k.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:v}),D.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P),this._remoteSdp.sendSctpAssociation({offerMediaObject:M});const N={type:"answer",sdp:this._remoteSdp.getSdp()};D.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N),this._hasDataChannelMediaSection=!0}const S={streamId:u.id,ordered:u.ordered,maxPacketLifeTime:u.maxPacketLifeTime,maxRetransmits:u.maxRetransmits};return{dataChannel:p,sctpStreamParameters:S}}async receive(A){this.assertRecvDirection();const g=[];for(const u of A){const{trackId:p,kind:S,rtpParameters:P,streamId:v}=u;D.debug("receive() [trackId:%s, kind:%s]",p,S);const M=S;this._remoteSdp.receive({mid:M,kind:S,offerRtpParameters:P,streamId:v??P.rtcp.cname,trackId:p})}const h={type:"offer",sdp:this._remoteSdp.getSdp()};D.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);let a=await this._pc.createAnswer();const r=s.parse(a.sdp);for(const u of A){const{kind:p,rtpParameters:S}=u,P=p,v=r.media.find(M=>String(M.mid)===P);R.applyCodecParameters({offerRtpParameters:S,answerMediaObject:v})}a={type:"answer",sdp:s.write(r)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:r}),D.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const u of A){const{kind:p,trackId:S,rtpParameters:P}=u,v=p,M=S,N=this._pc.getReceivers().find(k=>k.track&&k.track.id===M);if(!N)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(M,{mid:v,rtpParameters:P,rtpReceiver:N}),g.push({localId:M,track:N.track,rtpReceiver:N})}return g}async stopReceiving(A){this.assertRecvDirection();for(const a of A){D.debug("stopReceiving() [localId:%s]",a);const{mid:r,rtpParameters:u}=this._mapRecvLocalIdInfo.get(a)??{};this._mapRecvLocalIdInfo.delete(a),this._remoteSdp.planBStopReceiving({mid:r,offerRtpParameters:u})}const g={type:"offer",sdp:this._remoteSdp.getSdp()};D.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",g),await this._pc.setRemoteDescription(g);const h=await this._pc.createAnswer();D.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h)}async getReceiverStats(A){this.assertRecvDirection();const{rtpReceiver:g}=this._mapRecvLocalIdInfo.get(A)??{};if(!g)throw new Error("associated RTCRtpReceiver not found");return g.getStats()}async pauseReceiving(A){}async resumeReceiving(A){}async receiveDataChannel({sctpStreamParameters:A,label:g,protocol:h}){this.assertRecvDirection();const{streamId:a,ordered:r,maxPacketLifeTime:u,maxRetransmits:p}=A,S={negotiated:!0,id:a,ordered:r,maxPacketLifeTime:u,maxRetransmits:p,protocol:h};D.debug("receiveDataChannel() [options:%o]",S);const P=this._pc.createDataChannel(g,S);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const v={type:"offer",sdp:this._remoteSdp.getSdp()};D.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const M=await this._pc.createAnswer();if(!this._transportReady){const N=s.parse(M.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:N})}D.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setLocalDescription(M),this._hasDataChannelMediaSection=!0}return{dataChannel:P}}async setupTransport({localDtlsRole:A,localSdpObject:g}){g||(g=s.parse(this._pc.localDescription.sdp));const h=R.extractDtlsParameters({sdpObject:g});h.role=A,this._remoteSdp.updateDtlsRole(A==="client"?"server":"client"),await new Promise((a,r)=>{this.safeEmit("@connect",{dtlsParameters:h},a,r)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return Mn.Safari11=b,Mn}var xn={},Ln={},jm;function YS(){if(jm)return Ln;jm=1;var d=Ln&&Ln.__createBinding||(Object.create?function(w,R,C,m){m===void 0&&(m=C);var x=Object.getOwnPropertyDescriptor(R,C);(!x||("get"in x?!R.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return R[C]}}),Object.defineProperty(w,m,x)}:function(w,R,C,m){m===void 0&&(m=C),w[m]=R[C]}),c=Ln&&Ln.__setModuleDefault||(Object.create?function(w,R){Object.defineProperty(w,"default",{enumerable:!0,value:R})}:function(w,R){w.default=R}),l=Ln&&Ln.__importStar||function(){var w=function(R){return w=Object.getOwnPropertyNames||function(C){var m=[];for(var x in C)Object.prototype.hasOwnProperty.call(C,x)&&(m[m.length]=x);return m},w(R)};return function(R){if(R&&R.__esModule)return R;var C={};if(R!=null)for(var m=w(R),x=0;x<m.length;x++)m[x]!=="default"&&d(C,R,m[x]);return c(C,R),C}}();Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.getCapabilities=_,Ln.mangleRtpParameters=T;const s=l(_t());function _(){const w=RTCRtpReceiver.getCapabilities(),R=s.clone(w);for(const C of R.codecs??[]){if(C.channels=C.numChannels,delete C.numChannels,C.mimeType=C.mimeType??`${C.kind}/${C.name}`,C.parameters){const m=C.parameters;m.apt&&(m.apt=Number(m.apt)),m["packetization-mode"]&&(m["packetization-mode"]=Number(m["packetization-mode"]))}for(const m of C.rtcpFeedback??[])m.parameter||(m.parameter="")}return R}function T(w){const R=s.clone(w);R.mid&&(R.muxId=R.mid,delete R.mid);for(const C of R.codecs)C.channels&&(C.numChannels=C.channels,delete C.channels),C.mimeType&&!C.name&&(C.name=C.mimeType.split("/")[1]),delete C.mimeType;return R}return Ln}var Bm;function VS(){if(Bm)return xn;Bm=1;var d=xn&&xn.__createBinding||(Object.create?function(O,y,b,U){U===void 0&&(U=b);var A=Object.getOwnPropertyDescriptor(y,b);(!A||("get"in A?!y.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return y[b]}}),Object.defineProperty(O,U,A)}:function(O,y,b,U){U===void 0&&(U=b),O[U]=y[b]}),c=xn&&xn.__setModuleDefault||(Object.create?function(O,y){Object.defineProperty(O,"default",{enumerable:!0,value:y})}:function(O,y){O.default=y}),l=xn&&xn.__importStar||function(){var O=function(y){return O=Object.getOwnPropertyNames||function(b){var U=[];for(var A in b)Object.prototype.hasOwnProperty.call(b,A)&&(U[U.length]=A);return U},O(y)};return function(y){if(y&&y.__esModule)return y;var b={};if(y!=null)for(var U=O(y),A=0;A<U.length;A++)U[A]!=="default"&&d(b,y,U[A]);return c(b,y),b}}();Object.defineProperty(xn,"__esModule",{value:!0}),xn.Edge11=void 0;const s=rt(),_=Dt(),T=l(_t()),w=l(Pt()),R=l(YS()),C=Gt(),m=new s.Logger("Edge11"),x="Edge11";let D=class Pg extends C.HandlerInterface{static createFactory(){return()=>new Pg}constructor(){super(),this._rtpSenders=new Map,this._rtpReceivers=new Map,this._nextSendLocalId=0,this._transportReady=!1}get name(){return x}close(){m.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const y of this._rtpSenders.values())try{y.stop()}catch{}for(const y of this._rtpReceivers.values())try{y.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return m.debug("getNativeRtpCapabilities()"),R.getCapabilities()}async getNativeSctpCapabilities(){return m.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:y,iceParameters:b,iceCandidates:U,dtlsParameters:A,sctpParameters:g,iceServers:h,iceTransportPolicy:a,additionalSettings:r,proprietaryConstraints:u,extendedRtpCapabilities:p}){m.debug("run()"),this._sendingRtpParametersByKind={audio:w.getSendingRtpParameters("audio",p),video:w.getSendingRtpParameters("video",p)},this._remoteIceParameters=b,this._remoteIceCandidates=U,this._remoteDtlsParameters=A,this._cname=`CNAME-${T.generateRandomNumber()}`,this.setIceGatherer({iceServers:h,iceTransportPolicy:a}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(y){throw new _.UnsupportedError("not supported")}async restartIce(y){if(m.debug("restartIce()"),this._remoteIceParameters=y,!!this._transportReady){m.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,y,"controlling");for(const b of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(b);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:y,encodings:b,codecOptions:U,codec:A}){m.debug("send() [kind:%s, track.id:%s]",y.kind,y.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),m.debug("send() | calling new RTCRtpSender()");const g=new RTCRtpSender(y,this._dtlsTransport),h=T.clone(this._sendingRtpParametersByKind[y.kind]);h.codecs=w.reduceCodecs(h.codecs,A);const a=h.codecs.some(p=>/.+\/rtx$/i.test(p.mimeType));b||(b=[{}]);for(const p of b)p.ssrc=T.generateRandomNumber(),a&&(p.rtx={ssrc:T.generateRandomNumber()});h.encodings=b,h.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const r=R.mangleRtpParameters(h);m.debug("send() | calling rtpSender.send() [params:%o]",r),await g.send(r);const u=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(u,g),{localId:u,rtpParameters:h,rtpSender:g}}async stopSending(y){m.debug("stopSending() [localId:%s]",y);const b=this._rtpSenders.get(y);if(!b)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(y);try{m.debug("stopSending() | calling rtpSender.stop()"),b.stop()}catch(U){throw m.warn("stopSending() | rtpSender.stop() failed:%o",U),U}}async pauseSending(y){}async resumeSending(y){}async replaceTrack(y,b){b?m.debug("replaceTrack() [localId:%s, track.id:%s]",y,b.id):m.debug("replaceTrack() [localId:%s, no track]",y);const U=this._rtpSenders.get(y);if(!U)throw new Error("RTCRtpSender not found");U.setTrack(b)}async setMaxSpatialLayer(y,b){m.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",y,b);const U=this._rtpSenders.get(y);if(!U)throw new Error("RTCRtpSender not found");const A=U.getParameters();A.encodings.forEach((g,h)=>{h<=b?g.active=!0:g.active=!1}),await U.setParameters(A)}async setRtpEncodingParameters(y,b){m.debug("setRtpEncodingParameters() [localId:%s, params:%o]",y,b);const U=this._rtpSenders.get(y);if(!U)throw new Error("RTCRtpSender not found");const A=U.getParameters();A.encodings.forEach((g,h)=>{A.encodings[h]={...g,...b}}),await U.setParameters(A)}async getSenderStats(y){const b=this._rtpSenders.get(y);if(!b)throw new Error("RTCRtpSender not found");return b.getStats()}async sendDataChannel(y){throw new _.UnsupportedError("not implemented")}async receive(y){const b=[];for(const U of y){const{trackId:A,kind:g}=U;m.debug("receive() [trackId:%s, kind:%s]",A,g)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const U of y){const{trackId:A,kind:g,rtpParameters:h}=U;m.debug("receive() | calling new RTCRtpReceiver()");const a=new RTCRtpReceiver(this._dtlsTransport,g);a.addEventListener("error",p=>{m.error('rtpReceiver "error" event [event:%o]',p)});const r=R.mangleRtpParameters(h);m.debug("receive() | calling rtpReceiver.receive() [params:%o]",r),await a.receive(r);const u=A;this._rtpReceivers.set(u,a),b.push({localId:u,track:a.track,rtpReceiver:a})}return b}async stopReceiving(y){for(const b of y){m.debug("stopReceiving() [localId:%s]",b);const U=this._rtpReceivers.get(b);if(!U)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(b);try{m.debug("stopReceiving() | calling rtpReceiver.stop()"),U.stop()}catch(A){m.warn("stopReceiving() | rtpReceiver.stop() failed:%o",A)}}}async pauseReceiving(y){}async resumeReceiving(y){}async getReceiverStats(y){const b=this._rtpReceivers.get(y);if(!b)throw new Error("RTCRtpReceiver not found");return b.getStats()}async receiveDataChannel(y){throw new _.UnsupportedError("not implemented")}setIceGatherer({iceServers:y,iceTransportPolicy:b}){const U=new RTCIceGatherer({iceServers:y??[],gatherPolicy:b??"all"});U.addEventListener("error",A=>{m.error('iceGatherer "error" event [event:%o]',A)});try{U.gather()}catch(A){m.debug("setIceGatherer() | iceGatherer.gather() failed: %s",A.toString())}this._iceGatherer=U}setIceTransport(){const y=new RTCIceTransport(this._iceGatherer);y.addEventListener("statechange",()=>{switch(y.state){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}}),y.addEventListener("icestatechange",()=>{switch(y.state){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}}),y.addEventListener("candidatepairchange",b=>{m.debug('iceTransport "candidatepairchange" event [pair:%o]',b.pair)}),this._iceTransport=y}setDtlsTransport(){const y=new RTCDtlsTransport(this._iceTransport);y.addEventListener("statechange",()=>{m.debug('dtlsTransport "statechange" event [state:%s]',y.state)}),y.addEventListener("dtlsstatechange",()=>{m.debug('dtlsTransport "dtlsstatechange" event [state:%s]',y.state),y.state==="closed"&&this.emit("@connectionstatechange","closed")}),y.addEventListener("error",b=>{m.error('dtlsTransport "error" event [event:%o]',b)}),this._dtlsTransport=y}async setupTransport({localDtlsRole:y}){m.debug("setupTransport()");const b=this._dtlsTransport.getLocalParameters();b.role=y,await new Promise((U,A)=>{this.safeEmit("@connect",{dtlsParameters:b},U,A)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const U of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(U);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(U=>U.algorithm==="sha-256"||U.algorithm==="sha-384"||U.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}};return xn.Edge11=D,xn}var An={},Um;function QS(){if(Um)return An;Um=1;var d=An&&An.__createBinding||(Object.create?function(h,a,r,u){u===void 0&&(u=r);var p=Object.getOwnPropertyDescriptor(a,r);(!p||("get"in p?!a.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return a[r]}}),Object.defineProperty(h,u,p)}:function(h,a,r,u){u===void 0&&(u=r),h[u]=a[r]}),c=An&&An.__setModuleDefault||(Object.create?function(h,a){Object.defineProperty(h,"default",{enumerable:!0,value:a})}:function(h,a){h.default=a}),l=An&&An.__importStar||function(){var h=function(a){return h=Object.getOwnPropertyNames||function(r){var u=[];for(var p in r)Object.prototype.hasOwnProperty.call(r,p)&&(u[u.length]=p);return u},h(a)};return function(a){if(a&&a.__esModule)return a;var r={};if(a!=null)for(var u=h(a),p=0;p<u.length;p++)u[p]!=="default"&&d(r,a,u[p]);return c(r,a),r}}();Object.defineProperty(An,"__esModule",{value:!0}),An.ReactNativeUnifiedPlan=void 0;const s=l(Nt()),_=rt(),T=l(_t()),w=l(Pt()),R=l(Bn()),C=l(Dr()),m=l(hc()),x=Dt(),D=Gt(),O=Un(),y=Ki(),b=new _.Logger("ReactNativeUnifiedPlan"),U="ReactNativeUnifiedPlan",A={OS:1024,MIS:1024};let g=class Ng extends D.HandlerInterface{static createFactory(){return()=>new Ng}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return U}close(){if(b.debug("close()"),!this._closed){if(this._closed=!0,this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){b.debug("getNativeRtpCapabilities()");const a=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{a.addTransceiver("audio"),a.addTransceiver("video");const r=await a.createOffer();try{a.close()}catch{}const u=s.parse(r.sdp),p=R.extractRtpCapabilities({sdpObject:u});return m.addNackSupportForOpus(p),p}catch(r){try{a.close()}catch{}throw r}}async getNativeSctpCapabilities(){return b.debug("getNativeSctpCapabilities()"),{numStreams:A}}run({direction:a,iceParameters:r,iceCandidates:u,dtlsParameters:p,sctpParameters:S,iceServers:P,iceTransportPolicy:v,additionalSettings:M,proprietaryConstraints:N,extendedRtpCapabilities:k}){this.assertNotClosed(),b.debug("run()"),this._direction=a,this._remoteSdp=new O.RemoteSdp({iceParameters:r,iceCandidates:u,dtlsParameters:p,sctpParameters:S}),this._sendingRtpParametersByKind={audio:w.getSendingRtpParameters("audio",k),video:w.getSendingRtpParameters("video",k)},this._sendingRemoteRtpParametersByKind={audio:w.getSendingRemoteRtpParameters("audio",k),video:w.getSendingRemoteRtpParameters("video",k)},p.role&&p.role!=="auto"&&(this._forcedLocalDtlsRole=p.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:P??[],iceTransportPolicy:v??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...M},N),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(b.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(a){this.assertNotClosed(),b.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=a,this._pc.setConfiguration(r)}async restartIce(a){if(this.assertNotClosed(),b.debug("restartIce()"),this._remoteSdp.updateIceParameters(a),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});b.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const u={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const u=await this._pc.createAnswer();b.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:a,encodings:r,codecOptions:u,codec:p,onRtpSender:S}){this.assertNotClosed(),this.assertSendDirection(),b.debug("send() [kind:%s, track.id:%s]",a.kind,a.id),r&&r.length>1&&r.forEach((Y,B)=>{Y.rid=`r${B}`});const P=T.clone(this._sendingRtpParametersByKind[a.kind]);P.codecs=w.reduceCodecs(P.codecs,p);const v=T.clone(this._sendingRemoteRtpParametersByKind[a.kind]);v.codecs=w.reduceCodecs(v.codecs,p);const M=this._remoteSdp.getNextMediaSectionIdx(),N=this._pc.addTransceiver(a,{direction:"sendonly",streams:[this._sendStream],sendEncodings:r});S&&S(N.sender);let k=await this._pc.createOffer(),z=s.parse(k.sdp),V;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:z});let ee=!1;const L=(0,y.parse)((r??[{}])[0].scalabilityMode);r&&r.length===1&&L.spatialLayers>1&&P.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(b.debug("send() | enabling legacy simulcast for VP9 SVC"),ee=!0,z=s.parse(k.sdp),V=z.media[M.idx],C.addLegacySimulcast({offerMediaObject:V,numStreams:L.spatialLayers}),k={type:"offer",sdp:s.write(z)}),b.debug("send() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);let I=N.mid??void 0;if(I||b.warn("send() | missing transceiver.mid (bug in react-native-webrtc, using a workaround"),P.mid=I,z=s.parse(this._pc.localDescription.sdp),V=z.media[M.idx],P.rtcp.cname=R.getCname({offerMediaObject:V}),!r)P.encodings=C.getRtpEncodings({offerMediaObject:V});else if(r.length===1){let Y=C.getRtpEncodings({offerMediaObject:V});Object.assign(Y[0],r[0]),ee&&(Y=[Y[0]]),P.encodings=Y}else P.encodings=r;if(P.encodings.length>1&&(P.codecs[0].mimeType.toLowerCase()==="video/vp8"||P.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Y of P.encodings)Y.scalabilityMode?Y.scalabilityMode=`L1T${L.temporalLayers}`:Y.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:V,reuseMid:M.reuseMid,offerRtpParameters:P,answerRtpParameters:v,codecOptions:u,extmapAllowMixed:!0});const H={type:"answer",sdp:this._remoteSdp.getSdp()};return b.debug("send() | calling pc.setRemoteDescription() [answer:%o]",H),await this._pc.setRemoteDescription(H),I||(I=N.mid,P.mid=I),this._mapMidTransceiver.set(I,N),{localId:I,rtpParameters:P,rtpSender:N.sender}}async stopSending(a){if(this.assertSendDirection(),this._closed)return;b.debug("stopSending() [localId:%s]",a);const r=this._mapMidTransceiver.get(a);if(!r)throw new Error("associated RTCRtpTransceiver not found");if(r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.closeMediaSection(r.mid))try{r.stop()}catch{}const p=await this._pc.createOffer();b.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const S={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S),this._mapMidTransceiver.delete(a)}async pauseSending(a){this.assertNotClosed(),this.assertSendDirection(),b.debug("pauseSending() [localId:%s]",a);const r=this._mapMidTransceiver.get(a);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(a);const u=await this._pc.createOffer();b.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async resumeSending(a){this.assertNotClosed(),this.assertSendDirection(),b.debug("resumeSending() [localId:%s]",a);const r=this._mapMidTransceiver.get(a);if(this._remoteSdp.resumeSendingMediaSection(a),!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="sendonly";const u=await this._pc.createOffer();b.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async replaceTrack(a,r){this.assertNotClosed(),this.assertSendDirection(),r?b.debug("replaceTrack() [localId:%s, track.id:%s]",a,r.id):b.debug("replaceTrack() [localId:%s, no track]",a);const u=this._mapMidTransceiver.get(a);if(!u)throw new Error("associated RTCRtpTransceiver not found");await u.sender.replaceTrack(r)}async setMaxSpatialLayer(a,r){this.assertNotClosed(),this.assertSendDirection(),b.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",a,r);const u=this._mapMidTransceiver.get(a);if(!u)throw new Error("associated RTCRtpTransceiver not found");const p=u.sender.getParameters();p.encodings.forEach((v,M)=>{M<=r?v.active=!0:v.active=!1}),await u.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(a,p.encodings);const S=await this._pc.createOffer();b.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const P={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async setRtpEncodingParameters(a,r){this.assertNotClosed(),this.assertSendDirection(),b.debug("setRtpEncodingParameters() [localId:%s, params:%o]",a,r);const u=this._mapMidTransceiver.get(a);if(!u)throw new Error("associated RTCRtpTransceiver not found");const p=u.sender.getParameters();p.encodings.forEach((v,M)=>{p.encodings[M]={...v,...r}}),await u.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(a,p.encodings);const S=await this._pc.createOffer();b.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const P={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async getSenderStats(a){this.assertNotClosed(),this.assertSendDirection();const r=this._mapMidTransceiver.get(a);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.sender.getStats()}async sendDataChannel({ordered:a,maxPacketLifeTime:r,maxRetransmits:u,label:p,protocol:S}){this.assertNotClosed(),this.assertSendDirection();const P={negotiated:!0,id:this._nextSendSctpStreamId,ordered:a,maxPacketLifeTime:r,maxRetransmits:u,protocol:S};b.debug("sendDataChannel() [options:%o]",P);const v=this._pc.createDataChannel(p,P);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%A.MIS,!this._hasDataChannelMediaSection){const N=await this._pc.createOffer(),k=s.parse(N.sdp),z=k.media.find(ee=>ee.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:k}),b.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N),this._remoteSdp.sendSctpAssociation({offerMediaObject:z});const V={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setRemoteDescription(V),this._hasDataChannelMediaSection=!0}const M={streamId:P.id,ordered:P.ordered,maxPacketLifeTime:P.maxPacketLifeTime,maxRetransmits:P.maxRetransmits};return{dataChannel:v,sctpStreamParameters:M}}async receive(a){this.assertNotClosed(),this.assertRecvDirection();const r=[],u=new Map;for(const v of a){const{trackId:M,kind:N,rtpParameters:k,streamId:z}=v;b.debug("receive() [trackId:%s, kind:%s]",M,N);const V=k.mid??String(this._mapMidTransceiver.size);u.set(M,V),this._remoteSdp.receive({mid:V,kind:N,offerRtpParameters:k,streamId:z??k.rtcp.cname,trackId:M})}const p={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);for(const v of a){const{trackId:M,onRtpReceiver:N}=v;if(N){const k=u.get(M),z=this._pc.getTransceivers().find(V=>V.mid===k);if(!z)throw new Error("transceiver not found");N(z.receiver)}}let S=await this._pc.createAnswer();const P=s.parse(S.sdp);for(const v of a){const{trackId:M,rtpParameters:N}=v,k=u.get(M),z=P.media.find(V=>String(V.mid)===k);R.applyCodecParameters({offerRtpParameters:N,answerMediaObject:z})}S={type:"answer",sdp:s.write(P)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:P}),b.debug("receive() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S);for(const v of a){const{trackId:M}=v,N=u.get(M),k=this._pc.getTransceivers().find(z=>z.mid===N);if(k)this._mapMidTransceiver.set(N,k),r.push({localId:N,track:k.receiver.track,rtpReceiver:k.receiver});else throw new Error("new RTCRtpTransceiver not found")}return r}async stopReceiving(a){if(this.assertRecvDirection(),this._closed)return;for(const p of a){b.debug("stopReceiving() [localId:%s]",p);const S=this._mapMidTransceiver.get(p);if(!S)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(S.mid)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const u=await this._pc.createAnswer();b.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u);for(const p of a)this._mapMidTransceiver.delete(p)}async pauseReceiving(a){this.assertNotClosed(),this.assertRecvDirection();for(const p of a){b.debug("pauseReceiving() [localId:%s]",p);const S=this._mapMidTransceiver.get(p);if(!S)throw new Error("associated RTCRtpTransceiver not found");S.direction="inactive",this._remoteSdp.pauseMediaSection(p)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const u=await this._pc.createAnswer();b.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async resumeReceiving(a){this.assertNotClosed(),this.assertRecvDirection();for(const p of a){b.debug("resumeReceiving() [localId:%s]",p);const S=this._mapMidTransceiver.get(p);if(!S)throw new Error("associated RTCRtpTransceiver not found");S.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(p)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const u=await this._pc.createAnswer();b.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async getReceiverStats(a){this.assertNotClosed(),this.assertRecvDirection();const r=this._mapMidTransceiver.get(a);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:a,label:r,protocol:u}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:p,ordered:S,maxPacketLifeTime:P,maxRetransmits:v}=a,M={negotiated:!0,id:p,ordered:S,maxPacketLifeTime:P,maxRetransmits:v,protocol:u};b.debug("receiveDataChannel() [options:%o]",M);const N=this._pc.createDataChannel(r,M);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const k={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",k),await this._pc.setRemoteDescription(k);const z=await this._pc.createAnswer();if(!this._transportReady){const V=s.parse(z.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:V})}b.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setLocalDescription(z),this._hasDataChannelMediaSection=!0}return{dataChannel:N}}async setupTransport({localDtlsRole:a,localSdpObject:r}){r||(r=s.parse(this._pc.localDescription.sdp));const u=R.extractDtlsParameters({sdpObject:r});u.role=a,this._remoteSdp.updateDtlsRole(a==="client"?"server":"client"),await new Promise((p,S)=>{this.safeEmit("@connect",{dtlsParameters:u},p,S)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new x.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return An.ReactNativeUnifiedPlan=g,An}var Pn={},zm;function FS(){if(zm)return Pn;zm=1;var d=Pn&&Pn.__createBinding||(Object.create?function(A,g,h,a){a===void 0&&(a=h);var r=Object.getOwnPropertyDescriptor(g,h);(!r||("get"in r?!g.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return g[h]}}),Object.defineProperty(A,a,r)}:function(A,g,h,a){a===void 0&&(a=h),A[a]=g[h]}),c=Pn&&Pn.__setModuleDefault||(Object.create?function(A,g){Object.defineProperty(A,"default",{enumerable:!0,value:g})}:function(A,g){A.default=g}),l=Pn&&Pn.__importStar||function(){var A=function(g){return A=Object.getOwnPropertyNames||function(h){var a=[];for(var r in h)Object.prototype.hasOwnProperty.call(h,r)&&(a[a.length]=r);return a},A(g)};return function(g){if(g&&g.__esModule)return g;var h={};if(g!=null)for(var a=A(g),r=0;r<a.length;r++)a[r]!=="default"&&d(h,g,a[r]);return c(h,g),h}}();Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.ReactNative=void 0;const s=l(Nt()),_=rt(),T=Dt(),w=l(_t()),R=l(Pt()),C=l(Bn()),m=l(mc()),x=Gt(),D=Un(),O=new _.Logger("ReactNative"),y="ReactNative",b={OS:1024,MIS:1024};let U=class kg extends x.HandlerInterface{static createFactory(){return()=>new kg}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return y}close(){if(O.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){O.debug("getNativeRtpCapabilities()");const g=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const h=await g.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{g.close()}catch{}const a=s.parse(h.sdp);return C.extractRtpCapabilities({sdpObject:a})}catch(h){try{g.close()}catch{}throw h}}async getNativeSctpCapabilities(){return O.debug("getNativeSctpCapabilities()"),{numStreams:b}}run({direction:g,iceParameters:h,iceCandidates:a,dtlsParameters:r,sctpParameters:u,iceServers:p,iceTransportPolicy:S,additionalSettings:P,proprietaryConstraints:v,extendedRtpCapabilities:M}){O.debug("run()"),this._direction=g,this._remoteSdp=new D.RemoteSdp({iceParameters:h,iceCandidates:a,dtlsParameters:r,sctpParameters:u,planB:!0}),this._sendingRtpParametersByKind={audio:R.getSendingRtpParameters("audio",M),video:R.getSendingRtpParameters("video",M)},this._sendingRemoteRtpParametersByKind={audio:R.getSendingRemoteRtpParameters("audio",M),video:R.getSendingRemoteRtpParameters("video",M)},r.role&&r.role!=="auto"&&(this._forcedLocalDtlsRole=r.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:p??[],iceTransportPolicy:S??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...P},v),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(O.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(g){O.debug("updateIceServers()");const h=this._pc.getConfiguration();h.iceServers=g,this._pc.setConfiguration(h)}async restartIce(g){if(O.debug("restartIce()"),this._remoteSdp.updateIceParameters(g),!!this._transportReady)if(this._direction==="send"){const h=await this._pc.createOffer({iceRestart:!0});O.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",h),await this._pc.setLocalDescription(h);const a={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}else{const h={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const a=await this._pc.createAnswer();O.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}}async getTransportStats(){return this._pc.getStats()}async send({track:g,encodings:h,codecOptions:a,codec:r}){this.assertSendDirection(),O.debug("send() [kind:%s, track.id:%s]",g.kind,g.id),r&&O.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(g),this._pc.addStream(this._sendStream);let u=await this._pc.createOffer(),p=s.parse(u.sdp),S;const P=w.clone(this._sendingRtpParametersByKind[g.kind]);P.codecs=R.reduceCodecs(P.codecs);const v=w.clone(this._sendingRemoteRtpParametersByKind[g.kind]);if(v.codecs=R.reduceCodecs(v.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p}),g.kind==="video"&&h&&h.length>1&&(O.debug("send() | enabling simulcast"),p=s.parse(u.sdp),S=p.media.find(k=>k.type==="video"),m.addLegacySimulcast({offerMediaObject:S,track:g,numStreams:h.length}),u={type:"offer",sdp:s.write(p)}),O.debug("send() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),p=s.parse(this._pc.localDescription.sdp),S=p.media.find(k=>k.type===g.kind),P.rtcp.cname=C.getCname({offerMediaObject:S}),P.encodings=m.getRtpEncodings({offerMediaObject:S,track:g}),h)for(let k=0;k<P.encodings.length;++k)h[k]&&Object.assign(P.encodings[k],h[k]);if(P.encodings.length>1&&(P.codecs[0].mimeType.toLowerCase()==="video/vp8"||P.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const k of P.encodings)k.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:S,offerRtpParameters:P,answerRtpParameters:v,codecOptions:a});const M={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("send() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M);const N=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(N,g),{localId:N,rtpParameters:P}}async stopSending(g){this.assertSendDirection(),O.debug("stopSending() [localId:%s]",g);const h=this._mapSendLocalIdTrack.get(g);if(!h)throw new Error("track not found");this._mapSendLocalIdTrack.delete(g),this._sendStream.removeTrack(h),this._pc.addStream(this._sendStream);const a=await this._pc.createOffer();O.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",a);try{await this._pc.setLocalDescription(a)}catch(u){if(this._sendStream.getTracks().length===0){O.warn("stopSending() | ignoring expected error due no sending tracks: %s",u.toString());return}throw u}if(this._pc.signalingState==="stable")return;const r={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}async pauseSending(g){}async resumeSending(g){}async replaceTrack(g,h){throw new T.UnsupportedError("not implemented")}async setMaxSpatialLayer(g,h){throw new T.UnsupportedError("not implemented")}async setRtpEncodingParameters(g,h){throw new T.UnsupportedError("not implemented")}async getSenderStats(g){throw new T.UnsupportedError("not implemented")}async sendDataChannel({ordered:g,maxPacketLifeTime:h,maxRetransmits:a,label:r,protocol:u}){this.assertSendDirection();const p={negotiated:!0,id:this._nextSendSctpStreamId,ordered:g,maxPacketLifeTime:h,maxRetransmitTime:h,maxRetransmits:a,protocol:u};O.debug("sendDataChannel() [options:%o]",p);const S=this._pc.createDataChannel(r,p);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%b.MIS,!this._hasDataChannelMediaSection){const v=await this._pc.createOffer(),M=s.parse(v.sdp),N=M.media.find(z=>z.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),O.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v),this._remoteSdp.sendSctpAssociation({offerMediaObject:N});const k={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k),this._hasDataChannelMediaSection=!0}const P={streamId:p.id,ordered:p.ordered,maxPacketLifeTime:p.maxPacketLifeTime,maxRetransmits:p.maxRetransmits};return{dataChannel:S,sctpStreamParameters:P}}async receive(g){this.assertRecvDirection();const h=[],a=new Map;for(const S of g){const{trackId:P,kind:v,rtpParameters:M}=S;O.debug("receive() [trackId:%s, kind:%s]",P,v);const N=v;let k=S.streamId??M.rtcp.cname;O.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),k+=`-hack-${w.generateRandomNumber()}`,a.set(P,k),this._remoteSdp.receive({mid:N,kind:v,offerRtpParameters:M,streamId:k,trackId:P})}const r={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);let u=await this._pc.createAnswer();const p=s.parse(u.sdp);for(const S of g){const{kind:P,rtpParameters:v}=S,M=P,N=p.media.find(k=>String(k.mid)===M);C.applyCodecParameters({offerRtpParameters:v,answerMediaObject:N})}u={type:"answer",sdp:s.write(p)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p}),O.debug("receive() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u);for(const S of g){const{kind:P,trackId:v,rtpParameters:M}=S,N=v,k=P,z=a.get(v),ee=this._pc.getRemoteStreams().find(L=>L.id===z).getTrackById(N);if(!ee)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(N,{mid:k,rtpParameters:M}),h.push({localId:N,track:ee})}return h}async stopReceiving(g){this.assertRecvDirection();for(const r of g){O.debug("stopReceiving() [localId:%s]",r);const{mid:u,rtpParameters:p}=this._mapRecvLocalIdInfo.get(r)??{};this._mapRecvLocalIdInfo.delete(r),this._remoteSdp.planBStopReceiving({mid:u,offerRtpParameters:p})}const h={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const a=await this._pc.createAnswer();O.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a)}async pauseReceiving(g){}async resumeReceiving(g){}async getReceiverStats(g){throw new T.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:g,label:h,protocol:a}){this.assertRecvDirection();const{streamId:r,ordered:u,maxPacketLifeTime:p,maxRetransmits:S}=g,P={negotiated:!0,id:r,ordered:u,maxPacketLifeTime:p,maxRetransmitTime:p,maxRetransmits:S,protocol:a};O.debug("receiveDataChannel() [options:%o]",P);const v=this._pc.createDataChannel(h,P);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const M={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",M),await this._pc.setRemoteDescription(M);const N=await this._pc.createAnswer();if(!this._transportReady){const k=s.parse(N.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:k})}O.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setLocalDescription(N),this._hasDataChannelMediaSection=!0}return{dataChannel:v}}async setupTransport({localDtlsRole:g,localSdpObject:h}){h||(h=s.parse(this._pc.localDescription.sdp));const a=C.extractDtlsParameters({sdpObject:h});a.role=g,this._remoteSdp.updateDtlsRole(g==="client"?"server":"client"),await new Promise((r,u)=>{this.safeEmit("@connect",{dtlsParameters:a},r,u)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return Pn.ReactNative=U,Pn}var qm;function jg(){if(qm)return sn;qm=1;var d=sn&&sn.__createBinding||(Object.create?function(v,M,N,k){k===void 0&&(k=N);var z=Object.getOwnPropertyDescriptor(M,N);(!z||("get"in z?!M.__esModule:z.writable||z.configurable))&&(z={enumerable:!0,get:function(){return M[N]}}),Object.defineProperty(v,k,z)}:function(v,M,N,k){k===void 0&&(k=N),v[k]=M[N]}),c=sn&&sn.__setModuleDefault||(Object.create?function(v,M){Object.defineProperty(v,"default",{enumerable:!0,value:M})}:function(v,M){v.default=M}),l=sn&&sn.__importStar||function(){var v=function(M){return v=Object.getOwnPropertyNames||function(N){var k=[];for(var z in N)Object.prototype.hasOwnProperty.call(N,z)&&(k[k.length]=z);return k},v(M)};return function(M){if(M&&M.__esModule)return M;var N={};if(M!=null)for(var k=v(M),z=0;z<k.length;z++)k[z]!=="default"&&d(N,M,k[z]);return c(N,M),N}}();Object.defineProperty(sn,"__esModule",{value:!0}),sn.Device=void 0,sn.detectDevice=S;const s=CS(),_=rt(),T=Er(),w=Dt(),R=l(_t()),C=l(Pt()),m=Rg(),x=kS(),D=jS(),O=BS(),y=US(),b=zS(),U=qS(),A=IS(),g=HS(),h=GS(),a=VS(),r=QS(),u=FS(),p=new _.Logger("Device");function S(v){var M,N,k,z;if(!v&&typeof navigator=="object"&&navigator.product==="ReactNative"){if(p.debug("detectDevice() | React-Native detected"),typeof RTCPeerConnection>"u"){p.warn("detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?");return}return typeof RTCRtpTransceiver<"u"?(p.debug("detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(p.debug("detectDevice() | ReactNative PlanB handler chosen"),"ReactNative")}else if(v||typeof navigator=="object"&&typeof navigator.userAgent=="string"){v??(v=navigator.userAgent);const V=new s.UAParser(v);p.debug("detectDevice() | browser detected [userAgent:%s, parsed:%o]",v,V.getResult());const ee=V.getBrowser(),L=(M=ee.name)==null?void 0:M.toLowerCase(),I=parseInt(ee.major??"0"),Y=(N=V.getEngine().name)==null?void 0:N.toLowerCase(),B=V.getOS(),Z=(k=B.name)==null?void 0:k.toLowerCase(),ae=parseFloat(B.version??"0"),re=(z=V.getDevice().model)==null?void 0:z.toLowerCase(),ge=Z==="ios"||re==="ipad",ve=L&&["chrome","chromium","mobile chrome","chrome webview","chrome headless"].includes(L),Ze=L&&["firefox","mobile firefox","mobile focus"].includes(L),Ee=L&&["safari","mobile safari"].includes(L),Ue=L&&["edge"].includes(L);if((ve||Ue)&&!ge&&I>=111)return"Chrome111";if(ve&&!ge&&I>=74||Ue&&!ge&&I>=88)return"Chrome74";if(ve&&!ge&&I>=70)return"Chrome70";if(ve&&!ge&&I>=67)return"Chrome67";if(ve&&!ge&&I>=55)return"Chrome55";if(Ze&&!ge&&I>=120)return"Firefox120";if(Ze&&!ge&&I>=60)return"Firefox60";if(Ze&&ge&&ae>=14.3)return"Safari12";if(Ee&&I>=12&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(Ee&&I>=11)return"Safari11";if(Ue&&!ge&&I>=11&&I<=18)return"Edge11";if(Y==="webkit"&&ge&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(Y==="blink"){const Ne=v.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(Ne){const ct=Number(Ne[1]);return ct>=111?"Chrome111":ct>=74?"Chrome74":ct>=70?"Chrome70":ct>=67?"Chrome67":"Chrome55"}else return"Chrome111"}else{p.warn("detectDevice() | browser not supported [name:%s, version:%s]",L,I);return}}else{p.warn("detectDevice() | unknown device");return}}let P=class{constructor({handlerName:M,handlerFactory:N}={}){if(this._loaded=!1,this._observer=new T.EnhancedEventEmitter,p.debug("constructor()"),M&&N)throw new TypeError("just one of handlerName or handlerInterface can be given");if(N)this._handlerFactory=N;else{if(M)p.debug("constructor() | handler given: %s",M);else if(M=S(),M)p.debug("constructor() | detected handler: %s",M);else throw new w.UnsupportedError("device not supported");switch(M){case"Chrome111":{this._handlerFactory=x.Chrome111.createFactory();break}case"Chrome74":{this._handlerFactory=D.Chrome74.createFactory();break}case"Chrome70":{this._handlerFactory=O.Chrome70.createFactory();break}case"Chrome67":{this._handlerFactory=y.Chrome67.createFactory();break}case"Chrome55":{this._handlerFactory=b.Chrome55.createFactory();break}case"Firefox120":{this._handlerFactory=U.Firefox120.createFactory();break}case"Firefox60":{this._handlerFactory=A.Firefox60.createFactory();break}case"Safari12":{this._handlerFactory=g.Safari12.createFactory();break}case"Safari11":{this._handlerFactory=h.Safari11.createFactory();break}case"Edge11":{this._handlerFactory=a.Edge11.createFactory();break}case"ReactNativeUnifiedPlan":{this._handlerFactory=r.ReactNativeUnifiedPlan.createFactory();break}case"ReactNative":{this._handlerFactory=u.ReactNative.createFactory();break}default:throw new TypeError(`unknown handlerName "${M}"`)}}const k=this._handlerFactory();this._handlerName=k.name,k.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new w.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new w.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:M}){p.debug("load() [routerRtpCapabilities:%o]",M);let N;try{if(this._loaded)throw new w.InvalidStateError("already loaded");const k=R.clone(M);C.validateRtpCapabilities(k),N=this._handlerFactory();const z=await N.getNativeRtpCapabilities();p.debug("load() | got native RTP capabilities:%o",z);const V=R.clone(z);C.validateRtpCapabilities(V),this._extendedRtpCapabilities=C.getExtendedRtpCapabilities(V,k),p.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=C.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=C.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=C.getRecvRtpCapabilities(this._extendedRtpCapabilities),C.validateRtpCapabilities(this._recvRtpCapabilities),p.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await N.getNativeSctpCapabilities(),p.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),C.validateSctpCapabilities(this._sctpCapabilities),p.debug("load() succeeded"),this._loaded=!0,N.close()}catch(k){throw N&&N.close(),k}}canProduce(M){if(this._loaded){if(M!=="audio"&&M!=="video")throw new TypeError(`invalid kind "${M}"`)}else throw new w.InvalidStateError("not loaded");return this._canProduceByKind[M]}createSendTransport({id:M,iceParameters:N,iceCandidates:k,dtlsParameters:z,sctpParameters:V,iceServers:ee,iceTransportPolicy:L,additionalSettings:I,proprietaryConstraints:H,appData:Y}){return p.debug("createSendTransport()"),this.createTransport({direction:"send",id:M,iceParameters:N,iceCandidates:k,dtlsParameters:z,sctpParameters:V,iceServers:ee,iceTransportPolicy:L,additionalSettings:I,proprietaryConstraints:H,appData:Y})}createRecvTransport({id:M,iceParameters:N,iceCandidates:k,dtlsParameters:z,sctpParameters:V,iceServers:ee,iceTransportPolicy:L,additionalSettings:I,proprietaryConstraints:H,appData:Y}){return p.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:M,iceParameters:N,iceCandidates:k,dtlsParameters:z,sctpParameters:V,iceServers:ee,iceTransportPolicy:L,additionalSettings:I,proprietaryConstraints:H,appData:Y})}createTransport({direction:M,id:N,iceParameters:k,iceCandidates:z,dtlsParameters:V,sctpParameters:ee,iceServers:L,iceTransportPolicy:I,additionalSettings:H,proprietaryConstraints:Y,appData:B}){if(this._loaded){if(typeof N!="string")throw new TypeError("missing id");if(typeof k!="object")throw new TypeError("missing iceParameters");if(Array.isArray(z)){if(typeof V!="object")throw new TypeError("missing dtlsParameters");if(ee&&typeof ee!="object")throw new TypeError("wrong sctpParameters");if(B&&typeof B!="object")throw new TypeError("if given, appData must be an object")}else throw new TypeError("missing iceCandidates")}else throw new w.InvalidStateError("not loaded");const Z=new m.Transport({direction:M,id:N,iceParameters:k,iceCandidates:z,dtlsParameters:V,sctpParameters:ee,iceServers:L,iceTransportPolicy:I,additionalSettings:H,proprietaryConstraints:Y,appData:B,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",Z),Z}};return sn.Device=P,sn}var Tr={},ju={},Im;function KS(){return Im||(Im=1,Object.defineProperty(ju,"__esModule",{value:!0})),ju}var Bu={},Hm;function XS(){return Hm||(Hm=1,Object.defineProperty(Bu,"__esModule",{value:!0})),Bu}var Gm;function ZS(){return Gm||(Gm=1,function(d){var c=Tr&&Tr.__createBinding||(Object.create?function(s,_,T,w){w===void 0&&(w=T);var R=Object.getOwnPropertyDescriptor(_,T);(!R||("get"in R?!_.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return _[T]}}),Object.defineProperty(s,w,R)}:function(s,_,T,w){w===void 0&&(w=T),s[w]=_[T]}),l=Tr&&Tr.__exportStar||function(s,_){for(var T in s)T!=="default"&&!Object.prototype.hasOwnProperty.call(_,T)&&c(_,s,T)};Object.defineProperty(d,"__esModule",{value:!0}),l(jg(),d),l(Rg(),d),l(yg(),d),l(bg(),d),l(Sg(),d),l(wg(),d),l(KS(),d),l(XS(),d),l(Gt(),d),l(Dt(),d)}(Tr)),Tr}var Ym;function $S(){return Ym||(Ym=1,function(d){var c=_n&&_n.__createBinding||(Object.create?function(m,x,D,O){O===void 0&&(O=D);var y=Object.getOwnPropertyDescriptor(x,D);(!y||("get"in y?!x.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return x[D]}}),Object.defineProperty(m,O,y)}:function(m,x,D,O){O===void 0&&(O=D),m[O]=x[D]}),l=_n&&_n.__setModuleDefault||(Object.create?function(m,x){Object.defineProperty(m,"default",{enumerable:!0,value:x})}:function(m,x){m.default=x}),s=_n&&_n.__importStar||function(){var m=function(x){return m=Object.getOwnPropertyNames||function(D){var O=[];for(var y in D)Object.prototype.hasOwnProperty.call(D,y)&&(O[O.length]=y);return O},m(x)};return function(x){if(x&&x.__esModule)return x;var D={};if(x!=null)for(var O=m(x),y=0;y<O.length;y++)O[y]!=="default"&&c(D,x,O[y]);return l(D,x),D}}(),_=_n&&_n.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(d,"__esModule",{value:!0}),d.debug=d.parseScalabilityMode=d.detectDevice=d.Device=d.version=d.types=void 0;const T=_(pc());d.debug=T.default;const w=jg();Object.defineProperty(d,"Device",{enumerable:!0,get:function(){return w.Device}}),Object.defineProperty(d,"detectDevice",{enumerable:!0,get:function(){return w.detectDevice}});const R=s(ZS());d.types=R,d.version="3.8.2";var C=Ki();Object.defineProperty(d,"parseScalabilityMode",{enumerable:!0,get:function(){return C.parse}})}(_n)),_n}var JS=$S();const WS=({userName:d})=>{const{roomId:c}=Jm(),l=Cr(),[s,_]=$.useState([]),[T,w]=$.useState(null),[R,C]=$.useState(null),[m,x]=$.useState(!0),[D,O]=$.useState({}),y=$.useRef(null),b=$.useRef(null),U=$.useRef(new Map),A=$.useRef(null),g=$.useRef(!1),h=z=>{_(z||[])};$.useEffect(()=>{if(R){const z=new AudioContext,V=z.createAnalyser();z.createMediaStreamSource(R).connect(V),V.fftSize=512;const L=new Uint8Array(V.frequencyBinCount);let I=!1;const H=10,Y=()=>{V.getByteFrequencyData(L);const Z=L.reduce((ae,le)=>ae+le,0)/L.length;Z>H&&!I?(I=!0,Pe.emit("updateTalkingStatus",{isTalking:!0},ae=>{ae.success||console.error("Failed to update talking status to true")})):Z<=H&&I&&(I=!1,Pe.emit("updateTalkingStatus",{isTalking:!1},ae=>{ae.success||console.error("Failed to update talking status to false")})),requestAnimationFrame(Y)};return Y(),()=>{z.close()}}},[R]),$.useEffect(()=>((async()=>{try{const V=await new Promise(ee=>{Pe.emit("getUserId",L=>ee(L))});w(V),g.current||(g.current=!0,Pe.emit("joinRoom",{roomId:c,userName:d},ee=>{ee.error&&(alert(ee.error),l("/"))}))}catch(V){console.error("Error initialising socket:",V)}})(),Pe.on("updateParticipants",V=>{h(V)}),Pe.on("roomTerminated",()=>{alert("Room has been terminated by the admin."),l("/")}),Pe.on("newProducer",async({producerId:V,userId:ee})=>{var L;try{const I=await u();if(!I)throw new Error("Failed to create consumer transport");Pe.emit("consume",{producerId:V,rtpCapabilities:(L=y.current)==null?void 0:L.rtpCapabilities,transportId:I.id},async H=>{if(H!=null&&H.error){console.error("Failed to consume producer:",H.error);return}const Y=await I.consume({id:H.id,producerId:H.producerId,kind:H.kind,rtpParameters:H.rtpParameters}),B=new MediaStream([Y.track]);O(Z=>({...Z,[ee]:B}))})}catch(I){console.error("Error handling new producer:",I)}}),Pe.on("existingProducer",async({producerId:V,userId:ee})=>{var L;try{const I=await u();if(!I)throw new Error("Failed to create consumer transport");Pe.emit("consume",{producerId:V,rtpCapabilities:(L=y.current)==null?void 0:L.rtpCapabilities,transportId:I.id},async H=>{if(H!=null&&H.error){console.error("Failed to consume existing producer:",H.error);return}const Y=await I.consume({id:H.id,producerId:H.producerId,kind:H.kind,rtpParameters:H.rtpParameters}),B=new MediaStream([Y.track]);O(Z=>({...Z,[ee]:B}))})}catch(I){console.error("Error handling existing producer:",I)}}),()=>{Pe.off("updateParticipants"),Pe.off("newProducer"),Pe.off("existingProducer"),p()}),[c,d]),$.useEffect(()=>{(async()=>{try{y.current=new JS.Device;const V=await new Promise(ee=>{Pe.emit("getRouterRtpCapabilities",L=>ee(L))});if(!V)throw new Error("Failed to get router RTP capabilities");await y.current.load({routerRtpCapabilities:V});try{const ee=await navigator.mediaDevices.getUserMedia({audio:!0});C(ee),x(!0),await a(ee)}catch(ee){console.error("Microphone access denied:",ee),x(!1)}}catch(V){console.error("Error initialising device:",V)}})()},[]);const a=async z=>{try{A.current&&(A.current.close(),A.current=null),b.current&&(b.current.close(),b.current=null);const V=await r();if(!V)throw new Error("Failed to create producer transport");b.current=V;const ee=await V.produce({track:z.getAudioTracks()[0]});A.current=ee}catch(V){console.error("Error setting up producer:",V)}},r=async()=>{try{const z=await new Promise(ee=>{Pe.emit("createProducerTransport",{roomId:c},L=>ee(L))});if(!z)throw new Error("No producer transport data received");const V=y.current.createSendTransport(z);return V.on("connect",({dtlsParameters:ee},L,I)=>{Pe.emit("connectProducerTransport",{dtlsParameters:ee,transportId:V.id},H=>{H!=null&&H.success?L():I(new Error("Failed to connect producer transport"))})}),V.on("produce",({kind:ee,rtpParameters:L},I)=>{Pe.emit("produce",{kind:ee,rtpParameters:L,transportId:V.id},I)}),V}catch(z){return console.error("Error creating producer transport:",z),null}},u=async()=>{try{const z=await new Promise(ee=>{Pe.emit("createConsumerTransport",{roomId:c},L=>ee(L))});if(!z)throw new Error("No consumer transport data received");const V=y.current.createRecvTransport(z);return V.on("connect",({dtlsParameters:ee},L,I)=>{Pe.emit("connectConsumerTransport",{dtlsParameters:ee,transportId:V.id},H=>{H!=null&&H.success?L():I(new Error("Failed to connect consumer transport"))})}),U.current.set(V.id,V),V}catch(z){return console.error("Error creating consumer transport:",z),null}},p=()=>{R&&(R.getTracks().forEach(z=>z.stop()),C(null)),A.current&&(A.current.close(),A.current=null),b.current&&(b.current.close(),b.current=null),U.current.forEach(z=>z.close()),U.current.clear(),Pe.disconnect()},S=()=>{if(R){const z=R.getAudioTracks()[0];z.enabled=!z.enabled,x(z.enabled),Pe.emit("updateMicStatus",{micStatus:z.enabled},V=>{V.success||console.error("Failed to update mic status")})}},P=()=>{p(),l("/")},v=()=>{Pe.emit("terminateRoom",{roomId:c},z=>{z.error&&alert(z.error)})},k={display:"grid",gap:"10px",height:"100%",...(z=>{switch(z){case 1:return{gridTemplate:"1fr / 1fr"};case 2:return{gridTemplate:"1fr / repeat(2, 1fr)"};case 3:return{gridTemplate:"repeat(2, 1fr) / 1fr 1fr"};case 4:return{gridTemplate:"repeat(2, 1fr) / repeat(2, 1fr)"};default:{const V=Math.ceil(Math.sqrt(z));return{gridTemplate:`repeat(${Math.ceil(z/V)}, 1fr) / repeat(${V}, 1fr)`}}}})(s.length)};return he.jsxs("div",{className:"room-container",children:[he.jsx("div",{className:"participants-grid",style:k,children:s.map(z=>he.jsx(SS,{participant:z,currentUserId:T,micEnabled:m},z.userId))}),he.jsx("div",{className:"remote-audio",children:Object.entries(D).map(([z,V])=>he.jsx("audio",{autoPlay:!0,playsInline:!0,ref:ee=>{ee&&ee.srcObject!==V&&(ee.srcObject=V)}},z))}),he.jsx(yS,{toggleMute:S,micEnabled:m,exitSession:P,terminateRoom:v})]})},ew=({userName:d})=>{const{roomId:c}=Jm();return d?he.jsx(WS,{userName:d}):he.jsx(zy,{to:`/name?roomId=${c}`})},tw=()=>{const[d,c]=$.useState("");return he.jsx(fb,{children:he.jsxs(Iy,{children:[he.jsx(As,{path:"/",element:he.jsx(gS,{})}),he.jsx(As,{path:"/join",element:he.jsx(vS,{})}),he.jsx(As,{path:"/name",element:he.jsx(_S,{onNameSubmit:l=>c(l)})}),he.jsx(As,{path:"/room/:roomId",element:he.jsx(ew,{userName:d})})]})})},nw=document.getElementById("root");Z_.createRoot(nw).render(he.jsx(tw,{}));
